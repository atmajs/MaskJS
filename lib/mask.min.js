/*!
 * MaskJS v0.12.6
 * Part of the Atma.js Project
 * http://atmajs.com/
 *
 * MIT license
 * http://opensource.org/licenses/MIT
 *
 * (c) 2012, 2015 Atma.js and other contributors
 */
!function(n,t){"use strict";function e(){return t(o,r,i)}var r,i,o="undefined"==typeof window||null==window.navigator?global:window;return"undefined"==typeof exports||null!=n&&n!==exports&&n!==o||(n=exports),i=o.document,r=n||o,"function"==typeof define&&define.amd?define(e):e()}(this,function(n,t,e){"use strict";function r(n,t,e,r,i,o,l){for(var u,s,a,c,f,h=n.length,d=-1,p=null,v="",g=!0;++d<h;){if(g===!0)null==p?v+=n[d]:p.push(n[d]);else{if(c=n[d],s=null,a=c.indexOf(":"),-1===a)s=P(c,e,r,o);else{if(u=a>0?c.substring(0,a).trim():"",""===u&&(u="expression"),c=c.substring(a+1),f=ct[u],null==f){Q("Undefined custom util `%s`",u);continue}s=f(c,e,r,i,o,l,t)}null!=s&&("object"==typeof s&&null==p&&(p=[v]),null==p?v+=s:p.push(s))}g=!g}return null==p?v:p}function i(){}var o,l,u,s,a;if(function(){o=function(n,t,e){if(null==e&&(e=n),null==n)return n;for(var r=n.length,i=0;r>i;i++)t.call(e,n[i],i);return e},s=function(n,t){if(null==n)return-1;for(var e=n.length,r=0;e>r;r++)if(n[r]===t)return r;return-1},l=function(n,t){var e=s(n,t);return-1===e?!1:(n.splice(e,1),!0)},u=function(n,t,e){var r=new Array(n.length);return o(n,function(n,e){r[e]=t.call(this,n,e)},e),r},a=function(n,t,e){for(var r=n.length,i=0;r>i;i++)if(t.call(e||n,n[i],i))return!0;return!1}}(),void 0===Array.prototype.forEach&&(Array.prototype.forEach=function(n,t){o(this,n,t)}),void 0===Array.prototype.indexOf&&(Array.prototype.indexOf=function(n){return s(this,n)}),null==String.prototype.trim&&(String.prototype.trim=function(){var n,t=-1,e=this.length;if(0===e)return this;for(;++t<e&&(n=this.charCodeAt(t),!(n>32)););for(;0!==--e&&(n=this.charCodeAt(e),!(n>32)););return 0!==t&&e!==length-1?this.substring(t,e+1):this}),null==Function.prototype.bind){var c;Function.prototype.bind=function(){if(arguments.length<2&&"undefined"==typeof arguments[0])return this;var n=this,t=c.call(arguments),e=t.shift();return function(){return n.apply(e,t.concat(c.call(arguments)))}}}var f,h,d,p,v,g,m;!function(){f=function(n){return"function"==typeof n},v=function(n){return null!=n&&"object"==typeof n},h=d=function(n){return null!=n&&"object"==typeof n&&"number"==typeof n.length&&"function"==typeof n.slice},p=function(n){return"string"==typeof n},g=function(n){return"string"==typeof n&&""!==n},m=function(n){return null==n||"object"!=typeof n?!1:n.constructor===Object}}();var y,b,x,w,k;!function(){y=function(n,t){if("."===t)return n;for(var e=t.split("."),r=e.length,i=-1;null!=n&&++i<r;)n=n[e[i]];return n},b=function(n,t,e){for(var r,i=t.split("."),o=i.length-1,l=-1;++l<o;)r=i[l],null==n[r]&&(n[r]={}),n=n[r];n[i[l]]=e},x=function(n,t){if(null==t)return n||{};if(null==n)return k(t);for(var e in t)n[e]=t[e];return n},w=function(n){for(var t=arguments.length,e=1;t>e;e++)n=x(n,arguments[e]);return n},k=Object.create||function(n){var t=function(){};return t.prototype=n,new t}}();var N,C,E,A;!function(){N=function(n,t){var e=n.indexOf(t);return-1===e?!1:(n.splice(e,1),!0)},C=function(n,t,e){n.forEach(t,e)},E=function(n,t){return n.indexOf(t)},A=function(n,t){return-1!==n.indexOf(t)}}();var _,O,S;!function(){_=function(n,t){return function(){return O(n,t,arguments)}},O=function(n,t,e){var r=e.length;return 0===r?n.call(t):1===r?n.call(t,e[0]):2===r?n.call(t,e[0],e[1]):3===r?n.call(t,e[0],e[1],e[2]):4===r?n.call(t,e[0],e[1],e[2],e[3]):n.apply(t,e)},S=function(){return!1}}();var j;!function(){j=function(){var n=c.call(arguments),t=n.pop();null==t&&(t={});for(var e,r,i,o=t.hasOwnProperty("constructor")?t.constructor:null,l=n.length;--l>-1;){r=n[l],"function"==typeof r&&(null==e&&(e=r),r=r.prototype);for(var u in r)null==t[u]&&(t[u]=r[u]);null==i&&(i=r)}if(t.Parent=i,null==o)o=null==e?function(){}:function(){return e.apply(this,c.call(arguments))};else if(e){var s=o;o=function(){var n=c.call(arguments),t=e.apply(this,n);return void 0!==t?t:s.apply(this,n)}}return t.constructor=o,o.prototype=t,o}}();var T;!function(){function n(n,t,e,r){return null==r?n:(null!=t?O(r,n,t):e.push(r),n)}function t(n){n._done=null,n._fail=null,n._always=null}function e(n,t,e){if(null!=n){for(var r,i=n.length,o=-1;++o<i;)r=n[o],r&&O(r,t,e);n.length=0}}function r(n){return null==n||"object"!=typeof n?!1:n instanceof T?!0:"function"==typeof n.done&&"function"==typeof n.fail}T=function(){},T.prototype={_isAsync:!0,_done:null,_fail:null,_always:null,_resolved:null,_rejected:null,defer:function(){return this._rejected=null,this._resolved=null,this},isResolved:function(){return null!=this._resolved},isRejected:function(){return null!=this._rejected},isBusy:function(){return null==this._resolved&&null==this._rejected},resolve:function(){var n=this._done,r=this._always;return this._resolved=arguments,t(this),e(n,this,arguments),e(r,this,[this]),this},reject:function(){var n=this._fail,r=this._always;return this._rejected=arguments,t(this),e(n,this,arguments),e(r,this,[this]),this},then:function(n,t){return this.pipe(n,t)},done:function(t){return null!=this._rejected?this:n(this,this._resolved,this._done||(this._done=[]),t)},fail:function(t){return null!=this._resolved?this:n(this,this._rejected,this._fail||(this._fail=[]),t)},always:function(t){return n(this,this._rejected||this._resolved,this._always||(this._always=[]),t)},pipe:function(n){function t(n,t,e){return function(){if(null!=e){var i=e.apply(this,arguments);if(null!=i)return r(i)===!0?void i.pipe(n):void n[t](i)}n[t].apply(n,arguments)}}var e;if("function"==typeof n){e=new T;var i=n,o=arguments.length>1?arguments[1]:null;return this.done(t(e,"resolve",i)).fail(t(e,"reject",o)),e}e=n;for(var l,u=arguments.length,s=1===u,a=1===u,c=0;++c<u;)switch(l=arguments[c]){case"done":s=!0;break;case"fail":a=!0;break;default:console.error("Unsupported pipe channel",arguments[c])}return s&&this.done(e.resolveDelegate()),a&&this.fail(e.rejectDelegate()),this},pipeCallback:function(){var n=this;return function(t){if(null!=t)return void n.reject(t);var e=c.call(arguments,1);O(n.resolve,n,e)}}},T.run=function(n,t){var e=new T;return null==t&&(t=e),n.call(t,e.resolveDelegate(),e.rejectDelegate(),e),e}}();var M,c=Array.prototype.slice,D=Array.prototype.splice,R=Array.prototype.indexOf,I=k,L=Object.hasOwnProperty,F={"'":/\\'/g,'"':/\\"/g,"{":/\\\{/g,">":/\\>/g,";":/\\>/g},U={allowCache:!0};!function(){M=function(n,t){if(null==n)return null==t?{}:k(t);if(null==t)return n;var e;for(e in t)"class"!==e||"string"!=typeof n[e]?n[e]=t[e]:n[e]+=" "+t[e];return n}}();var H;!function(){H=function(n,t){if(null!=t&&null!=n)for(var e=n.length,r=t.length,i=-1;++i<r;)n[e+i]=t[i]}}();var P,B;!function(){function n(n,t,e,r){for(var i=n;r>e&&null!=i;)i=i[t[e]],e++;return i}P=function(t,e,r,i){if("."===t)return e;var o,l=t.split("."),u=e,s=-1,a=l.length,c=l[0];for("$c"===c?(u=i,s++):"$a"===c?(u=i&&i.attr,s++):"$u"===c?(u=bt,s++):"$ctx"===c&&(u=r,s++),o=s;null!=u&&++s<a;)u=u[l[s]];if(null==u&&-1===o)for(var f;null!=i;){if(f=i.scope,null!=f&&(u=n(f,l,0,a),null!=u))return u;i=i.parent}return u},B=function(n){var t,e=[],r=0;for(t in n)e[r++]={key:t,value:n[t]};return e}}();var W,V,z;!function(){W=function(t,e){(n[t]||(n[t]=[])).push(e)},V=function(t,e){return null==e?void(n[t]=[]):void N(n[t],e)},z=function(t){var e=n[t];if(null==e)return!1;var r=e.length,i=-1,o=c.call(arguments,1);if(0===r)return!1;for(;++i<r;)e[i].apply(null,o);return!0};var n={compoCreated:null,error:null}}();var G,K,X,Y,q,Q,J;!function(){function n(n){function r(e,r,i){this.type="Parser"+n,this.message=e,this.original=r,this.index=i,this.stack=t()}return e(r,Error),r}function t(){var n=(new Error).stack;return null==n?null:n.split("\n").slice(6,8).join("\n")}function e(n,t){n.prototype=k(t.prototype)}function r(n,t,e,r,s,a,c){t+=i(s)+o(e,r,c)+"\nParser "+l(a)+u(n,e,r);var d="error"===n?f:h;return new d(t,e,r)}function i(n){return null==n?"":("number"==typeof n&&(n=String.fromCharCode(n))," Invalid token: `"+n+"`")}function o(n,t,e){if(null==t||!e)return"";var r=s(n,t),i=r[1],o=r[2];return" at "+(e||"")+"("+i+":"+o+")"}function l(n){var t={2:"tag",3:"tag",5:"attribute key",6:"attribute value",8:"literal","var":"VarStatement",expr:"Expression"};return null==n||null==t[n]?"":' on "'+t[n]+'"'}function u(n,t,e){if(null==e)return"";var r=s(t,e),i=r[0],o=r[1],l=r[2];return null==e?"":" at ("+o+":"+l+") \n"+c(i,o,l)}function s(n,t){var e=n.substring(0,t).split("\n"),r=e.length,i=t+1-e.slice(0,r-1).join("\n").length;return r>1&&(i-=1),[n.split("\n"),r,i]}if(G=function(n){Q(n),z("error",n)},K=function(n,t,e,i,o,l){var u=r("error",n,t,e,i,o,l);z("error",u)||(Q(u.message),q("\n"+u.stack))},X=function(n,t,e,i,o,l){var u=r("warn",n,t,e,i,o,l);z("error",u)||(q(u.message),Y("\n"+u.stack))},J=function(n){return Et('div style="background:red;color:white;">tt>"'+n+'"')},"undefined"==typeof console)Y=q=Q=function(){};else{var a=Function.prototype.bind;Y=a.call(console.warn,console),q=a.call(console.warn,console,"MaskJS [Warn] :"),Q=a.call(console.error,console,"MaskJS [Error] :")}var c,f=n("Error"),h=n("Warning");!function(){function n(n,t){for(var e=String(n);e.length<t;)e+=" ";return e}function t(n,t){for(var e="";--t>-1;)e+=n;return e}c=function(e,r,i){var o=3,l=2,u=r-1-o,s=u+o+l,a="";0>u&&(u=0),s>e.length&&(s=e.length);for(var c,f=String(s).length;s>u;u++)a&&(a+="\n"),c=n(u+1,f),a+=c+"|"+e[u],u+1===r&&(a+="\n"+t(" ",f+1),a+=e[u].substring(0,i-1).replace(/[^\s]/g," "),a+="^");return a}}()}();var Z,nt,tt,et,rt,it,ot,lt,ut;!function(){function n(n){for(;-1!==n.indexOf("../");)n=n.replace(i,"");return n.replace(/\/\.\//g,"/")}var t=!0;Z=function(n){return n.substring(0,n.lastIndexOf("/")+1)},nt=function(n){return n=n.replace("file://","").replace(/\\/g,"/").replace(/\?[^\n]+$/,""),/^\/\w+:\/[^\/]/i.test(n)?n.substring(1):n},tt=function(n){var t=n.indexOf("?");if(-1!==t)return tt(n.substring(0,t));var e=n.lastIndexOf(".");return-1===e?"":n.substring(e+1)},et=function(){if(null==e)return"undefined"==typeof module?"":it(module.parent.filename);var n=window.location.pathname.replace(/\/[^\/]+\.\w+$/,"");return"/"===n[n.length-1]?n:n+"/"},rt=function(n){return n.replace(/\\/g,"/").replace(/([^:\/])\/{2,}/g,"$1/").replace(/\.\//g,"")},it=function(n){return n=rt(n),"file:"===n.substring(0,5)?n:"file:///"+n},ot=function(e,i){return r.test(e)?n(e):("./"===e.substring(0,2)&&(e=e.substring(2)),"/"===e[0]&&U.path&&(e=U.path+e.substring(1),r.test(e))?n(e):("/"===e[0]?(t===!1||U.lockedToFolder===!0)&&(e=e.substring(1)):null!=i&&(e=i+e),n(e)))},ut=function(n){var t=n.charCodeAt(0);switch(t){case 47:return!1;case 102:case 104:return r.test(n)===!1}return!0},lt=function(){for(var n,t="",e=arguments.length,r=-1;++r<e;)n=arguments[r],n&&(n=rt(n),""!==t?("/"!==t[t.length-1]&&(t+="/"),"/"===n[0]&&(n=n.substring(1)),t+=n):t=n);return t};var r=/^(file|https?):/i,i=/([^\/]+\/)?\.\.\//}();var st,at;!function(){function t(n,t,e){t=ot(t,e);var r=i[t];return void 0!==r?r:(r=new T,n(t,r.pipeCallback()),r)}st=function(n,e){return t(r,n,e)},at=function(n,e){return t(o,n,e)};var r,i={};!function(){r=function(n,t){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){var r,i=e.responseText;200!==e.status&&(r={status:e.status,content:i},q("File error",n,e.status)),t(r,i)}},e.open("GET",n,!0),e.send()}}();var o;!function(){o=function(n,e){var i=new r(n).done(function(n){e(null,n)}).fail(function(n){e(n)});t.load(i)};var t,r=j(T,{exports:null,url:null,state:0,constructor:function(n){this.url=n},load:function(){if(0!==this.state)return this;this.state=1,n.module={};var t=this;return i(this.url,function(e){return t.state=4,e&&"error"===e.type?void t.reject(e):void t.resolve(t.exports=n.module.exports)}),this}});!function(){function n(){if(0!==e.length){var t=e[0];0===t.state&&t.load().always(n)}}t={load:function(t){e.push(t),n()}};var e=[]}();var i;!function(){i=function(t,r){var i=e.createElement("script");i.type="text/javascript",i.src=t,"onreadystatechange"in i?i.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&r()}:i.onload=i.onerror=r,void 0===n&&(n=e.getElementsByTagName("head")[0]),n.appendChild(i)};var n}()}()}();var ct,ft,ht,dt,pt,vt,gt,mt,yt,bt,xt,wt,kt;!function(){var n={div:null,span:null,input:null,button:null,textarea:null,select:null,option:null,h1:null,h2:null,h3:null,h4:null,h5:null,h6:null,a:null,p:null,img:null,table:null,td:null,tr:null,pre:null,ul:null,li:null,ol:null,i:null,em:null,b:null,br:null,strong:null,form:null,audio:null,video:null,canvas:null,svg:null},t={"class":null,id:null,style:null,name:null,type:null,value:null,required:null};ct={expression:function(n,t,e,r,i){return Ct.eval(n,t,e,i)}},mt={},ft={},ht=k(t),dt=k(n),pt=k(n),gt=k(n),vt={},function(n,t){function e(n){function t(n,t){this.ID=null,this.tagName=n.tagName,this.attr=k(n.attr),this.expression=n.expression,this.nodes=n.nodes,this.nextSibling=n.nextSibling,this.parent=t,this.components=null}return t.prototype=n,t}wt=function(t,r){null!=r&&"object"==typeof r&&(r.__Ctor=e(r)),n[t]=r},kt=function(e){var i=n[e];i!==r&&(null!=i&&(t[e]=i),n[e]=r)};var r;!function(){r=function(n,e,r,i,o){for(var l,u=n.tagName;null!=o;){if(f(o.getHandler)&&(l=o.getHandler(u),null!=l))return l;o=o.parent}return l=t[u],null!=l?l:(Q("Component not found:",u),null)}}()}(dt,pt),function(n){function t(n){if("parsed"===n.arguments)return r(n.process);var t=_(n.process||e,n);return t.util=n,t}function e(n,t,e,r,i,o,l){return"node"===l?(this.nodeRenderStart(n,t,e,r,i),this.node(n,t,e,r,i)):(this.attrRenderStart(n,t,e,r,i,o),this.attr(n,t,e,r,i,o))}function r(n){return function(t,e,r,i,o){var l=Ct.evalStatements(t,e,r,o);return n.apply(null,l)}}bt={},xt=function(e,r){return f(r)?void(n[e]=r):(n[e]=t(r),void("parsed"===r.arguments&&(bt[e]=r.process)))},yt=function(t){return null!=t?n[t]:n}}(ct)}();var Nt,Ct=function(){function n(n,t){null==t&&(t=!1),e=n,i=0,o=n.length,r=new it;var l,N,F=r,K=tt;n:for(;;)if(o>i&&(l=e.charCodeAt(i))<33)i++;else{if(i>=o)break;if(N=Ct(l),null==N&&o>i)break;if(N===$){if(t===!0)return[r,i];break}if(t===!0){var X=F.parent;if(null!=X&&X.type===P&&null==X.parent&&N===R)return[r,i]}if(N===$)break;switch(N){case C:F=gt(F,new ot(F)),F=gt(F,new it(F)),i++;continue;case E:var q=P;K===et&&(K=tt,q=V);do F=F.parent;while(null!=F&&F.type!==q);if(q===P&&(F=F.parent),null==F){yt("OutOfAst Exception",l);break n}i++;continue;case O:F=gt(F,new st(F)),N=H,i++;break;case S:for(;null!=F&&F.type!==Y;)F=F.parent;i++;continue;case j:if(K!==et){K=tt;do F=F.parent;while(null!=F&&F.type!==P&&F.type!==Y);if(i++,null==F){yt("Unexpected comma",l);break n}if(F.type===Y){N=H;break}continue}do F=F.parent;while(null!=F&&F.type!==V);if(null==F){yt("OutOfAst Exception",l);break n}F=F.newArgument(),i++;continue;case M:r=new pt(r),F=r.case1,i++;continue;case D:F=r.case2,i++;continue;case T:l=e.charCodeAt(i+1),l>=48&&57>=l?N=U:(N=F.type===P?R:I,i++);break;case A:if(F.type===W||F.type===G||F.type===z){F=gt(F,new ht(F)),F=F.getBody(),i++;continue}F=gt(F,new ut(F)),F=F.body,i++;continue;case _:do F=F.parent;while(null!=F&&F.type!==G&&F.type!==J);i++;continue}if(F.type===P&&(F=gt(F,new ot(F))),u!==N&&p!==N||null!=F.body)switch(N){case u:case s:case c:case a:case f:case d:case h:case v:case g:case m:case y:case b:case x:case w:case k:for(;F&&F.type!==B;)F=F.parent;if(null==F.body)return yt("Unexpected operator",l);F.join=N;do F=F.parent;while(null!=F&&F.type!==P);if(null==F)return yt("Unexpected operator",l);i++;continue;case L:case U:if(null!=F.body&&null==F.join)return yt("Directive expected",l);L===N&&(i++,gt(F,new lt(wt(l))),i++),U===N&&gt(F,new lt(kt(l)));continue;case R:case I:var Q=Nt();if(N===R&&("null"===Q&&(Q=null),"false"===Q&&(Q=!1),"true"===Q&&(Q=!0),"string"!=typeof Q)){gt(F,new lt(Q));continue}for(;o>i;){l=e.charCodeAt(i);{if(!(33>l))break;i++}}if(40===l){K=et,i++;var Z=gt(F,new at(F,Q));F=Z.newArgument();continue}var nt=N===R?ct:ft;F=gt(F,new nt(F,Q));break;case H:if(125===xt())continue;var rt=Nt();if(58!==xt())return yt("Object parser. Semicolon expeted",l);i++,F=F.nextProp(rt),N=R;continue}else F=gt(F,new dt(F,N)),i++}return null==F.body&&F.type===B?yt("Unexpected end of expression",l):(vt(r),r)}function t(e,r,i,o){var N,C;if(null==e)return null;if("."===e)return r;if(C="string"==typeof e?l.hasOwnProperty(e)===!0?l[e]:l[e]=n(e):e,null==C)return null;var E,A,_,O=C.type;if(P===O){var S,j;n:for(E=0,_=C.body.length;_>E;E++)if(A=C.body[E],S=t(A,r,i,o),null!=j&&null!=j.join){if(j.join===d)if(N)N=S;else for(;_>E&&C.body[E].join!==h;E++);if(j.join===h){if(N)break n;if(S){N=S;break n}}switch(j.join){case u:N-=S;break;case s:N+=S;break;case a:N/=S;break;case c:N*=S;break;case f:N%=S;break;case m:N=N!=S;break;case y:N=N!==S;break;case v:N=N==S;break;case g:N=N===S;break;case b:N=N>S;break;case x:N=N>=S;break;case w:N=S>N;break;case k:N=S>=N}j=A}else j=A,N=S}if(B===O)return N=t(C.body,r,i,o),null==C.next?N:mt(C.next,N);if(X===O)return C.body;if(J===O){var T=C.body.body,M=T.length,E=-1;for(N=new Array(M);++E<M;)N[E]=t(T[E],r,i,o);return N}if(Y===O){N={};var D=C.props;for(var $ in D)N[$]=t(D[$],r,i,o);return N}if(W===O||V===O||G===O||z===O)return mt(C,r,i,o);if(Z===O)switch(N=t(C.body,r,i,o),C.prefix){case u:N=-N;break;case p:N=!N}return nt===O&&(N=t(C.body,r,i,o),N=t(N?C.case1:C.case2,r,i,o)),N}var e,r,i=0,o=0,l={},u="-",s="+",a="/",c="*",f="%",h="||",d="&&",p="!",v="==",g="===",m="!=",y="!==",b=">",x=">=",w="<",k="<=",N=".",C=20,E=21,A=22,_=23,O=24,S=25,j=26,T=27,M=28,D=29,$=30,R=31,I=32,L=33,U=34,H=35,P=1,B=2,W=3,V=4,z=5,G=6,X=7,Y=10,J=11,Z=12,nt=13,tt=1,et=2,rt={};rt[N]=1,rt[a]=2,rt[c]=2,rt[u]=3,rt[s]=3,rt[b]=4,rt[x]=4,rt[w]=4,rt[k]=4,rt[v]=5,rt[g]=5,rt[m]=5,rt[y]=5,rt[d]=6,rt[h]=6;var it,ot,lt,ut,st,at,ct,ft,ht,dt,pt;!function(){it=function(n){this.parent=n,this.type=P,this.body=[],this.join=null},ot=function(n){this.parent=n},ot.prototype={constructor:ot,type:B,join:null,body:null},lt=function(n){this.type=X,this.body=n,this.join=null},ut=function(n){this.type=J,this.parent=n,this.body=new it(this)},st=function(n){this.type=Y,this.parent=n,this.props={}},st.prototype={nextProp:function(n){var t=new ot(this);return this.props[n]=t,t}},at=function(n,t){this.parent=n,this.type=V,this.body=t,this.arguments=[],this.next=null},at.prototype={constructor:at,newArgument:function(){var n=new it(this);return this.arguments.push(n),n}},ct=function(n,t){this.type=W,this.parent=n,this.body=t,this.next=null},ft=function(n,t){this.type=z,this.parent=n,this.body=t,this.next=null},ht=function(n){this.parent=n,this.body=new ot(this),this.body.body=new it(this.body),this.next=null},ht.prototype={type:G,getBody:function(){return this.body.body}},dt=function(n,t){this.parent=n,this.prefix=t},dt.prototype={constructor:dt,type:Z,body:null},pt=function(n){this.body=n,this.case1=new it(this),this.case2=new it(this)},pt.prototype={constructor:pt,type:nt,case1:null,case2:null}}();var vt,gt;!function(){function n(n){if(0===n.length)return null;var t=new it(n[0].parent);return t.join=n[n.length-1].join,t.body=n,t}gt=function(n,t){switch(n.type){case P:return n.body.push(t),t;case B:if(t.type===z||t.type===G)return n.next=t;case Z:return n.body=t;case W:case V:case z:case G:return n.next=t}return yt("Invalid expression")},vt=function(t){if(t.type!==P)return void(null!=t.body&&"object"==typeof t.body&&vt(t.body));for(var e,r,i,o=t.body,l=0,u=o.length;u>l;l++)vt(o[l]);for(l=1;u>l&&(e=o[l],r=o[l-1],!(rt[r.join]>rt[e.join]));l++);if(l!==u){for(i=[o[0]],l=1;u>l;l++){e=o[l],r=o[l-1];var s=rt[r.join];if(s>rt[e.join]&&u-1>l){for(var a,c,f=l;++l<u&&(a=o[l].join,null!=a)&&!(s<=rt[a]););c=o.slice(f,l+1),e=n(c),vt(e)}i.push(e)}t.body=i}}}();var mt,yt;!function(){yt=function(n,t){return K(n,e,i,t,"expr")},mt=function(n,e,r,i){var o,l,u,s,a,c=n,f=n.body;if("$c"===f){l=i;var h=c.next,d=null!=h&&h.body;if(null!=d&&null==l[d]){if(h.type===V&&"function"==typeof Bt.prototype[d])o=i,l=Bt.prototype[d],c=h;else for(;;){if(l=l.parent,null==l)break;if(null!=l[d]){o=l,l=l[d],c=h;break}}null==l&&(f="$c."+d,c=h)}}else if("$a"===f)l=i&&i.attr;else if("$u"===f)l=bt;else if("$ctx"===f)l=r;else if(null!=e&&(o=e,l=e[f]),null==l)for(;null!=i&&(o=i.scope,null!=o&&(l=o[f]),null==l);)i=i.parent;if(null==l)return(null==c||null!=c.next)&&q("<mask:expression> Accessor error:",f),null;for(;;){if(c.type===V){for(u=[],s=-1,a=c.arguments.length;++s<a;)u[s]=t(c.arguments[s],e,r,i);l=l.apply(o,u)}if(null==l||null==c.next)break;if(c=c.next,f=c.type===G?t(c.body,e,r,i):c.body,o=l,l=l[f],null==l)break}return l}}();var xt,wt,kt,Nt,Ct;!function(){xt=function(){for(var n;o>i;){if(n=e.charCodeAt(i),n>32)return n;i++}return null},wt=function(n){for(var t,r,o=!1,l=39===n?"'":'"',u=i;(t=e.indexOf(l,i))>-1&&(i=t,92===e.charCodeAt(t-1));)o=!0,i++;return r=e.substring(u,i),o===!0&&(r=r.replace(F[l],l)),r},kt=function(){for(var n,t,r=i;;){if(n=e.charCodeAt(i),46===n){if(t===!0)return yt("Invalid number",n),null;t=!0}if(!((n>=48&&57>=n||46===n)&&o>i))break;i++}return+e.substring(r,i)},Nt=function(){var n,t=i,r=e.charCodeAt(i);if(34===r||39===r)return i++,n=wt(r),i++,n;for(;;){if(i===o)break;if(r=e.charCodeAt(i),36!==r&&95!==r){if(!(r>=48&&57>=r||r>=65&&90>=r||r>=97&&122>=r))break;i++}else i++}return e.substring(t,i)},Ct=function(n){if(null==n&&i===o)return null;switch(n){case 40:return C;case 41:return E;case 123:return O;case 125:return S;case 91:return A;case 93:return _;case 44:return j;case 46:return T;case 59:return $;case 43:return s;case 45:return u;case 42:return c;case 47:return a;case 37:return f;case 61:return e.charCodeAt(++i)!==n?(yt("Assignment violation: View can only access model/controllers","="),null):e.charCodeAt(i+1)===n?(i++,g):v;case 33:return 61===e.charCodeAt(i+1)?(i++,61===e.charCodeAt(i+1)?(i++,y):m):p;case 62:return 61===e.charCodeAt(i+1)?(i++,x):b;case 60:return 61===e.charCodeAt(i+1)?(i++,k):w;case 38:return e.charCodeAt(++i)!==n?(yt("Not supported: Bitwise AND",n),null):d;case 124:return e.charCodeAt(++i)!==n?(yt("Not supported: Bitwise OR",n),null):h;case 63:return M;case 58:return D}return n>=65&&90>=n||n>=97&&122>=n||95===n||36===n?R:n>=48&&57>=n?U:34===n||39===n?L:(yt("Unexpected or unsupported directive",n),null)}}();var Et;return function(){function e(n,l,u,s){if(null==n)return null;var a,c,f=n.type;if(P===f)for(var h=n.body,d=h.length,p=-1;++p<d;)c=e(h[p],l,u,s),a=i(a,c);if(W===f||z===f||G===f){for(var v,g=n.body,m=n.next;null!=m;){if(v=m.type,V===v)return e(m,l,u,s);if(W!==v&&z!==v&&G!==v)return Q("Ast Exception: next should be a symbol/function ref"),null;var y=v===G?t(m.body,l,u,s):m.body;if("string"!=typeof y)return q("Can`t extract accessor name",g),null;g+="."+y,m=m.next}return g}switch(f){case B:case Z:case nt:c=e(n.body,l,u,s),a=i(a,c)}if(nt===f&&(c=e(r.case1,l,u,s),a=i(a,c),c=e(r.case2,l,u,s),a=i(a,c)),V===f){for(var b=n.arguments,d=b.length,p=-1;++p<d;)c=e(b[p],l,u,s),a=i(a,c);c=null;var x=n;n:for(;x=x.parent;)switch(x.type){case W:case z:case G:c=x.body+(null==c?"":"."+c);break;case P:case B:break n;default:c=null;break n}null!=c&&(a=i(a,c)),n.next&&(c=e(n.next,l,u,s),a=i(a,{accessor:o(n),ref:c}))}return a}function i(n,t){if(null==n)return t;if(null==t)return n;if(("object"!=typeof n||null==n.length)&&(n=[n]),"object"!=typeof t||null==t.length)return-1===n.indexOf(t)&&n.push(t),n;for(var e=0,r=t.length;r>e;e++)-1===n.indexOf(t[e])&&n.push(t[e]);return n}function o(n){var t=n;n:for(;t.parent;){switch(t.parent.type){case P:case B:break n}t=t.parent}return l(t,n.next)}function l(n,t){if(n===t||null==n)return null;if("object"!=typeof n)return n;if(null!=n.length&&"function"==typeof n.splice){for(var e=[],r=0,i=n.length;i>r;r++)e[r]=l(n[r],t);return e}var o={};for(var u in n)null!=n[u]&&"parent"!==u&&(o[u]=l(n[u],t));return o}Et=function(t,r,i,o){return"string"==typeof t&&(t=n(t)),e(t,r,i,o)}}(),{parse:n,eval:t,varRefs:Et,evalStatements:function(e,r,i,o){for(var l=n(e).body,u=[],s=l.length,a=-1,c=new it;++a<s;)c.body.push(l[a]),null==l[a].join&&(u.push(t(c,r,i,o)),c.body.length=0);return u}}}();!function(){function n(n){var t=this.nodes;if(null==t)return void(this.nodes=[n]);t.push(n);var e=t[t.length-2];e.nextSibling=n}function t(n,t){this.type=Nt.NODE,this.tagName=n,this.parent=t,this.attr={}}function e(n,t){this.content=n,this.parent=t}function r(n,t,e){this.tagName=n,this.parent=t,this.controller=e,this.attr={}}function i(){}var o=1,l=2,u=3,s=4,a=9,c=10,f=15;t.prototype={constructor:t,type:o,tagName:null,parent:null,attr:null,nodes:null,expression:null,appendChild:n,stringify:null,__single:null},e.prototype={type:l,content:null,parent:null},r.prototype={constructor:r,type:s,parent:null,attr:null,controller:null,nodes:null,components:null,model:null,modelRef:null},i.prototype={constructor:i,type:u,nodes:null,appendChild:n},Nt={NODE:o,TEXTNODE:l,FRAGMENT:u,COMPONENT:s,CONTROLLER:a,SET:c,STATEMENT:f,Node:t,TextNode:e,Fragment:i,Component:r}}(),function(){function n(n,t,e,r){function i(n){return Ct.eval(n,t,e,r)}if(i(n.expression))return n.nodes;for(;;){if(n=n.nextSibling,null==n||"else"!==n.tagName)break;var o=n.expression;if(null==o||""===o||i(o))return n.nodes}return null}ft["if"]={getNodes:n,render:function(t,e,r,i,o,l){var u=n(t,e,r,o);null!=u&&Mt(u,e,r,i,o,l)}}}(),function(){function n(n,e,r,i,o,l,u,s){Mt(t(r,n,e[0],e[1],e[2],e[3]),i,o,l,u,s)}function t(n,t,i,o,l,u){return"of"===l?h(t)===!1?(Q("<ForStatement> Value is not enumerable",t),null):e(n,t,i,o,u):"in"===l?"object"!=typeof t?(q("<ForStatement> Value is not an object",t),null):(h(t)&&q("<ForStatement> Consider to use `for..of` for Arrays"),r(n,t,i,o,u)):void 0}function e(n,t,e,r,o){for(var l,u=-1,s=t.length,a=new Array(s);++u<s;)l={},l[e]=t[u],r&&(l[r]=u),a[u]=i(p,n,l,u,e,o);return a}function r(n,t,e,r,o){var l,u,s,a=[],c=0;for(u in t)s=t[u],l={},l[e]=u,r&&(l[r]=s),a[c++]=i(v,n,l,u,r,o);return a}function i(n,t,e,r,i,l){return{type:Nt.COMPONENT,tagName:n,nodes:t,controller:o(n,e,r,i,l)}}function o(n,t,e,r,i){return{meta:{serializeScope:!0},compoName:n,scope:t,elements:null,propVal:r,key:e,expression:i,renderEnd:l,dispose:u,serializeScope:s}}function l(n){this.elements=n}function u(){this.elements&&(this.elements.length=0)}function s(n){var t=this,e=t.expression,r=t.key,i=t.propVal,o=n[i];return null!=o&&"object"==typeof o&&(n[i]="$ref:("+e+')."'+r+'"'),n}function a(n){g=n,y=n.length,m=0;var t,e,r,i,o;if(o=c(),40===o&&(i=!0,m++,c()),t=f(),o=c(),44===o){if(i!==!0)return d("Parenthese must be used in multiple var declarion");m++,c(),e=f()}if(i){if(o=c(),41!==o)return d("Closing parenthese expected");m++}o=c();var r;return 105===o&&110===g.charCodeAt(++m)&&(r="in"),111===o&&102===g.charCodeAt(++m)&&(r="of"),null==r?d("Invalid FOR statement. (in|of) expected"):(b[0]=t,b[1]=e,b[2]=r,b[3]=g.substring(++m),b)}function c(){for(var n;y>m;m++)if(n=g.charCodeAt(m),!(33>n))return n;return-1}function f(){for(var n,t=m;y>m;m++)if(n=g.charCodeAt(m),n>48&&57>n){if(t===m)return d("Variable name begins with a digit")}else if(!(36===n||95===n||n>=97&&122>=n||n>=65&&90>=n))break;return t===m?d("Variable declaration expected"):g.substring(t,m)}function d(n){throw new Error("<ForStatement parser> "+n+" `"+g.substring(m,20)+"`")}var p="for..of::item",v="for..in::item";ft["for"]={render:function(t,e,r,i,o,l){a(t.expression);var u=Ct.eval(b[3],e,r,o);null!=u&&n(u,b,t.nodes,e,r,i,o,l)},build:n,parseFor:a,createForNode:i,getNodes:t,getHandler:function(n,t){return o(n,t)}},function(){function n(n){function t(){}return t.prototype={meta:{serializeScope:!0},serializeScope:s,type:Nt.COMPONENT,compoName:n,renderEnd:l,dispose:u},t}dt[p]=n(p),dt[v]=n(v)}();var g,m,y,b=["prop1","prop2","in|of","expression"]}(),function(){function n(n,e){for(var r=e.length,i=new Array(r),o=n.nodes,l=n.expression,u="."===l?'."':"("+n.expression+')."',s=0;r>s;s++)i[s]=t(o,e[s],u,s);return i}function t(n,t,r,i){return{type:Nt.COMPONENT,tagName:"each::item",nodes:n,controller:e(t,i,r)}}function e(n,t,e){return{compoName:"each::item",model:n,scope:{index:t},modelRef:e+t+'"',attr:null,meta:null}}ft.each={render:function(t,e,r,i,o,l){var u=Ct.eval(t.expression,e,r,o);null!=u&&Mt(n(t,u),u,r,i,o,l)}}}(),ft["with"]={render:function(n,t,e,r,i,o){var l=Ct.eval(n.expression,t,e,i);Mt(n.nodes,l,e,r,i,o)}},function(){function n(n,e,r,i,o){if(null==e)return null;for(var l,u,s,a,c=e.length,f=-1;++f<c;)if(l=e[f],"default"!==l.tagName)if("case"===l.tagName)if(u=l.expression){if(t(u,r,i,o)==n){s=l;break}}else q("<mask:switch:case> Expression expected");else q("<mask:switch> Case expected",l.tagName);else a=l;return null==s&&(s=a),null!=s?s.nodes:null}var t=Ct.eval;ft["switch"]={render:function(e,r,i,o,l,u){var s=t(e.expression,r,i,l),a=n(s,e.nodes,r,i,l);null!=a&&Mt(a,r,i,o,l,u)},getNodes:n}}(),function(){function n(n){this.parent=n,this.compoName="include",this.components=[],this.templates=null}ft.include={render:function(t,e,r,i,o,l){for(var u,s=Ct.evalStatements(t.expression);null!=o&&(u=o.resource,null==u);)o=o.parent;var o=new n(o),a=Bt.pause(o,r);include.instance(u&&u.url).load.apply(u,s).done(function(n){o.templates=n.load,Mt(t.nodes,e,r,i,o,l),a()})}}}(),ft["import"]={render:function(n,t,e,r,i,o){var l=n.expression,u=Ct.evalStatements(l,t,e,i),s=u[0];if("string"!=typeof s)return void Q("<mask:import> Invalid argument",l);for(;;){if("include"===i.compoName)break;if(i=i.parent,null==i)break}if(null!=i){var a=i.templates[s];null!=a&&Mt(Et(a),t,e,r,i,o)}}},dt["var"]=i,i.prototype={renderStart:function(n,t){var e,r,i=this.parent,o=i.scope;null==o&&(o=i.scope={}),this.model={};for(e in this.attr)r=Ct.eval(this.attr[e],n,t,i),this.model[e]=o[e]=r;this.attr={}},onRenderStartClient:function(){var n=this.parent,t=n.scope;null==t&&(t=n.scope={});for(var e in this.model)t[e]=this.model[e]}},function(){function n(n,t){for(var e=0;e<n.length;e++)n[e].style.display=t?"":"none"}ft.visible={toggle:n,render:function(t,e,r,i,o,l){var u=[];Mt(t.nodes,e,r,i,o,u),H(l,u);var s=Ct.eval(t.expression,e,r,o);n(u,s)}}}(),function(){function n(n,t,e,r,i,o){return{type:Nt.COMPONENT,compoName:n,attr:{},nodes:t,model:e,container:i,parent:o,index:r,scope:{index:r}}}ft.repeat={render:function(t,e,r,i,o,l){var u=Ct.eval,s=t.expression,a=s.split(".."),c=+u(a[0]||"",e,r,o),f=+u(a[1]||"",e,r,o);if(c!==c||f!==f)return void Q("Repeat attribute(from..to) invalid",s);for(var h=t.nodes,d=[],p=-1;++p<f;)d[p]=n("repeat::item",h,e,p,i,o);var v=[];Mt(d,e,r,i,o,v),H(l,v)}}}();var Et,At,_t,Ot,St,jt;!function(n,t,i){function o(n){for(var t=-1;-1!==(t=n.indexOf(v,t))&&n.charCodeAt(t+1)!==b;)t++;if(-1===t)return n;for(var e,i=n.length,o=[],u=0,s=0;;){if(e=l(n,t+2,i,b,x),-1===e)break;for(o[s++]=u===t?"":n.substring(u,t),o[s++]=n.substring(t+2,e),u=t=e+1;-1!==(t=n.indexOf(v,t))&&n.charCodeAt(t+1)!==b;)t++;if(-1===t)break}return i>u&&(o[s]=n.substring(u)),n=null,function(n,t,e,i,l,u){if(null==n){for(var s,a="",c=o.length,f=-1;++f<c;)s=o[f],a+=f%2===1?v+g+s+m:s;return a}return r(o,n,t,e,i,l,u)}}var l,u,s,a,d,p,v="~",g="[",m="]",y=126,b=91,x=93;!function(){l=function(n,t,e,r,i){for(var o,l=0,s=t;e>t;t++)if(o=n.charCodeAt(t),34!==o&&39!==o)if(o!==r){if(o===i&&-1===--l)return t}else l++;else t=u(n,t+1,e,34===o?'"':"'");return X("Group was not closed",n,s),e},s=function(n,t,e){for(var r;e>t;)if(r=n.charCodeAt(t),36!==r&&95!==r){if(!(r>=48&&57>=r||r>=65&&90>=r||r>=97&&122>=r))break;t++}else t++;return t},a=function(n,t,e){for(var r;e>t;)if(r=n.charCodeAt(t),36!==r&&95!==r&&58!==r){if(!(r>=48&&57>=r||r>=65&&90>=r||r>=97&&122>=r))break;t++}else t++;return t},u=function(n,t,e,r){for(var i=t;-1!==(t=n.indexOf(r,t));){if(92!==n.charCodeAt(t-1))return t;t++}return X("Quote was not closed",n,i-1),e},d=function(n,t,e){for(;e>t;t++)if(n.charCodeAt(t)>32)return t;return t},p=function(n,t,e){for(;e>t;t++)if(n.charCodeAt(t)<33)return t;return t}}();var w;!function(){function n(n){var r=t(n);return function(n,t,i,o,l){return e(r,n,t,i,o,l)}}var t;!function(){function n(n,e,r,i,o,u){var s=++i;i=l(r,i,o,91,93);var a=t(r,s,i);i++,40!==r.charCodeAt(i)&&y("Punctuation group expected"),s=++i,i=l(r,i,o,40,41);var h=r.substring(s,i);return e.push(new c(n,a,new f(h),u)),i}function e(n,t,e,r,i){var o=++r;return r=l(e,r,i,40,41),t.push(new h(n,e.substring(o,r))),r}function d(n,t,e,r,i){var o=++r;
return r=a(e,r,i),t.push(new p(n,e.substring(o,r))),r}function m(n,e,r,i,o){var u=++i;return i=l(r,u,o,40,41),e.push(new v(t(r,u,i),n)),i}function y(n){throw Error("Lexer pattern: "+n)}t=function(l,c,h){void 0===c&&(c=0,h=l.length);var p,b,x,w=[];n:for(;h>c;c++){switch(x=c,p=l.charCodeAt(c),b=!1,63===p&&(b=!0,x=++c,p=l.charCodeAt(c)),p){case 32:w.push(new s(b,c));continue;case 34:case 39:c=u(l,c+1,h,34===p?'"':"'"),w.push(new o(t(l,x+1,c)));continue;case 36:x=++c;var k=!1;p===l.charCodeAt(c)&&(k=!0,x=++c),c=a(l,c,h);var N=l.substring(x,c);if(b===!1&&k===!1){w.push(new i(N)),c--;continue}if(p=l.charCodeAt(c),91===p){c=n(N,w,l,c,h,b);continue}if(40===p){c=e(N,w,l,c,h);continue}if(60===p){c=d(N,w,l,c,h);continue}y("Unexpected extended type");continue;case 40:if(b===!0){c=m(b,w,l,c,h);continue}case 44:case 41:case 91:case 93:case 123:case 125:w.push(new f(String.fromCharCode(p)));continue}for(;h>c;)if(p=l.charCodeAt(++c),!(p>32&&34!==p&&39!==p&&36!==p&&44!==p)){w.push(new r(l.substring(x,c))),--c;continue n}}for(var C,E=w.length,A=-1,_=E>1;_===!0&&++A<E;)C=w[A],(C instanceof v==!1||C.optional!==!0)&&(_=!1);return _===!0&&(w=[new g(w)]),w}}();var e;!function(){e=function(n,t,e,r,i,o){for(var l,u,s=e,a=n.length,c=0;a>c;c++)if(l=n[c],u=e,e=l.consume(t,e,r,i),e===u){if(l.optional===!1){if(o!==!0){var f="Token of type `"+l.name+"`";l.token&&(f+=" Did you mean: `"+l.token+"`?"),K(f,t,e)}return s}return e}return e}}();var r,i,o,s,c,f,h,p,v,g;!function(){function n(n){return new Function("obj","val","obj."+n+"= val;")}function t(n,t){var e=t.constructor;return t.name=n,t.optional=!1,t.token=null,e.prototype=t,e}s=t("Whitespace",{constructor:function(n){this.optional=n},consume:d}),r=t("Const",{constructor:function(n){this.token=n},consume:function(n,t){var e=t+this.token.length;return n=n.substring(t,e),n===this.token?e:t}}),i=t("Var",{constructor:function(t){this.token=t,this.setter=n(t)},consume:function(n,t,e,r){var i=a(n,t,e);return i===t?t:(this.setter(r,n.substring(t,i)),i)}}),h=t("ExtendedVar",{constructor:function(t,e){return this.token=e,this.setter=n(t),"*"===e?void(this.consume=this.consumeAll):void(this.rgx=new RegExp(e,"g"))},consumeAll:function(n,t,e,r){return this.setter(r,n.substring(t)),e},consume:function(n,t,e,r){this.rgx.lastIndex=t;var i=this.rgx.exec(n);if(null==i)return t;var o=i[0];return this.setter(r,o),t+o.length}}),function(){p=t("CustomVar",{constructor:function(t,r){this.fn=e[r],this.token=t,this.setter=n(t)},consume:function(n,t,e,r){for(var i,o=t;e>t&&(i=n.charCodeAt(t),36===i||95===i||58===i||(i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i)||this.fn(i)===!0);t++);return t===o?t:(this.setter(r,n.substring(o,t)),t)}});var e={accessor:function(n){return 46===n?!0:!1}}}(),o=t("String",{constructor:function(n){this.tokens=n},consume:function(n,t,e,r){var i=n.charCodeAt(t);if(34!==i&&39!==i)return t;var o=u(n,t+1,e,34===i?'"':"'");if(1!==this.tokens.length)throw Error("Not implemented");var l=this.tokens[0];return r[l.token]=n.substring(t+1,o),++o}}),c=t("Array",{constructor:function(n,t,e,r){this.token=n,this.delim=e,this.tokens=t,this.optional=r},consume:function(n,t,r,i){for(var o,l,u;;){if(o={},l=e(this.tokens,n,t,r,o,this.optional),t===l){if(null==u)return t;throw Error("Next item expected")}if(null==u&&(u=[]),u.push(o),t=l,l=this.delim.consume(n,t,r),t===l)break;t=l}return i[this.token]=u,t}}),f=t("Punc",{constructor:function(n){this.before=new s(!0),this.delim=new r(n),this.after=new s(!0),this.token=n},consume:function(n,t,e){var r=this.before.consume(n,t,e),i=this.delim.consume(n,r,e);return r===i?t:this.after.consume(n,i,e)}}),v=t("Group",{constructor:function(n,t){this.optional=t,this.tokens=n},consume:function(n,t,r,i){return e(this.tokens,n,t,r,i,this.optional)}}),g=t("OrGroup",{constructor:function(n){this.groups=n,this.length=n.length},consume:function(n,t,e,r){for(var i=t,o=0;o<this.length;o++)if(t=this.groups[o].consume(n,t,e,r),t!==i)return t;return t}})}(),w=function(t){return 1===arguments.length&&"string"==typeof t?n(t):m(Array.prototype.slice.call(arguments))};var m;!function(){function t(n,t,r,i,o,l){return"function"==typeof n?n(t,r,i,o,l):e(n,t,r,i,o,l)}function e(n,t,e,r,i,o){for(var l=e,u=n.length,s=-1;++s<u;)if(e=n[s](t,e,r,i,!0),l!==e)return e;return o!==!0&&n[0](t,l,r,i,o),l}function r(t){if("string"==typeof t)return n(t);for(var e=t.length;--e>-1;)t[e]=n(t[e]);return t}m=function(n){for(var e=n.length,i=-1;++i<e;)n[i]=r(n[i]);return function(r,o,l,u,s){var a;for(i=-1;++i<e;)if(a=o,o=t(n[i],r,o,l,u,s),o===a)return a;return o}}}()}(),function(){function t(){var n=this.attr,t="var ";for(var e in n)"var "!==t&&(t+=","),t+=e+"="+n[e];return t+";"}gt["var"]=function(e,r,i,o){var a,c,f=new n("var",o);f.stringify=t;for(var h,d=1,p=2,v=3,g=4,m=d;;)if(i>r&&(c=e.charCodeAt(r))<33)r++;else if(m!==d)if(m!==p)if(m!==v){if(m===g){if(44===c){m=d,r++;continue}break}}else{switch(a=r,r++,c){case 123:case 91:r=l(e,r,i,c,c+2);break;case 39:case 34:r=u(e,r,i,39===c?"'":'"');break;default:for(;i>r&&(c=e.charCodeAt(r),44!==c&&59!==c);)r++;r--}r++,f.attr[h]=e.substring(a,r),m=g}else{if(61!==c)return K("Assignment expected",e,r,c,"var"),[f,r];m=v,r++}else a=r,r=s(e,r,i),h=e.substring(a,r),m=p;return[f,r,0]}}(),function(){function n(n,e,i){null!=n.scoped&&(e=t(e,i)),e=r(e,i),this.content=_t(e),this.parent=i,this.attr=n}gt.style=function(t,e,r,i){var o=t.indexOf("{",e)+1,u=At(t,e,o-1),s=l(t,o,r,123,125),a=t.substring(o,s);if(null!=u.self){var c=i.attr.style;return i.attr.style=_t((c||"")+a),[null,s+1]}return[new n(u,a,i),s+1,0]},n.prototype={tagName:"style",type:Nt.COMPONENT,controller:null,elements:null,model:null,stringify:function(){return"style {"+this.getStyle()+"}"},render:function(n,t,r,i){var o=e.createElement("style");o.textContent=this.getStyle(n,t,o,i);var l,u;for(l in this.attr)u=this.attr[l],null!=u&&o.setAttribute(l,u);r.appendChild(o)},getStyle:function(n,t,e,r){return f(this.content)?0===arguments.length?this.content():this.content("node",n,t,e,r):this.content}};var t,r;!function(){function n(n){if(null==n)return q('"style" should be inside elements node'),"";var t=n.attr.id;return null==t&&(t=n.attr.id="scoped__css__"+ ++e),"#"+t}var e=0,i=/^([\s]*)([^\{\}]+)\{/gm,o=/^([\s]*):host\s*(\(([^)]+)\))?\s*\{/gm;t=function(t,e){var r;return t=t.replace(i,function(t,i,o){if(-1!==o.indexOf(":host"))return t;null==r&&(r=n(e));for(var l=o.split(","),u=l.length,s=0;u>s;s++)l[s]=r+" "+l[s];return o=l.join(","),i+o+"{"})},r=function(t,e){var r;return t=t.replace(o,function(t,i,o,l){return i+(r||(r=n(e)))+(l||"")+"{"})}}()}(),function(){gt["import"]=function(e,r,i,o){var l={exports:null,alias:null,path:null},u=n(e,r,i,l);return[new t(o,l),u,0]},dt["import:base"]=function(n,t,e,r,i){var o=rt(Ct.eval(n.expression,t,e,i));null!=o&&"/"!==o[o.length-1]&&(o+="/"),Ft.cfg("base",o)};var n=w(['from "$path"','* as $alias from "$path"','$$exports[$name?( as $alias)](,) from "$path"']),t=j({type:Nt.COMPONENT,tagName:"import",constructor:function(n,t){this.dependency=Ft.createDependency(t),this.parent=n},controller:function(n,t,r,i,o){for(var l,u=n.parent.nodes,s=[],a=[],c=u.length,f=0;c>f;f++)l=u[f],u[f]=null,"import"!==l.tagName?s.push(l):a.push(l.dependency);return new e(a,s,o)}}),e=dt.imports=j({compoName:"imports",constructor:function(n,t,e){this.deps=n,this.parent=e,this.base=Ft.resolveLocation(e),this.nodes=t},load:function(n){function t(){0===--r&&n()}for(var e=this.deps.length,r=e,i=e;--i>-1;)this.deps[i].load(this,t)},renderStart:function(n,t){var e=Bt.pause(this,t),r=this;this.load(function(){for(var n=r.nodes||[],t=r.deps,i=t.length,o=-1;++o<i;){var l=t[o].getEmbeddableNodes();null!=l&&(h(l)===!1&&(l=[l]),n=l.concat(n))}r.nodes=n,e()})},getHandler:function(){}})}(),function(){gt.define=function(e,r,i,o){var l=new t("define",o),u=n(e,r,i,l);return[l,u,k]};var n=w("$name",'?( extends $$extends[?("$path")?($$compo<accessor>)](,))',"{"),t=j(Nt.Node,{name:null,"extends":null,controller:function(n,t,r,i,o){var l=Ut.create(n,t,o);return wt(n.name,l),new e},stringify:function(n){var t=this["extends"],e="";if(t&&0!==t.length){e=" extends ";for(var r=t.length,i=-1;++i<r;)e+=t[i].compo,r-1>i&&(e+=", ")}return"define "+this.name+e+"{"+Tt(this.nodes,++n)+"}"}}),e=j({render:S})}(),function(){function n(n){return function(e,r,i,o){var u=e.indexOf("{",r)+1,s=t(e.substring(r,u-1)),a=l(e,u,i,123,125),c=e.substring(u,a);return[new n(s,c,o),a+1,0]}}function t(n){var t=/(\w+)\s*\(([^\)]*)\)/.exec(n);if(null==t)return Q("`slot` has invalid head syntax",n),null;var e=[t[1]];return e=e.concat(t[2].replace(/\s/g,"").split(","))}function r(n,t,e){this.name=n.shift(),this.args=n,this.body=t,this.parent=e,this.fn=this.compile()}r.prototype={type:Nt.COMPONENT,controller:null,elements:null,model:null,stringify:function(){return this.tagName+" "+this.name+"("+this.args.join(",")+") {"+this.body+"}"},compile:function(){var n=c.call(this.args);return n.push(this.body),new(Function.bind.apply(Function,[null].concat(n)))},render:function(){}};var i=j(r,{tagName:"slot",render:function(n,t,e,r){var i=r.slots;null==i&&(i=r.slots={}),i[this.name]=this.fn}}),o=j(r,{tagName:"event",render:function(n,t,e,r){this.fn=this.fn.bind(r),Bt.Dom.addEventListener(e,this.name,this.fn)}}),u=j(r,{tagName:"function",render:function(n,t,e,r){r[this.name]=this.fn}}),s=j(r,{tagName:"script",render:function(n,t,r,i){if(null!=this.attr.src){var o=e.createElement("script");for(var l in this.attr)o.addAttribute(l,this.attr[l]);return void r.appendChild(o)}this.fn.call(i)}});gt.slot=n(i),gt.event=n(o),gt.script=n(s),gt["function"]=n(u)}();var k=2,N=3,C=5,E=6,A=7,_=8,O=9;_t=o,jt=w,Et=function(e){for(var r,u,s,a,c,f,h,d,p=new i,v=p,g=k,m=N,w=0,S=e.length;;){for(;S>w&&(f=e.charCodeAt(w))<33;)w++;if(47===f){if(d=e.charCodeAt(w+1),47===d){for(w++;10!==f&&13!==f&&S>w;)f=e.charCodeAt(++w);continue}if(42===d){w=e.indexOf("*/",w+2)+2,1===w&&(w=S);continue}}if(m===C&&(null!=r&&(p.attr["class"]=o(r),r=null),null!=s&&(p.attr[s]=s,s=null,u=null)),null!=u){if(g===C)null==s?s=u:a=u,null!=s&&null!=a&&("class"!==s?p.attr[s]=a:r=null==r?a:r+" "+a,s=null,a=null);else if(m===N){if(null!=gt[u]){var j=gt[u](e,w,S,p),T=j[0],M=j[2];w=j[1],g=0===M?k:M,u=null,null!=T&&(p.appendChild(T),0!==M&&(p=T));continue}c=new n(u,p),p.appendChild(c),p=c,g=C}else if(m===_){if(c=new t(u,p),p.appendChild(c),p.__single===!0)do p=p.parent;while(null!=p&&null!=p.__single);g=k}u=null}if(w>=S){g===C&&(null!=r&&(p.attr["class"]=o(r)),null!=s&&(p.attr[s]=s)),f=null;break}if(g===O){for(p=p.parent;null!=p&&null!=p.__single;)p=p.parent;null==p&&(p=v,X("Unexpected tag closing",e,w-1)),g=k}switch(f){case 123:m=g,g=k,w++;continue;case 62:m=g,g=k,w++,p.__single=!0;continue;case 59:if(null!=p.nodes){w++;continue}case 125:125!==f||g!==N&&g!==C||w--,w++,m=g,g=O;continue;case 39:case 34:g===E?g=C:m=g=_,w++;var D=!1,$=!1,R=39===f?"'":'"';for(h=w;(w=e.indexOf(R,w))>-1&&92===e.charCodeAt(w-1);)D=!0,w++;-1===w&&(X("Literal has no ending",e,h-1),w=S),w===h&&(d=e.charCodeAt(w+1),(124===d||d===f)&&($=!0,h=w+2,w=e.indexOf((124===d?"|":R)+R+R,h),-1===w&&(w=S))),u=e.substring(h,w),D===!0&&(u=u.replace(F[R],R)),(g!==C||"class"!==s)&&(u=o(u)),w+=$?3:1;continue}if(g===k){if(m=N,g=N,46===f||35===f){u="div";continue}}else if(g===C)if(46===f)w++,s="class",g=A;else if(35===f)w++,s="id",g=A;else{if(61===f){w++,g=E,m===N&&null==s&&X("Unexpected tag assignment",e,w,f,g);continue}if(40===f){h=1+w,w=1+l(e,h,S,f,41),p.expression=e.substring(h,w-1),p.type=Nt.STATEMENT;continue}if(null!=s){u=s;continue}}(g===E||g===A)&&(m=g,g=C);var I=null;for(h=w;S>w;){if(f=e.charCodeAt(w),f===y&&e.charCodeAt(w+1)===b){I=!0,++w;do f=e.charCodeAt(++w);while(f!==x&&S>w)}if(m!==E&&(46===f||35===f))break;if(33>f||61===f||62===f||59===f||40===f||123===f||125===f)break;w++}if(u=e.substring(h,w),""===u){X("String expected",e,w,f,g);break}if(I===!0){if(g===N){X("Invalid interpolation (in tag name)",e,w,u,g);break}if(g===C)if("id"===s||m===E)u=o(u);else if("class"!==s){X("Invalid interpolation (in attr name)",e,w,u,g);break}}}f!==f&&X("IndexOverflow",e,w,f,g);var L=v.nodes;return null!=L&&1===L.length?L[0]:v},St=function(n){if(h(n)){for(var t=0;t<n.length;t++)St(n[t]);return n}return delete n.parent,delete n.__single,null!=n.nodes&&St(n.nodes),n},Ot=function(n,t){return n&&2===n.length?t&&1===t.length?(y=n.charCodeAt(0),b=n.charCodeAt(1),x=t.charCodeAt(0),v=n[0],g=n[1],void(m=t)):void Q("Interpolation End must be of 1 Character"):void Q("Interpolation Start must contain 2 Characters")},At=function(n,t,e){for(var r,i,o={},l=t;e>l&&(l=d(n,l,e),l!==e);){for(t=l;e>l&&(i=n.charCodeAt(l),!(61===i||33>i));l++);if(r=n.substring(t,l),l=d(n,l,e),l===e){o[r]=r;break}61===n.charCodeAt(l)?(l=t=d(n,l+1,e),i=n.charCodeAt(l),34!==i&&39!==i?(l=p(n,l,e),o[r]=n.substring(t,l)):(l=u(n,l+1,e,39===i?"'":'"'),o[r]=n.substring(t+1,l),l++)):o[r]=r}return o}}(Nt.Node,Nt.TextNode,Nt.Fragment,Nt.Component);var Tt;!function(){function n(n){for(var t="";n--;)t+=" ";return t}function t(t,r,i){var o,l;null==r&&(r=0),null==i&&(o=!0,i=[]);var u=i.length;if(t.type===Nt.FRAGMENT&&(t=t.nodes),t instanceof Array)for(l=0;l<t.length;l++)e(t[l],r,i);else e(t,r,i);var s=n(r);for(l=u;l<i.length;l++)i[l]=s+i[l];return o?i.join(0===a?"":"\n"):void 0}function e(n,e,c){if("function"==typeof n.stringify)return void c.push(n.stringify(a));if("string"==typeof n.content)return void c.push(u(n.content));if("function"==typeof n.content)return void c.push(u(n.content()));if(i(n))return void c.push(r(n)+";");if(o(n)){var f=s?">":" > ";return c.push(r(n)+f),void t(l(n),a,c)}c.push(r(n)+"{"),t(n.nodes,a,c),c.push("}")}function r(n){var t,e,r=n.tagName;null!=n.attr&&(t=n.attr.id||"",e=n.attr["class"]||""),"function"==typeof t&&(t=t()),"function"==typeof e&&(e=e()),t&&(t=-1!==t.indexOf(" ")?"":"#"+t),e&&(e="."+e.split(" ").join("."));var i="";for(var o in n.attr)if("id"!==o&&"class"!==o){var l=n.attr[o];"function"==typeof l&&(l=l()),o===l||s!==!1&&!/[^\w_$\-\.]/.test(l)||(l=u(l)),i+=" "+o,o!==l&&(i+="="+l)}"div"===r&&(t||e)&&(r="");var a="";return n.expression&&(a="("+n.expression+")"),r+t+e+i+a}function i(n){return null==n.nodes||n.nodes instanceof Array&&0===n.nodes.length}function o(n){return n.nodes&&(n.nodes instanceof Array==!1||1===n.nodes.length)}function l(n){return n.nodes instanceof Array?n.nodes[0]:n.nodes}function u(n){return-1===n.indexOf("'")?"'"+n.trim()+"'":-1===n.indexOf('"')?'"'+n.trim()+'"':'"'+n.replace(/"/g,'\\"').trim()+'"'}Tt=function(n,e){return null==n?"":("string"==typeof n&&(n=mask.parse(n)),null==e?(a=0,s=!0):"number"==typeof e?(a=e,s=0===a):(a=e&&e.indent||4,s=0===a||e&&e.minimizeAttributes),t(n))};var s,a}();var Mt,Dt,$t=0;!function(n,t,r){function i(n,t){var e=n.components;return null==e?void(n.components=[t]):void e.push(t)}var o;!function(){function t(t,r,i,o,l){null!=t.tagName&&t.tagName!==t.compoName&&(t.nodes={tagName:t.tagName,attr:t.attr,nodes:t.nodes,type:1}),null!=t.model&&(r=t.model);var u=t.nodes,s=[];if(null!=u){for(var a=u instanceof Array,c=a===!0?u.length:1,h=0,d=null,p=e.createDocumentFragment();c>h;h++)d=a===!0?u[h]:u,Mt(d,r,i,p,t,s);o.parentNode.insertBefore(p,o)}if(null==t.tagName){var v,g,m=t.handlers&&t.handlers.attr;for(g in t.attr)v=null,m&&f(m[g])&&(v=m[g]),null==v&&f(n[g])&&(v=n[g]),null!=v&&v(o,t.attr[g],r,i,s[0],t)}if(f(t.renderEnd)&&t.renderEnd(s,r,i,o.parentNode),null!=l&&l!==s)for(var y=l.length,b=s.length,x=-1;++x<b;)l[y+x]=s[x]}o=function(n,r,i,o,l){var u=e.createComment("");return o.appendChild(u),function(){return t(n,r,i,u,l)}}}();var l,u=function(){var n=function(n){return function(t,e){t.appendChild(n.createTextNode(e))}}(e);return function(t,e,r,i,o){var l=t.content;if(f(l)){var u=l("node",e,r,i,o);if("string"==typeof u)return void n(i,u);for(var s,a="",c=u.length,h=0;c>h;h++)if(s=u[h],"object"!=typeof s)a+=s;else{if(""!==a&&(n(i,a),a=""),null==s.nodeType){a+=s.toString();continue}i.appendChild(s)}return void(""!==a&&n(i,a))}n(i,l)}}();!function(){l=function(e,r,i,o,l,u){var s=e.tagName,a=e.attr,c=t(s);if(null!=c){null!=u&&(u.push(c),a["x-compo-id"]=l.ID),null!=o&&o.appendChild(c);var h,d;for(h in a)L.call(a,h)!==!1&&(f(a[h])?(d=a[h]("attr",r,i,c,l,h),d instanceof Array&&(d=d.join(""))):d=a[h],d&&(f(n[h])?n[h](e,d,r,i,c,l,o):c.setAttribute(h,d)));return c}};var t;!function(n){t=function(t){return n.createElement(t)}}(e)}();var s;!function(){function n(n,t,e,r,l,u,s){var a,c;n.ID=++$t,n.attr=a=M(n.attr,t.attr),n.parent=u,n.expression=t.expression,null==n.compoName&&(n.compoName=t.tagName),null==n.model&&(n.model=e),null==n.nodes&&(n.nodes=t.nodes);for(c in a)"function"==typeof a[c]&&(a[c]=a[c]("attr",e,r,l,u,c));return z("compoCreated",n,e,r,l),f(n.renderStart)&&n.renderStart(e,r,l),i(u,n),n.async===!0?(n.await(o(n,e,r,l,s)),null):(null!=n.tagName&&(n.nodes={tagName:n.tagName,attr:n.attr,nodes:n.nodes,type:1}),"function"==typeof n.render?(n.render(n.model,r,l),null):n)}function e(n,t,e,r,o,l,u){var s,a,c,h=n.__Ctor,d=!1;if(null!=h)c=new h(t,l);else{c=n;for(var p in t)c[p]=t[p];c.parent=l}var v=c.attr;if(null!=v)for(var p in v)"function"==typeof v[p]&&(v[p]=v[p]("attr",e,r,o,l,p));f(c.renderStart)&&c.renderStart(e,r,o,l,u),c.ID=++$t,i(l,c);var g=l.components.length-1;return f(c.render)&&(d=!0,s=c.render(e,r,o,l,u),H(u,s),f(c.renderEnd)&&(a=c.renderEnd(s,e,r,o,l),null!=a&&(l.components[g]=a))),d?null:c}function r(n,t,e,r,o,l){n.ID=++$t,i(o,n),null==n.model&&(n.model=t);var u=n.elements=[];return n.render?n.render(n.model,e,r,o,u):Mt(n.nodes,n.model,e,r,n,u),null!=l&&0!==u.length&&H(l,u),null}s=function(i,o,l,u,s,a){var c,f=i.tagName;if(null!=i.controller&&(c=i.controller),null==c&&(c=t[f]),null==c)return r(i,o,l,u,s,a);var h,d=!1;"function"==typeof c?h=new c(i,o,l,u,s):(h=c,d=!0);var p=d?e:n;return p(h,i,o,l,u,s,a)}}(),function(){Dt=j(T,{async:!1,defers:null,_id:null,_model:null})}(),Mt=function(i,o,a,c,h,d){if(null==i)return c;var p,v,g,m,y=i.type;if(null==h&&(h=new r),null==y&&(i instanceof Array?y=10:null!=i.tagName?y=1:null!=i.content&&(y=2)),1===y&&null!=t[i.tagName]&&(y=4),null==c&&1!==y&&(c=e.createDocumentFragment()),2===y)return u(i,o,a,c,h),c;if(10===y){for(g=0,m=i.length;m>g;g++)Mt(i[g],o,a,c,h,d);return c}var b=i.tagName;if("else"===b)return c;if(15===y){var x=ft[b];if(null==x){if(null==t[b])return Q("<mask: statement is undefined>",b),c;y=4}if(15===y)return x.render(i,o,a,c,h,d),c}if(1===y&&(c=l(i,o,a,c,h,d),d=null),4===y){if(h=s(i,o,a,c,h,d),null==h)return c;p=[],i=h,h.model!==o&&null!=h.model&&(o=h.model)}var w=i.nodes;if(null!=w){null!=d&&null==p&&(p=d);for(var k=w instanceof Array,N=k===!0?w.length:1,C=0,E=null;N>C;C++)E=k===!0?w[C]:w,Mt(E,o,a,c,h,p)}if(4===y){if(null==i.tagName&&"%"!==i.compoName){var A,_,v,O=i.handlers&&i.handlers.attr;for(v in i.attr)_=i.attr[v],null!=_&&(A=null,null!=O&&f(O[v])&&(A=O[v]),null==A&&null!=n[v]&&(A=n[v]),null!=A&&A(i,_,o,a,p[0],h))}f(i.renderEnd)&&i.renderEnd(p,o,a,c)}return null!=d&&null!=p&&d!==p&&H(d,p),c}}(ht,dt,Nt.Component);var Rt;!function(){function n(n,t,e){return function(){t.parentNode.insertBefore(n,t),e()}}Rt=function(){function t(){0===--b&&y&&r()}function r(){f(d.renderEnd)&&d.renderEnd(i,o),Bt.signal.emitIn(d,"domInsert")}var i,o,l,u,s,a,h=c.call(arguments);for(u=h.length,s=-1;++s<u;)a=h[s],a instanceof Node?i=a:f(a)?l=a:v(a)&&(o=a);null==i&&(i=e.body);var d=f(l)?new l:new Bt;d.ID=++$t,null==o&&(o=d.model||{});var p,g=c.call(e.getElementsByTagName("script")),m=!1,y=!1,b=0;for(u=g.length,s=-1;++s<u;)if(p=g[s],"text/mask"===p.getAttribute("type")&&"true"===p.getAttribute("data-run")){m=!0;var x=new Dt,w=Mt(Et(p.textContent),o,x,null,d);x.async!==!0?p.parentNode.insertBefore(w,p):(b++,x.done(n(w,p,t)))}return y=!0,m===!1&&q("No blocks found: <script type='text/mask' data-run='true'>...</script>"),0===b&&r(),d}}();var It;!function(){function n(n,o,l,s){if(null==n)return null;var a;if(h(n))a=t;else switch(n.type){case E:a=u;break;case C:case _:a=i;break;case A:a=e;break;case O:a=r}return void 0!==a?a(n,o,l,s):(q("Uknown type",n.type),null)}function t(t,e,r,i){for(var o,l,u=[],s=t.length,a=-1;++a<s;){if(l=t[a],l.tagName===b){if(null!=o)continue;if(l.expression&&!g(l.expression,e,r))continue;o=n(t[a].nodes,e,r,i)}else o=n(l,e,r,i);f(u,o)}return u}function e(n,e,r,i){var o=new Nt.Fragment;return o.parent=i,o.nodes=t(n.nodes,e,r,o),o}function r(t,e,r,i){if(null==t.nodes)return t;var o=new Nt.Component;return x(o,t),o.nodes=n(o.nodes,e,r,i),o}function i(t,e,r,i){var u=t.tagName;if(64!==u.charCodeAt(0))return l(t,e,r,i);var s=t.attr.id;if(u===N&&null==s)return r.nodes;if(k===u){var a,c=e[t.expression];if(null==c)return Q("No template node: @"+t.expression),null;if(h(c)===!1)return a=c,n(t.nodes,d(a.nodes,a.nodes,new m(e)),a,i);for(var p=new Nt.Fragment,y=c.length,b=-1;++b<y;)a=c[b],f(p,n(t.nodes,d(a.nodes,a.nodes,new m(e)),a,i));return p}if(w===u){var x=g(t.expression,e,r);return x?n(t.nodes,e,r,i):null}null==s&&(s=u.substring(1));var E=e.$getNode(s);if(null==E)return null;E.parent&&v(i,E.parent);var A,_=E.nodes;if(void 0!==t.attr.as){var O=t.attr.as;A={type:C,tagName:O,attr:o(t.attr,E.attr,e,r),parent:i,nodes:_},A.attr.as=null}if(null==t.nodes)return A||_;var S=n(t.nodes,d(_,_,new m(e)),E,A||i);return null!=A?(A.nodes=S,A):S}function o(n,t,e,r){if(null==n||null==t)return n||t;var i=s(n,e,r);for(var o in t)i[o]=a(t[o],e,r);return i}function l(t,e,r,i){var o=t.tagName||t.compoName;switch(o){case":template":var l=a(t.attr.id,e,r);return Pt.templates.register(l,t.nodes),null;case":import":var l=a(t.attr.id,e,r),u=Pt.templates.resolve(t,l);return n(u,e,r,i);case"define":case"function":case"var":case"import":return t}var c={type:t.type,tagName:o,attr:s(t.attr,e,r),expression:a(t.expression,e,r),controller:t.controller,parent:i};return t.nodes&&(c.nodes=n(t.nodes,e,r,c)),c}function u(n,t,e,r){return{type:n.type,content:a(n.content,t,e),parent:r}}function s(n,t,e){var r,i=I(n);for(var o in i)r=i[o],null!=r&&(i[o]=a(r,t,e));return i}function a(n,t,e){var r=-1,i=!1,o=n;if("function"==typeof n&&(i=!0,o=n()),"string"!=typeof o||-1===(r=o.indexOf("@")))return n;for(var l,u=o.substring(0,r),s=o.length,a=91===o.charCodeAt(r+1),f=-1;s>r;){if(f=r,a===!0)r=o.indexOf("]",f),-1===r&&(r=s),f+=2;else for(;s>r&&(l=o.charCodeAt(++r),36===l||95===l||46===l||l>=48&&57>=l||l>=65&&90>=l||l>=97&&122>=l););var h=o.substring(f,r),d=a?g:c,p=d(h,t,e);null!=p&&(u+=p),f=a?r+1:r,r=o.indexOf("@",r),-1===r&&(r=s),u+=o.substring(f,r)}return i?_t(u):u}function c(n,t,e){var r=n.indexOf(".");if(-1===r)return q("Merge templates. Accessing node",n),"";var i=n.substring(0,r),o=i.substring(1),l=n.substring(r+1),u=null;return null!=e&&("@attr"===i?u=e.attr:i===e.tagName&&(u=e)),null==u&&(u=t.$getNode(o)),null==u?(Q("Merge templates. Node not found",i),""):y(u,l)}function f(n,t){if(null!=t)if("function"!=typeof t.concat){if(t.type===A)return void f(n,t.nodes);if("function"==typeof n.appendChild)return void n.appendChild(t);var e=n.length;if(e>0){var r=n[e-1];r.nextSibling=t}n.push(t)}else for(var i=t.length,o=0;i>o;o++)f(n,t[o])}function d(n,t,e){if(null==t)return e;if(h(t)){for(var r=t.length,i=-1;++i<r;)d(t===n?t[i]:n,t[i],e);return e}var o=t.type;if(o===E)return e;if(o===C){var l=t.tagName;if(null!=l&&64===l.charCodeAt(0)){var u=l.substring(1),s={tagName:t.tagName,parent:p(n,t),nodes:t.nodes,attr:t.attr,expression:t.expression};if(null==e[u])e[u]=s;else{var a=e[u];h(a)?a.push(s):e[u]=[a,s]}return e}}return d(n,t.nodes,e)}function p(n,t){if(t===n)return null;for(var e,r,i=t.parent;;){if(null==i)break;if(i===n&&n.type!==C)break;var o={type:i.type,tagName:i.tagName,attr:i.attr,controller:i.controller,expression:i.expression,nodes:null,parent:null};null==r?e=r=o:(e.parent=o,e=o),i=i.parent}return r}function v(n,t){for(var e=n,r=t;null!=e&&null!=r;){r.tagName&&(e.tagName=r.tagName),r.expression&&(e.expression=r.expression);for(var i in r.attr)e.attr[i]=r.attr[i];e=e.parent,r=r.parent}}function g(n,t,e){return e&&(t.attr=e.attr),Ct.eval(n,t,null,t)}function m(n){this.scope=this,this.parent=n}It=function(t,e,r){"string"==typeof t&&(t=Et(t)),"string"==typeof e&&(e=Et(e));var i=d(e,e,new m);return n(t,i,r)};var b="@else",w="@if",k="@each",N="@placeholder",C=Nt.NODE,E=Nt.TEXTNODE,A=Nt.FRAGMENT,_=Nt.STATEMENT,O=Nt.COMPONENT;m.prototype={parent:null,attr:null,scope:null,$getNode:function(n){for(var t,e=this;null!=e;){if(t=e[n],null!=t)return t;e=e.parent}}}}();var Lt;!function(){function n(n){return n.type!==Nt.NODE?null:mt[n.tagName]}Lt=function(t,e){Ht.walkAsync(t,function(t,e){var r=n(t);return null!=r?void r(t,e):void e()},e)}}();var Ft;!function(){function n(n){return"mask"===n?s:a}function t(n){for(;null!=n;){if(n.location)return n.location;if(n.resource&&n.resource.location)return n.resource.location;n=n.parent}return r||et()}function e(n,t,e){return function(r){return r===n?t:null!=e?e(r):null}}Ft={createModule:function(e,r){var i=tt(e);return""===i&&(i="mask",e+=".mask"),ut(e)&&(e=lt(t(r),e)),e=rt(e),null!=l[e]?l[e]:l[e]=new(n(i))(e)},registerModule:function(n,t){var e;Ft.isMask(n)&&(e=new s(n),e.state=1,e._handle(t,function(){e.resolve()})),l[n]=e},createDependency:function(n){return new i(n)},isMask:function(n){var t=tt(n);return""===t||"mask"===t},cfg:function(n,t){u[n](t)},resolveLocation:t},dt.module=function(n,e,r,i,o){var l=ot(n.attr.path,t(o));Ft.registerModule(l,n.nodes)};var r,i=j({constructor:function(n){this.path=n.path,this.exports=n.exports,this.alias=n.alias,Ft.isMask(this.path)===!0&&this.eachExport(function(n,t){var e=t||n;"*"!==e&&kt(e)})},eachExport:function(n){var t=this.alias;null!=t&&n("*",t);var e=this.exports;if(null!=e)for(var r,i=e.length,o=-1;++o<i;)r=e[o],n(r.name,r.alias)},load:function(n,t){var e=this;this.module=Ft.createModule(this.path,n),this.module.load().fail(t).done(function(){e.eachExport(function(t,r){e.module.register(n,t,r)}),t(null,e)})},getEmbeddableNodes:function(){var n=this.module;return null==n||"mask"!==n.type?null:null!=this.alias||null!=this.exports?null:n.nodes||n._erroredExport()}}),o=j(T,{type:null,path:null,location:null,exports:null,state:0,constructor:function(n){this.path=n,this.location=Z(n)},load:function(){if(0===this.state){this.state=1;var n=this;this._load(this.path).fail(function(t){n.reject(n.error=t)}).done(function(t){n._preproc(t,function(t){n.exports=t,n.resolve(n)})})}return this},get:function(n,t,e){return null==this.exports?this._erroredExport():"*"===n?this.exports:this._get(n,t,e)},getHandler:S,register:null,_preproc:function(n,t){t(n)},_load:null,_get:null,_erroredExport:S}),l={},u={base:function(n){r=n}},s=j(o,{_load:st,_handle:function(n,t){this.imports=[],this.defines={},this.exports=[],this.nodes=n;var e=this.imports,r=this.exports,i=this.defines,o=n.type,l=n;o===Nt.FRAGMENT?l=n.nodes:null!=o&&(l=[n]);for(var u,s,a=l.length,c=-1;++c<a;)if(u=l[c],s=u.tagName,"define"!==s)if("import"!==s)if("module"!==s)r.push(u);else{var f=ot(u.attr.path,this.location);Ft.registerModule(f,u.nodes)}else e.push(u.dependency);else i[u.name]=Ut.create(u);a=e.length,c=-1;var h=e.length,d=function(){--h>0||t(r)};if(0===h)return void d();for(;++c<a;)this.imports[c].load(this,d)},_preproc:function(n,t){this._handle(Et(n),t)},_get:function(n,t,e){var r=this.defines[n];if(null!=r)return new Nt.Component(n,e,r);var r=Wt(this.exports).filter(n).get(0);return null==r?(Q("Export not found",n),J("Error: Export not found; "+n)):r},_erroredExport:function(n){var t=(n||"")+"; Resource: "+this.path;return this.error&&(t+="; Status: "+this.error.status),J(t)},register:function(n,t,r){var i=r||t,o={resource:{location:this.location},getHandler:this.getHandler.bind(this),nodes:this.get(t,null,n)};n.getHandler=e(i,o,n.getHandler)},type:"mask",nodes:null,modules:null,defines:null}),a=j(o,{_load:function(n){var t=U.getScript||at;return t(n)},_get:function(n){return y(this.exports||{},n)},register:function(n,t,e){var r=e||t,i=this.get(t);return null==i?void Q("Property is undefined",t):(null==n.scope&&(n.scope={}),void b(n.scope,r,i))},type:"js"})}();var Ut;!function(){function n(n){for(var t,e={template:n,meta:{template:"merge"},renderStart:function(){Bt.prototype.renderStart.apply(this,arguments),this.nodes===this.template&&(this.nodes=mask.merge(this.nodes,[],this))}},r=n.length,i=0;r>i;i++)t=n[i],"function"===t.tagName&&(e[t.name]=t.fn,t.render=null);return e}function t(n,t,e){var r=[];if(null==n)return r;for(var i,o=n.length,l=-1;++l<o;)if(i=n[l],i.compo){var u=dt[i.compo];if(null!=u){r.unshift(u);continue}var s=Ct.eval(i.compo,t,null,e);if(null!=s){r.unshift(s);continue}Q("Nor component, nor scoped data is resolved:",i.compo)}else;return r}function e(e,r,i){var o=(e.name,n(e.nodes)),l=t(e["extends"],r,i);return l.push(o),Bt.apply(null,l)}Ut={create:function(n,t,r){return e(n,t,r)}}}();var Ht;!function(){function n(n){return Nt.FRAGMENT===e(n)}function t(n){var t=n.nodes;return null==t?null:h(t)?t:n.nodes=[t]}function e(n){var t=n.type;return null!=t?t:h(n)?Nt.FRAGMENT:null!=n.tagName?Nt.NODE:null!=n.content?Nt.TEXTNODE:Nt.NODE}function r(t){if("string"==typeof t&&(t=Et(t)),n(t)===!1){var e=new Nt.Fragment;e.appendChild(t),t=e}return t}Ht={walk:function(n,t){return n=r(n),new i(n,t),n},walkAsync:function(n,t,e){n=r(n),new o(n,t,e)}};var i;!function(){function e(r,i,o,s){if(null!=r){var a,c=!0;n(r)!==!0&&(a=i(r)),void 0!==a&&(a=new l(a),a.process(new u(r,o,s)),c=a.deep);var f=t(r);if(null!=f&&c!==!1)for(var h,d=f.length,p=0;d>p;p++)h=f[p],e(h,i,r,p)}}i=function(n,t){e(n,t)}}();var o;!function(){o=function(n,t,e){this.stack=[],this.done=e,this.root=n,this.fn=t,this.process=this.process.bind(this),this.visit(this.push(n))},o.prototype={current:function(){return this.stack[this.stack.length-1]},push:function(n,t,e){var r=new u(n,t,e);return this.stack.push(r),r},pop:function(){return this.stack.pop()},getNext:function(n){var e=this.current(),r=e.node,i=t(r);if(null==r)throw Error("Node is null");if(null!=i&&n!==!1&&0!==i.length){if(null==i[0])throw logger.log(r.tagName),Error("IS NULL");return this.push(i[0],r,0)}for(var o,l;0!==this.stack.length;)if(e=this.pop(),o=e.parent,l=e.index,null!=o){if(++l<o.nodes.length)return this.push(o.nodes[l],o,l)}else this.pop();return null},process:function(n){var t=!0;void 0!==n&&(n=new l(n),n.process(this.current()),t=n.deep);var e=this.getNext(t);return null==e?void this.done(this.root):void this.visit(e)},visit:function(t){var e=t.node;return n(e)===!1?void this.fn(e,this.process):void this.process()},fn:null,done:null,stack:null}}();var l;!function(){l=function(n){for(var t in n)this[t]=n[t]},l.prototype={deep:!0,replace:null,process:function(n){return null!=this.replace?(this.deep=!1,void(n.parent.nodes[n.index]=this.replace)):void 0}}}();var u=function(n,t,e){this.node=n,this.index=e,this.parent=t}}();var Pt;!function(){Pt={render:function(t,e,r,i,o){var l=t;return"string"==typeof t&&(l=L.call(n,t)?n[t]:n[t]=Et(t)),null==r&&(r=new Dt),Mt(l,e,r,i,o)},renderAsync:function(n,t,e,r,i){null==e&&(e=new Dt);var o=mask.render(n,t,e,r,i),l=new T;return e.async===!0?e.done(function(){l.resolve(o)}):l.resolve(o),l},compile:Et,parse:Et,stringify:Tt,build:Mt,run:Rt,merge:It,optimize:Lt,registerOptimizer:function(n,t){mt[n]=t},registerHandler:wt,getHandler:function(n){return null!=n?dt[n]:dt},registerStatement:function(n,t){ft[n]=f(t)?{render:t}:t},getStatement:function(n){return null!=n?ft[n]:ft},registerAttrHandler:function(n,t,e){f(t)&&(e=t),ht[n]=e},getAttrHandler:function(n){return null!=n?ht[n]:ht},registerUtil:xt,getUtil:yt,$utils:bt,registerUtility:function(n,t){this.registerUtility=this.registerUtil,this.registerUtility(n,t)},getUtility:function(){return this.getUtility=this.getUtil,this.getUtility()},clearCache:function(t){"string"==typeof t?delete n[t]:n={}},Utils:{Expression:Ct,getProperty:function(n,t){return q("mask.getProperty is deprecated. Use `mask.obj.get`"),y(n,t)},ensureTmplFn:_t},Dom:Nt,TreeWalker:Ht,plugin:function(){},obj:{get:y,set:b,extend:x},is:{Function:f,String:p,ArrayLike:d,Array:d,Object:v},"class":{create:j,Deferred:T},parser:{ObjectLexer:jt},on:W,off:V,delegateReload:function(){},setInterpolationQuotes:Ot,setCompoIndex:function(n){$t=n
},cfg:function(){var n=arguments;if(0===n.length)return U;var t;if(2===n.length)return t=n[0],void(U[t]=n[1]);var e=n[0];if("object"==typeof e)for(t in e)U[t]=e[t]},toHtml:function(n){return $(n).outerHtml()}};var n={}}();var Bt=t.Compo=function(r){function i(){null!=s&&null!=s.fn&&(s.fn.compo=function(n){if(0===this.length)return null;var t=et.resolveCompo(this[0],!0);return null==n?t:b(t,g(n,d.CONTROLLER,"up"))},s.fn.model=function(n){var t=this.compo(n);if(null==t)return null;for(var e=t.model;null==e&&t.parent;)t=t.parent,e=t.model;return e},function(){var n=["append","prepend","before","after"];["appendMask","prependMask","beforeMask","afterMask"].forEach(function(t,e){s.fn[t]=function(t,i,o,l){if(0===this.length)return this;this.length>1,null==o&&(o=2>e?this.compo():this.parent().compo());var u=!1;null==o&&(o={},u=!0),null==o.components&&(o.components=[]);for(var s=o.components,a=s.length,c=r.render(t,i,l,null,o),f=this[n[e]](c),h=s.length;h>a;a++)rt.signal.emitIn(s[a],"domInsert");return f}})}(),function(){function n(n,t){C(t)}function t(n,t){E(t)}var e=s.fn.remove,r=s.fn.empty;s.fn.removeAndDispose=function(){return this.each(n),e.call(this)},s.fn.emptyAndDispose=function(){return this.each(t),r.call(this)}}())}function o(){}var l,u,s,a,d=r.Dom,v=r.Utils.ensureTmplFn;!function(){function e(){for(var n,t=arguments.length;--t>-1;)if(n=u(arguments[t]),null!=n)return n;return null}l=function(n){return"string"!=typeof n?n:v(n)},u=function(n){return r[n]||o[n]||i[n]};var r=n,i=n.atma||{},o=t||{};s=e("jQuery","Zepto","$"),a=e("Class")}();var g,y;!function(){function n(n){return function(e){return t(e,n)}}function t(n,e,r){if("string"!=typeof n)return!1;if(null==r&&(r=0),r=n.indexOf(e,r),-1===r)return!1;if(r>0&&n.charCodeAt(r-1)>32)return t(n,e,r+1);var i=n.length,o=e.length;return i-o>r&&n.charCodeAt(r+o)>32?t(n,e,r+1):!0}g=function(t,e,r){if(null==t&&Q("<compo>selector is undefined",e),"object"==typeof t)return t;var i,o,l;if(null==i)switch(t[0]){case"#":i="id",t=t.substring(1),o="attr";break;case".":i="class",t=n(t.substring(1)),o="attr";break;default:i=e===d.SET?"tagName":"compoName"}return l="up"===r?"parent":e===d.SET?"nodes":"components",{key:i,prop:o,selector:t,nextKey:l}},y=function(n,t,e){if(null==n)return!1;p(t)&&(null==e&&(e=d[n.compoName?"CONTROLLER":"SET"]),t=g(t,e));var r=t.prop?n[t.prop]:n;return null==r?!1:f(t.selector)?t.selector(r[t.key]):null!=t.selector.test?t.selector.test(r[t.key]):r[t.key]==t.selector}}();var b,w;!function(){b=function(n,t){if(null==n)return null;if(h(n)){for(var e,r=n.length,i=0;r>i;i++)if(e=b(n[i],t),null!=e)return e;return null}return y(n,t)?n:(n=n[t.nextKey],null==n?null:b(n,t))},w=function(n,t,e){if(null==e&&(e=[]),h(n)){for(var r=n.length,i=0;r>i;i++)w(n[i],t,e);return e}return y(n,t)&&e.push(n),n=n[t.nextKey],null==n?e:w(n,t,e)}}();var N,C,E;!function(){N=function(n,t,e,r,i){return tt.supports(t)?void tt.on(n,t,e):K.supports(t,r)?void K.attach(n,t,r,e,i):null!=s?s(n).on(t,e):null!=n.addEventListener?n.addEventListener(t,e,!1):void(n.attachEvent&&n.attachEvent("on"+t,e))},C=function(n){if(n.hasAttribute("x-compo-id")){var t=n.getAttribute("x-compo-id"),e=et.getByID(t);if(null!=e){if(null==e.$||1===e.$.length)return M(e),void $(e);var r=R.call(e.$,n);-1!==r&&D.call(e.$,r,1)}}E(n)},E=function(n){for(var t=n.firstChild;null!=t;)1===t.nodeType&&C(t),t=t.nextSibling}}();var A,T;!function(){A=function(n,t){return n.filter(t).add(n.find(t))},T=function(n,t,e,r){return null==e?n.on(t,r):(n.on(t,e,r).filter(e).on(t,r),n)}}();var M,$,I,L,F,U,H,P,B;!function(){function n(n){var t=n.template;if(null==t){if(t=n.attr.template,null==t)return null;delete n.attr.template}if("object"==typeof t)return t;if(p(t)){if(35===t.charCodeAt(0)&&/^#[\w\d_-]+$/.test(t)){var i=e.getElementById(t.substring(1));if(null==i)return q("Template not found by id:",t),null;t=i.innerHTML}return r.parse(t)}return q("Invalid template",typeof t),null}M=function(n){null!=n.dispose&&n.dispose(),et.removeCompo(n);var t=n.components;if(null!=t)for(var e=t.length;--e>-1;)M(t[e])},$=function(n){var t=n.parent;if(null!=t){var e,r=n.$,i=t.$||t.elements;if(i&&r){var o,l,u=r.length;for(e=i.length;--e>-1;)for(o=i[e],l=u;--l>-1;)if(o===r[l]){i.splice(e,1);break}}var s=t.components;if(null!=s){for(e=s.length;--e>-1;)if(s[e]===n){s.splice(e,1);break}-1===e&&q("<compo:remove> - i`m not in parents collection",n)}}},I=function(t){if(null==t.nodes)return void(t.nodes=n(t));var e=t.meta.template;if(null!=e&&"replace"!==e){var r=n(t);return"merge"===e?void(t.nodes=It(r,t.nodes,t)):"join"===e?void(t.nodes=[r,t.nodes]):void Q("Invalid meta.nodes behaviour",e)}},L=function(n,t){if(null==n.dispose)return void(n.dispose=t);var e=n.dispose;n.dispose=function(){t.call(this),e.call(this)}},F=function(n){if(n.$)return void n.$.remove();var t=n.elements;if(t)for(var e=-1,r=t.length;++e<r;)t[e].parentNode&&t[e].parentNode.removeChild(t[e]);else{var i=n.components;if(i)for(var e=-1,r=i.length;++e<r;)F(i[e])}},U=function(n,t,e){var r=rt.pause(t,e);n.then(r,function(n){H(t,n),r()})},H=function(n,t){n.nodes=r.parse('.-mask-compo-errored > "~[.]"'),n.model=t.message||String(t),n.renderEnd=S},function(){function n(n){return function(t,e){var i,o,l,u,s=t.attr;for(i in n)if(o=n[i],l=s[i],u=o(t,l,e),null!=u)return r(t,u,i,l),!1;return!0}}function t(n,t,r,l){var u=63===t.charCodeAt(0),s=u?t.substring(1):t,a=s.replace(/-(\w)/g,e),c=r;return"string"==typeof r?c=i[r]:r instanceof RegExp?c=o.regexp(r):"function"==typeof r?c=r:null==r&&(c=o.any()),null==c?void Q("Function expected for the attr. handler",t):(n[a]=null,n=null,void(l[s]=function(n,t,e){if(null==t)return u?null:Error("Expected");var r=c.call(n,t,n,e,s);return r instanceof Error?r:(n[a]=r,null)}))}function e(n,t){return t.toUpperCase()}function r(n,t,e,r){t.message=n.compoName+" - attribute `"+e+"`: "+t.message,H(n,t),Q(t.message,". Current: ",r)}P=function(e){null==e.meta&&(e.meta={attributes:null,cache:null,mode:null});var r=e.meta.attributes,i=null;if(r){var o={};for(var l in r)t(e,l,r[l],o);i=n(o)}e.meta.handleAttributes=i},B=function(n,t){var e=n.meta&&n.meta.handleAttributes;return null==e?!0:e(n,t)};var i={string:function(n){return"string"==typeof n?n:Error("String")},number:function(n){var t=Number(n);return t===t?t:Error("Number")},"boolean":function(n,t,e,r){return"boolean"==typeof n?n:n===r?!0:"true"===n||"1"===n?!0:"false"===n||"0"===n?!1:Error("Boolean")}},o={regexp:function(n){return function(t){return n.test(t)?t:Error("RegExp")}},any:function(){return function(n){return n}}}}()}();var W,V;!function(){W=function(n){var t,e,r=n.length,i=n[r-1];r>1&&z(i,c.call(n,0,r-1)),null==i&&(i={});var o=u("include");null!=o&&(i.__resource=o.url);i.attr;for(e in i.attr)i.attr[e]=l(i.attr[e]);var s=i.slots;for(e in s)"string"==typeof s[e]&&(s[e]=i[s[e]]);P(i),t=i.hasOwnProperty("constructor")?i.constructor:function(){},t=V(t,i);for(e in it)null==i[e]&&(i[e]=it[e]);return t.prototype=i,i=null,t},V=function(n,t){var e=t.compos,r=t.pipes,i=t.scope,o=t.attr;return null==e&&null==r&&null==o&&null==i?n:function(t,l,u,s,a){if(null!=n){var c=n.call(this,t,l,u,s,a);if(null!=c)return c}null!=e&&(this.compos=k(this.compos)),null!=r&&nt.addController(this),null!=o&&(this.attr=k(this.attr)),null!=i&&(this.scope=k(this.scope))}}}();var z;!function(){function n(o,l,u){if(null!=o&&null!=l){if("node"===u){var s=o.template||o.nodes,a=l.template||l.nodes;o.template=null==s||null==a?s||a:r.merge(a,s,o),null!=o.nodes&&(o.nodes=o.template)}var c,f,h,d=!1;for(var p in l)if(c=l[p],null!=c&&"constructor"!==p&&("node"!==u||"template"!==p&&"nodes"!==p))if(f=typeof c,null!=o[p]){if("node"===u){var v="renderStart"===p||"renderEnd"===p||"emitIn"===p||"emitOut"===p||"components"===p||"nodes"===p||"template"===p||"find"===p||"closest"===p||"on"===p||"remove"===p||"slotState"===p||"signalState"===p||"append"===p||"appendTo"===p;if(v===!0)continue}if("pipes"!==u)if("function"!==f){if("object"===f){switch(p){case"slots":case"pipes":case"events":case"attr":n(o[p],c,p);continue}e(o[p],c)}}else h=!1,"slots"===u||"events"===u||"pipe"===u?h=!0:"node"!==u||"onRenderStart"!==p&&"onRenderEnd"!==p||(h=!0),o[p]=i(o[p],c,h),d=!0;else n(o[p],c,"pipe")}else o[p]="object"===f?t(c):c;d===!0&&(null!=o.super&&Q("`super` property is reserved. Dismissed. Current prototype",o),o.super=null)}}/*! Circular references are not handled */
function t(n){if(null==n)return null;if("object"!=typeof n)return n;if(h(n)){for(var e=n.length,r=-1,i=new Array(e);++r<e;)i[r]=t(n[r]);return i}var o,l,u=k(n);for(o in u)l=u[o],null!=l&&"object"==typeof l&&(u[o]=t(l));return u}function e(n,t){var r,i,o;for(var o in t)r=n[o],i=t[o],null!=r?m(r)&&m(i)&&e(r,i):n[o]=i}function i(n,t,e){function r(){var n=u._fn||(u._fn=i(u._fn_chain));return n.apply(this,arguments)}if("compoInheritanceWrapper"===n.name)return n._fn_chain.push(t),n;var i=e===!0?l:o,u=r;return u._fn_chain=[n,t],u._fn=null,u}function o(n){for(var t=n.length,e=n[--t];--t>-1;)e=u(n[t],e);return e}function l(n){var t=n.length;return function(){for(var e,r,i,o=t;--o>-1;)r=n[o],null!=r&&(i=O(r,this,arguments),void 0!==i&&(e=i));return e}}function u(n,t){return function(){this.super=t;var e=O(n,this,arguments);return this.super=null,e}}function s(n){var t=n.length;return function(){for(var e,r=t;--r>-1;){var i=n[r].apply(this,arguments);null!=i&&(e=i)}return e}}z=function(t,e){for(var r,i=e.length,o=i,l=[];--o>-1;)r=e[o],"string"==typeof r&&(r=Pt.getHandler(r)),null!=r?("function"==typeof r&&(l.push(r),r=r.prototype),n(t,r,"node")):Q("Base component not defined",e[o]);o=-1,i=l.length,i>0&&(t.hasOwnProperty("constructor")&&l.unshift(t.constructor),t.constructor=s(l));var u=t.meta;null==u&&(u=t.meta={}),null==u.template&&(u.template="merge")}}(r.merge);var G;!function(){G=function(n){return null==n||"function"!=typeof n.then?!1:f(n.isBusy)?n.isBusy():f(n.state)?"pending"===n.state():(q("Class or jQuery deferred interface expected"),!1)}}();var K,X={select:function(n,t){for(var e in t){var r=t[e],i=null,o=null;if(r instanceof Array&&(o=r[0],i=r.splice(1)),"string"==typeof r&&(o=r),null==r||null==o)return Q("Unknown component child",e,t[e]),void q("Is this object shared within multiple compo classes? Define it in constructor!");var l=o.indexOf(":"),u=o.substring(0,l);u=rt.config.selectors[u],null==u?n.compos[e]=n.$[0].querySelector(o):(o=o.substring(++l).trim(),n.compos[e]=u(n,o));var s=n.compos[e];null!=i&&(null!=s.$&&(s=s.$),Y.on(n,i,s))}}},Y={on:function(n,t,e){null==e&&(e=n.$);for(var r,i=t instanceof Array,o=i?t.length:1,l=0;i?o>l:1>l;l++)if(r=i?t[l]:t,r instanceof Array)null!=J&&(r[0]=J(r[0])),e.on.apply(e,r);else for(var u in r){var s,a,c="string"==typeof r[u]?n[r[u]]:r[u],f=u.indexOf(":");-1!==f?(s=u.substring(0,f),a=u.substring(f+1).trim()):s=u,null!=J&&(s=J(s)),T(e,s,a,_(c,n))}}},J=null,Z=function(){var n=function(){if(null==e)return!1;if("createTouch"in e)return!0;try{return!!e.createEvent("TouchEvent").initTouchEvent}catch(n){return!1}}();return{touch:function(t){return n===!1?t:"click"===t?"touchend":"mousedown"===t?"touchstart":"mouseup"===t?"touchend":"mousemove"===t?"touchmove":t}}}(),nt=function(){function n(n,t){return function(e){new l(n).emit(t,e)}}function t(n,t){return null==t.pipes[n]?void Q("Controller has no pipes to be added to collection",n,t):(null==u[n]&&(u[n]=[]),void u[n].push(t))}function e(n,t){for(var e=u[n],r=e.length;--r>-1;)e[r]===t&&e.splice(r,1)}function i(){var n=this,t=n.pipes;for(var r in t)e(r,n)}function o(n){var e=n.pipes;for(var r in e)t(r,n);rt.attachDisposer(n,i.bind(n))}function l(n){return this instanceof l==!1?new l(n):(this.pipeName=n,this)}var u={};return r.registerAttrHandler("x-pipe-signal","client",function(t,e,r,i,o){for(var l,u=e.split(";"),s=u.length,a=-1;++a<s;)if(l=u[a].trim(),""!==l){var c,f,h=l.indexOf(":"),d=l.substring(0,h),p=l.substring(h+1).trim(),v=p.indexOf(".");if(-1===v)return void Q('define pipeName "click: pipeName.pipeSignal"');c=p.substring(0,v),f=p.substring(++v);var g=n(c,f);N(o,d,g)}}),l.prototype={constructor:l,emit:function(n){var t,e=u[this.pipeName],r=this.pipeName;if(null!=e){2===arguments.length&&h(arguments[1])?t=arguments[1]:arguments.length>1&&(t=c.call(arguments,1));for(var i,o,l,s,a=e.length;-1!==--a;)i=e[a],o=i.pipes[r],null!=o&&(l=o[n],f(l)&&(l.apply(i,t),s=!0))}}},l.addController=o,l.removeController=i,{addController:o,removeController:i,pipe:l}}();!function(){var n,t,r;!function(){n=function(n,t,e){n.addEventListener(t,e,!1)},t=function(n,t,e){n.removeEventListener(t,e,!1)},r=function(n){var t=n.keyCode||n.which;return t>=96&&105>=t?t-48:t}}();var i,o,l;i={backspace:8,tab:9,"return":13,enter:13,shift:16,ctrl:17,control:17,alt:18,option:18,fn:255,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,start:36,left:37,up:38,right:39,down:40,insert:45,ins:45,del:46,numlock:144,scroll:145,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,";":186,"=":187,"*":106,"+":107,"-":189,".":190,"/":191,",":188,"`":192,"[":219,"\\":220,"]":221,"'":222},o={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},l={16:"shiftKey",17:"ctrlKey",18:"altKey"};var u,s,a,c;!function(){s=function(n){return n.ctrlKey||n.altKey?!1:u(n.target)},a=function(n){return null==n.$||0===n.$.length?!1:c(n.$.get(0))},c=function(n){if(e.contains(n)===!1)return!1;if("none"===n.style.display)return!1;var t=n.disabled;return t===!0?!1:!0},u=function(t){var e=t.tagName;return"TEXTAREA"===e?!0:"INPUT"!==e?!1:-1===n.indexOf(" "+t.type+" ")};var n=" button submit checkbox file hidden image radio range reset "}();var f;!function(){function t(){e=new b,n(window,"keydown",f),n(window,"keyup",f),n(window,"focus",f.reset)}f={on:function(n,r,i){null==e&&t();var o=h.create(n,"keydown",r,i);e.attach(o)},off:function(n){e.off(n)},handleEvent:function(n){e.handle(n.type,r(n),n)},reset:function(){e.reset()}};var e}();var h;!function(){function n(n){for(var t,e,r=n.split("+"),o=r.length,l=0,u=[];o>l;l++){if(t=r[l].trim(),e=i[t],void 0===e){if(1!==t.length)throw Error("Unexpected sequence. Use `+` sign to define the sequence:"+t);e=t.toUpperCase().charCodeAt(0)}u[l]=e}return{last:u[o-1],keys:u.sort()}}h=function(n){this.set=n},h.parse=function(t){for(var e=t.split(","),r=[],i=e.length,o=0;i>o;o++)r[o]=n(e[o]);return r},h.create=function(n,t,e,r){var i=h.parse(n),o=d.create(i);return null==o&&(o=new p(i)),o.init(t,e,r),o},h.prototype={type:null,ctx:null,set:null,fn:null,init:function(n,t,e){this.type=n,this.ctx=e,this.fn=t},tryCall:null}}();var d;!function(){d=j(h,{constructor:function(n,t,e){this.key=t,this.mods=e},tryCall:function(n,t,e){if(n.type!==this.type||e!==this.key)return g;for(var r in this.mods)if(n[r]!==this.mods[r])return g;return this.fn.call(this.ctx,n),v}}),d.create=function(n){if(1!==n.length)return null;for(var t,e,r=n[0].keys,i=r.length,o={shiftKey:!1,ctrlKey:!1,altKey:!1};--i>-1;)if(l.hasOwnProperty(r[i])!==!1)o[l[r[i]]]=!0,e=!0;else{if(null!=t)return null;t=r[i]}return new d(n,t,o)}}();var p,v=1,g=2,m=3,y=4;!function(){p=j(h,{index:0,tryCall:function(n,t,e){var r=this.check_(t,e);return r===v&&(this.index=0,this.fn.call(this.ctx,n)),r},fail_:function(){return this.index=0,g},check_:function(n,t){var e=this.set[this.index],r=e.keys,i=e.last,o=n.length;if(o<r.length)return m;if(o>r.length)return this.fail_();if(i!==t)return this.fail_();for(;--o>-1;)if(r[o]!==n[o])return this.fail_();return this.index<this.set.length-1?(this.index++,y):(this.index=0,v)}})}();var b;!function(){b=function(){this.keys=[],this.combs=[]},b.prototype={keys:null,combs:null,attach:function(n){this.combs.push(n)},off:function(n){for(var t=this.combs.length,e=0;t>e;e++)if(this.combs[e].fn===n)return this.combs.splice(e,1),!0;return!1},handle:function(n,t,e){return 0===this.combs.length||this.filter_(e,t)?void 0:"keydown"===n?void(this.add_(t)&&this.emit_(n,e,t)):void("keyup"===n&&(this.emit_(n,e,t),this.remove_(t)))},handleEvent:function(n){var t=r(n),e=n.type;this.handle(e,t,n)},reset:function(){this.keys.length=0},add_:function(n){for(var t,e=this.keys.length,r=0;e>r;r++){if(t=this.keys[r],t===n)return!1;if(t>n)return this.keys.splice(r,0,n),!0}return this.keys.push(n),!0},remove_:function(n){for(var t=this.keys.length;--t>-1;)if(this.keys[t]===n)return void this.keys.splice(t,1)},emit_:function(n,t,e){for(var r,i,o=!1,l=this.combs,u=l.length,s=0;u>s;s++)r=l[s],r.type===n&&(i=r.tryCall(t,this.keys,e),(v===i||i===y)&&t.preventDefault(),(i===m||i===y)&&(o=!0))},filter_:function(n,t){return s(n,t)}}}(),K={supports:function(n,t){if(null==t)return!1;switch(n){case"press":case"keypress":case"keydown":case"keyup":case"hotkey":case"shortcut":return!0}return!1},on:function(t,e,i,o){("keypress"===e||"press"===e)&&(e="keydown");var l=h.create(i,e,o);if(l instanceof d)return void n(t,e,function(n){var t=r(n),e=l.tryCall(n,null,t);e===v&&n.preventDefault()});var u=new b;n(t,"keydown",u),n(t,"keyup",u),u.attach(l)},hotkeys:function(n,t){var e,r;for(r in t)e=t[r],f.on(r,e,n);L(n,function(){var n;for(n in t)f.off(t[n])})},attach:function(n,t,e,r,i){u(n)&&this.on(n,t,e,r);for(var o=i;o&&null==o.slots;)o=o.parent;if(null==o)return void Q("Slot-component not found:",e);var l=o.hotkeys;null==l&&(l=o.hotkeys={}),l[e]=r}}}();var tt;!function(){var t,r,i,o;!function(){o="ontouchstart"in n,t=function(n,t,e){n.addEventListener(t,e,!1)},r=function(n,t,e){n.removeEventListener(t,e,!1)},i=function(n,t){var e=new CustomEvent(t,{cancelable:!0,bubbles:!0});n.dispatchEvent(e)}}();var l;!function(){function n(n){var t=null,r=n.changedTouches;return r&&r.length&&(t=r[0]),null==t&&n.touches&&(t=n.touches[0]),null==t?n:e(n,t)}function e(n,t){var e=Object.create(MouseEvent.prototype);for(var r in n)e[r]=n[r];for(var r in o)e[r]=t[r];return new MouseEvent(i[n.type],e)}l=function(n,e,i){this.el=n,this.fn=i,this.dismiss=0,t(n,e,this),t(n,r[e],this)};var r={mousemove:"touchmove",mousedown:"touchstart",mouseup:"touchend"},i={touchmove:"mousemove",touchstart:"mousedown",touchup:"mouseup"};l.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"touchmove":case"touchend":this.dismiss++,t=n(t),this.fn(t);break;case"mousedown":case"mousemove":case"mouseup":--this.dismiss<0&&(this.dismiss=0,this.fn(t))}}};var o={clientX:1,clientY:1,pageX:1,pageY:1,screenX:1,screenY:1}}();var u;!function(){u=function(n,e){this.state=0,this.el=n,this.fn=e,this.startX=0,this.startY=0,this.tStart=0,this.tEnd=0,this.dismiss=0,t(n,"touchstart",this),t(n,"touchend",this),t(n,"click",this)};var n=300,o=10;u.prototype={handleEvent:function(n){switch(n.type){case"touchmove":this.touchmove(n);break;case"touchstart":this.touchstart(n);break;case"touchend":this.touchend(n);break;case"touchcancel":this.reset();break;case"click":this.click(n)}},touchstart:function(n){t(e.body,"touchmove",this);var r=n.touches[0];this.state=1,this.tStart=n.timeStamp,this.startX=r.clientX,this.startY=r.clientY},touchend:function(t){return this.tEnd=t.timeStamp,1===this.state?(this.dismiss++,this.tEnd-this.tStart<=n?void this.call(t):void i(this.el,"taphold")):void this.reset()},click:function(n){if(!(--this.dismiss>-1)){var t=n.timeStamp-this.tEnd;400>t||(this.dismiss=0,this.call(n))}},touchmove:function(n){var t=n.touches[0],e=t.clientX-this.startX;if(0>e&&(e*=-1),e>o)return void this.reset();var r=t.clientY-this.startY;return 0>r&&(r*=-1),r>o?void this.reset():void 0},reset:function(){this.state=0,r(e.body,"touchmove",this)},call:function(n){this.reset(),this.fn(n)}}}(),tt={supports:function(n){if(o===!1)return!1;switch(n){case"click":case"mousedown":case"mouseup":case"mousemove":return!0}return!1},on:function(n,t,e){return"click"===t?new u(n,e):new l(n,t,e)}}}();var et;!function(){et={create:function(t){var e=t.ID;return null==e?void q("Component should have an ID"):void(n[e]=t)},resolveCompo:function(t){if(null==t)return null;var e,r,i;do{if(r=t.getAttribute("x-compo-id"),null!=r&&(null==e&&(e=r),i=n[r],null!=i&&(i=rt.find(i,{key:"ID",selector:e,nextKey:"components"}),null!=i)))return i;t=t.parentNode}while(null!=t&&1===t.nodeType);return null},removeCompo:function(t){var e=t.ID;null!=e&&(n[e]=void 0)},getByID:function(t){return n[t]}};var n={}}();var rt,it;!function(){rt=function(){return this instanceof rt?void 0:W(arguments)},x(rt,{create:function(){return W(arguments)},createClass:function(){var n=W(arguments),t=n.prototype;return t.Construct=n,a(t)},initialize:function(n,t,e,i,o){function l(n){u={controller:n,type:d.COMPONENT}}if(null==n)throw Error("Undefined is not a component");null==i&&(e&&null!=e.nodeType?(i=e,e=null):t&&null!=t.nodeType&&(i=t,t=null));var u;if("string"==typeof n)if(/^[^\s]+$/.test(n)){var s=r.getHandler(n);if(null==s)throw Error("Component not found: "+n);l(s)}else l(rt({template:n}));else"function"==typeof n&&l(n);null==o&&null!=i&&(o=et.resolveCompo(i)),null==o&&(o=new rt);var a=r.render(u,t,e,null,o),c=o.components[o.components.length-1];return null!=i&&(i.appendChild(a),rt.signal.emitIn(c,"domInsert")),c},find:function(n,t){return b(n,g(t,d.CONTROLLER,"down"))},closest:function(n,t){return b(n,g(t,d.CONTROLLER,"up"))},dispose:M,ensureTemplate:I,attachDisposer:L,config:{selectors:{$:function(n,t){var e=A(n.$,t);return e},compo:function(n,t){var e=rt.find(n,t);return e}},setDOMLibrary:function(n){s!==n&&(s=n,i())},getDOMLibrary:function(){return s},eventDecorator:function(n){return"function"==typeof n?void(J=n):"string"==typeof n?(console.error("EventDecorators are not used. Touch&Mouse support is already integrated"),void(J=Z[n])):"boolean"==typeof n&&n===!1?void(J=null):void 0}},pipe:nt.pipe,resource:function(n){for(var t=n;null!=t;){if(t.resource)return t.resource;t=t.parent}return include.instance()},plugin:function(){},Dom:{addEventListener:N}}),function(){rt.pause=function(t,e){return null==e.defers&&(e.defers=[]),e.async=!0,e.defers.push(t),x(t,n),function(){rt.resume(t,e)}},rt.resume=function(n,t){n.resume&&n.resume(),n.async=!1;for(var e,r=!1,i=t.defers,o=i.length,l=-1;++l<o;)e=i[l],e!==n?r=r||null!=e:i[l]=null;r===!1&&t.resolve()};var n={async:!0,await:function(n){this.resume=n}}}(),it={type:d.CONTROLLER,__resource:null,ID:null,tagName:null,compoName:null,nodes:null,components:null,expression:null,attr:null,model:null,slots:null,pipes:null,compos:null,events:null,hotkeys:null,async:!1,await:null,meta:{mode:null,modelMode:null,attributes:null,serializeNodes:null,handleAttributes:null},onRenderStart:null,onRenderEnd:null,render:null,renderStart:function(n,t,e){if(1===arguments.length&&null!=n&&n instanceof Array==!1&&null!=n[0]){var r=arguments[0];n=r[0],t=r[1],e=r[2]}if(B(this,n)!==!1&&(I(this),f(this.onRenderStart))){var i=this.onRenderStart(n,t,e);void 0!==i&&G(i)&&U(i,this,t)}},renderEnd:function(n,t,e,r){if(1===arguments.length&&n instanceof Array==!1){var i=arguments[0];n=i[0],t=i[1],e=i[2],r=i[3]}et.create(this,n),this.$=s(n),null!=this.events&&Y.on(this,this.events),null!=this.compos&&X.select(this,this.compos),null!=this.hotkeys&&K.hotkeys(this,this.hotkeys),f(this.onRenderEnd)&&this.onRenderEnd(n,t,e,r)},appendTo:function(n){var t="string"==typeof n?e.querySelector(n):n;if(null==t)return q("Compo.appendTo: parent is undefined. Args:",arguments),this;for(var r=this.$,i=0,o=r.length;o>i;i++)t.appendChild(r[i]);return this.emitIn("domInsert"),this},append:function(n,t,e){var i;if(null==this.$){var o="string"==typeof n?r.compile(n):n;return i=e?b(this,g(e,d.CONTROLLER,"down")):this,null==i.nodes?(this.nodes=o,this):(i.nodes=[this.nodes,o],this)}var l=r.render(n,t,null,null,this);return i=e?this.$.find(e):this.$,i.append(l),this.emitIn("domInsert"),this},find:function(n){return b(this,g(n,d.CONTROLLER,"down"))},findAll:function(n){return w(this,g(n,d.CONTROLLER,"down"))},closest:function(n){return b(this,g(n,d.CONTROLLER,"up"))},on:function(){var n=c.call(arguments);return arguments.length<3?(Q("Invalid Arguments Exception @use .on(type,selector,fn)"),this):(null!=this.$&&Y.on(this,[n]),null==this.events?this.events=[n]:h(this.events)?this.events.push(n):this.events=[n,this.events],this)},remove:function(){return F(this),$(this),M(this),this.$=null,this},slotState:function(n,t){return rt.slot.toggle(this,n,t),this},signalState:function(n,t){return rt.signal.toggle(this,n,t),this},emitOut:function(n){return rt.signal.emitOut(this,n,this,arguments.length>1?c.call(arguments,1):null),this},emitIn:function(n){return rt.signal.emitIn(this,n,this,arguments.length>1?c.call(arguments,1):null),this}},rt.prototype=it}(),function(){var n,t;!function(){t=function(n,e,r,i,o){if(null==n)return!1;var l=!1,u=null!=n.slots&&n.slots[e];if("string"==typeof u&&(u=n[u]),"function"==typeof u){l=!0;var s=null!=n.slots.__disabled&&n.slots.__disabled[e];if(s!==!0){var a=null==i?u.call(n,r):u.apply(n,[r].concat(i));if(a===!1)return!0;null!=a&&"object"==typeof a&&null!=a.length&&(i=a)}}if(-1===o&&null!=n.parent)return t(n.parent,e,r,i,o)||l;if(1===o&&null!=n.components)for(var c,f=n.components,h=f.length,d=0;h>d;d++)c=t(f[d],e,r,i,o),!l&&(l=c);return l},n=function(t,e,r,i){if(null==t)return!1;var o=t.slots;if(null!=o&&null!=o[e]&&("string"==typeof o[e]&&(o[e]=t[o[e]]),"function"==typeof o[e])){if(i!==!0)return!0;if(null==o.__disabled||o.__disabled[e]!==!0)return!0}if(-1===r&&null!=t.parent)return n(t.parent,e,r);if(1===r&&null!=t.components)for(var l=0,u=t.components.length;u>l;l++)if(n(t.components[l],e,r))return!0;return!1}}();var e,i;!function(){function t(n,t,e){var r=n.slots;if(null!=r&&r.hasOwnProperty(t)!==!1){var i=r.__disabled;null==i&&(i=r.__disabled={}),i[t]=e===!1}}function r(n,e,i){t(n,e,i);var o=n.components;if(null!=o)for(var l=o.length,u=0;l>u;u++)r(o[u],e,i)}function o(n,t,e){return null==n.$?void q("Controller has no elements to toggle state"):void s().add(n.$.filter("[data-signals]")).add(n.$.find("[data-signals]")).each(function(n,r){var i=r.getAttribute("data-signals");null!=i&&-1!==i.indexOf(t)&&r[e===!0?"removeAttribute":"setAttribute"]("disabled","disabled")})}e=function(n,e,i){for(var l=n,u=n;null!=(l=l.parent);)t(l,e,i),null!=l.$&&0!==l.$.length&&(u=l);r(n,e,i),o(u,e,i)},i=function(e,r,i){t(e,r,i),(i||!n(e,r,-1,!0)&&!n(e,r,1,!0))&&o(e,r,i)}}(),function(){function e(n,t){i(n,t||n)}function i(n,t){r.registerAttrHandler("x-"+n,"client",function(n,e,r,i,l,u){o(l,u,e,t)})}function o(n,t,e,r){for(var i,o,u,s,a,c,f,h,d=e.split(";"),p="",v=d.length,g=-1;++g<v;)i=d[g].trim(),""!==i&&(a=c=f=null,o=i.indexOf(":"),-1!==o&&(a=i.substring(0,o),u=a.indexOf("("),-1!==u&&(c=a.substring(u+1,a.lastIndexOf(")")),a=a.substring(0,u)),i=i.substring(o+1).trim()),f=i,h=l(t,f),null==r?s=a:(s=r,c=a),s||Q("Signal: Eventname is not set",d[g]),h?(p+=","+f+",",N(n,s,h,c,t)):q("Slot not found:",f));if(""!==p){var m=n.getAttribute("data-signals");n.setAttribute("data-signals",m+p)}}function l(e,r){return n(e,r,-1)===!1?null:function(n){var i=arguments.length>1?c.call(arguments,1):null;t(e,r,n,i,-1)}}i("signal"),e("change"),e("click"),e("tap","click"),e("keypress"),e("keydown"),e("keyup"),e("mousedown"),e("mouseup"),e("press","keydown"),e("shortcut","keydown")}(),x(rt,{signal:{toggle:e,emitOut:function(n,e,r,i){t(n,e,r,i,-1)},emitIn:function(n,e,r,i){t(n,e,r,i,1)},enable:function(n,t){e(n,t,!0)},disable:function(n,t){e(n,t,!1)}},slot:{toggle:i,enable:function(n,t){i(n,t,!0)},disable:function(n,t){i(n,t,!1)},invoke:function(n,t,e,r){var i=n.slots;return null==i||"function"!=typeof i[t]?(Q("Slot not found",t,n),null):null==r?i[t].call(n,e):i[t].apply(n,[e].concat(r))}}})}();var ot;return function(n){function t(n,t,e){if(null==n)return e||n;for(var r=n.length,i=-1;++i<r;)t.call(e||n,n[i],i);return e||n}function e(n,t,e){if(null==n)return-1;for(var r=n.length,i=-1;++i<r;)if(t.call(e||n,n[i],i)===!0)return i;return-1}if(null!=n){rt.DomLite=ot=function(n){return this instanceof ot==!1?new ot(n):this.add(n)},null==s&&(s=ot);var r=ot.fn={constructor:ot,length:0,add:function(n){if(null==n)return this;if(h(n)===!0)return t(n,this.add,this);var e=n.nodeType;return 11===e?t(n.childNodes,this.add,this):null==e?"number"==typeof n.length?t(n,this.add,this):(q("Uknown domlite object"),this):(this[this.length++]=n,this)},on:function(){return o.call(this,l,a,arguments)},off:function(){return o.call(this,u,c,arguments)},find:function(n){return t(this,function(t){this.add(d.call(t,n))},new ot)},filter:function(n){return t(this,function(t){p(t,n)===!0&&this.add(t)},new ot)},parent:function(){var n=this[0];return new ot(n&&n.parentNode)},children:function(n){var e=t(this,function(n){this.add(n.childNodes)},new ot);return null==n?e:e.filter(n)},closest:function(n){for(var t=this[0],e=new ot;null!=t&&null!=t.parentNode;)if(t=t.parentNode,p(t,n))return e.add(t);return e},remove:function(){return t(this,function(n){n.parentNode.removeChild(n)})}};!function(){function n(n,t,e){null!=n&&null!=e&&n.insertBefore(e,t)}function e(t,e,r){var i=null!=e?e.nextSibling:null;n(t,i,r)}var i={append:function(n,t){e(n,n.lastChild,t)},prepend:function(t,e){n(t,t.firstChild,e)},after:function(n,t){e(n.parentNode,n,t)},before:function(t,e){n(t.parentNode,t,e)}};t(["append","prepend","before","after"],function(n){var e=i[n];r[n]=function(n){var r=h(n);return t(this,function(i){return r?void t(n,function(n){e(i,n)}):void e(i,n)})}})}();var o,l,u,a,c,f=n.documentElement,d=f.querySelectorAll,p=function(){var n=f.webkitMatchesSelector||f.mozMatchesSelector||f.msMatchesSelector||f.oMatchesSelector||f.matchesSelector;return function(t,e){return null==t||1!==t.nodeType?!1:n.call(t,e)}}();!function(){function n(n,e,r,i){return t(n,function(n){e.call(n,r,i,!1)})}o=function(n,e,r){var i,o=r.length;return 2===o&&(i=n),3===o&&(i=e),null!=i?t(this,function(n){i.apply(ot(n),r)}):(Q("`DomLite.on|off` - invalid arguments count"),this)},l=function(t,r){return n(this,e,t,r)},u=function(t,e){return n(this,r,t,e)},a=function(n,t,e){function r(n){var r=n.target,i=n.currentTarget;if(i!==r)for(;null!=r&&r!==i;){if(p(r,t))return void e(n);r=r.parentNode}}return(e._guards||(e._guards=[])).push(r),l.call(this,n,r)},c=function(n,e,r){return t(r._quards,function(t){u.call(this,n,t)},this)};var e=f.addEventListener,r=f.removeEventListener}(),function(){var n=null!=f.classList,i=n===!0?function(n,t){return n.classList.contains(t)}:function(n,t){return-1!==(" "+n.className+" ").indexOf(" "+t+" ")};r.hasClass=function(n){return-1!==e(this,function(t){return i(t,n)})};var o;!function(){function n(n,t){n.className+=" "+t}function t(n,t){n.className=(" "+n.className+" ").replace(" "+t+" "," ")}o={add:function(t,e){i(t,e)===!1&&n(t,e)},remove:function(n,e){i(n,e)===!0&&t(n,e)},toggle:function(e,r){var o=i(e,r)===!0?t:n;o(e,r)}}}(),t(["add","remove","toggle"],function(e){var i=n===!1?o[e]:function(n,t){var r=n.classList;r[e].call(r,t)};r[e+"Class"]=function(n){return t(this,function(t){i(t,n)})}})}(),function(){var e=function(t){var e=n.createEvent("Event");return e.initEvent(t,!0,!0),e},i=function(t,r){if(null==r)return e(t);var i=n.createEvent("CustomEvent");return i.initCustomEvent(t,!0,!0,r),i},o=function(n,t){n.dispatchEvent(t)};r.trigger=function(n,e){var r=i(n,e);return t(this,function(n){o(n,r)})}}(),function(){r.attr=function(n,e){return void 0===e?this[0]&&this[0].getAttribute(n):t(this,function(t){t.setAttribute(n,e)})},r.removeAttr=function(n){return t(this,function(t){t.removeAttribute(n)})}}(),Object.setPrototypeOf?Object.setPrototypeOf(r,Array.prototype):r.__proto__&&(r.__proto__=Array.prototype),ot.prototype=r,i()}}(n.document),i(),r.registerHandler(":slot",o),o.prototype={constructor:o,renderEnd:function(){this.slots={},this.expression=this.attr.on,this.slots[this.attr.signal]=this.handle},handle:function(){var t=this.expression;r.Utils.Expression.eval(t,this.model,n,this)}},rt}(Pt),Wt=t.jmask=Pt.jmask=function(n){function t(n){return"string"!=typeof n?n:m(n)}function r(n){return this instanceof r==!1?new r(n):null==n?this:n.type===h.SET?n:this.add(n)}var i,c,h=n.Dom,v=n.render,g=n.parse,m=n.Utils.ensureTmplFn,y=(n.Compo||Bt).signal.emitIn;!function(){i=function(n,t){if(d(n)===!1)return void t(n);for(var e=n.length,r=-1;++r<e;)t(n[r],r)},function(){function n(n,e){return n===e?(t=!0,0):1}c=function(e){if(t=!1,e.sort(n),t===!1)return e;for(var r=[],i=0,o=0,l=e.length-1;l>i;)e[i++]===e[i]&&(r[o++]=i);for(;o--;)e.splice(r[o],1);return e};var t=!1}()}();var b,w;!function(){function n(n){return function(e){return t(e,n)}}function t(n,e,r){if("string"!=typeof n)return!1;if(null==r&&(r=0),r=n.indexOf(e,r),-1===r)return!1;if(r>0&&n.charCodeAt(r-1)>32)return t(n,e,r+1);var i=n.length,o=e.length;return i-o>r&&n.charCodeAt(r+o)>32?t(n,e,r+1):!0}function e(n,t,e){for(var r,i=!1,o=!1;e>t&&(r=n.charCodeAt(t),(34===r||39===r)&&(i=!i),92===r&&(o=!o),!(46===r||35===r||91===r||93===r||62===r||33>r)||i===!0||o===!0);)t++;return t}b=function(t,u,s){if(null==t&&Q("selector is null for the type",u),"object"==typeof t)return t;var a,c,f,d,p,v,g,m,y,b,x,w=0,k=t.length;for(a="up"===s?r:u===h.SET?i:o;k>w;)p=t.charCodeAt(w),33>p?w++:62!==p?(v=e(t,w+1,k),46===p?(c="class",f=l,d=n(t.substring(w+1,v))):35===p?(c="id",f=l,d=t.substring(w+1,v)):91===p?(b=t.indexOf("=",w),f=l,c=t.substring(w+1,b),p=t.charCodeAt(b+1),x=34===p||39===p?2:1,d=t.substring(b+x,v-x+1),v++):(null!=g&&(g.next={type:"any",matcher:null},y=g,g=null),f=null,c=u===h.SET?"tagName":"compoName",d=t.substring(w,v)),w=v,null!=g?(null==g.filters&&(g.filters=[]),g.filters.push({key:c,selector:d,prop:f})):(g={key:c,prop:f,selector:d,nextKey:a,filters:null},null==m&&(m=g),null!=y&&(y.next.matcher=g))):(null==g?m=g={selector:"__scope__",nextKey:a,filters:null,next:{type:"children",matcher:null}}:g.next={type:"children",matcher:null},y=g,g=null,w++);return y&&y.next&&(y.next.matcher=g),m},w=function(n,t,e){if("string"==typeof t&&(null==e&&(e=h[n.compoName?"CONTROLLER":"SET"]),t=b(t,e)),"*"===t.selector)return!0;var r=t.prop?n[t.prop]:n,i=!1;if(null==r)return!1;if("function"==typeof t.selector?i=t.selector(r[t.key]):null!=t.selector.test?t.selector.test(r[t.key])&&(i=!0):r[t.key]===t.selector&&(i=!0),i===!0&&null!=t.filters)for(var o,l=0,u=t.filters.length;u>l;l++)if(o=t.filters[l],w(n,o,e)===!1)return!1;return i};var r="parent",i="nodes",o="components",l="attr"}();var N,E,A,_,O;!function(){N=function(n,t){if(null==t)return n;var e=[];return i(n,function(n){w(n,t)&&e.push(n)}),e},E=function(n,t,e,r){return null==n?e:(null==e&&(e=[]),null==r&&("__scope__"===t.selector?(r=!1,t=t.next.matcher):r=!0),i(n,function(n){if(w(n,t)===!1)return void(null==t.next&&r!==!1&&E(n[t.nextKey],t,e,r));if(null==t.next)return e.push(n),void(r===!0&&E(n[t.nextKey],t,e,r));var i=t.next;r="children"!==i.type,E(n[t.nextKey],i.matcher,e,r)}),e)},A=function(n,t){var e={type:1,tagName:1,compoName:1,controller:1},r={parent:t};for(var i in n)1===e[i]&&(r[i]=n[i]);null!=n.attr&&(r.attr=k(n.attr));var o=n.nodes;if(null!=o&&o.length>0)if(d(o)===!1)r.nodes=[A(o,r)];else{r.nodes=[];for(var l=o.length,u=0;l>u;u++)r.nodes[u]=A(o[u],r)}return r},_=function(n){for(var t,e=n;null!=e;)t=e,e=e.nodes&&e.nodes[0];return t},O=function(n,t,e,r){if(h.TEXTNODE===n.type)return f(n.content)?n.content("node",t,e,null,r):n.content;var i="";if(null!=n.nodes)for(var o,l=0,u=n.nodes.length;u>l;l++)o=n.nodes[l],i+=O(o,t,e,r);return i}}();var S=r.prototype={constructor:r,type:h.SET,length:0,components:null,add:function(n){var t,e;if("string"==typeof n&&(n=g(n)),d(n)){for(t=0,e=n.length;e>t;t++)this.add(n[t]);return this}"function"==typeof n&&null!=n.prototype.type&&(n={controller:n,type:h.COMPONENT});var r=n.type;if(!r)return console.error("Only Mask Node/Component/NodeText/Fragment can be added to jmask set",n),this;if(r===h.FRAGMENT){var i=n.nodes;for(t=0,e=i.length;e>t;)this[this.length++]=i[t++];return this}if(r===h.CONTROLLER){if(null!=n.nodes&&n.nodes.length)for(t=n.nodes.length;0!==t;)n.nodes[--t].parent=n;null!=n.$&&(this.type=h.CONTROLLER)}return this[this.length++]=n,this},toArray:function(){return Array.prototype.slice.call(this)},render:function(n,t,r,i){if(this.components=[],1===this.length)return v(this[0],n,t,r,i||this);null==r&&(r=e.createDocumentFragment());for(var o=0,l=this.length;l>o;o++)v(this[o],n,t,r,i||this);return r},prevObject:null,end:function(){return this.prevObject||this},pushStack:function(n){var t;return t=r(n),t.prevObject=this,t},controllers:function(){return null==this.components&&console.warn("Set was not rendered"),this.pushStack(this.components||[])},mask:function(t){var e;if(null!=t)return this.empty().append(t);if(arguments.length)return this;if(0===this.length)e=new h.Node;else if(1===this.length)e=this[0];else{e=new h.Fragment,e.nodes=[];for(var r=-1;++r<this.length;)e.nodes[r]=this[r]}return n.stringify(e)},text:function(n,t,e){if("string"==typeof n&&1===arguments.length){for(var r,i=[new h.TextNode(n)],o=0,l=this.length;l>o;o++)r=this[o],r.nodes=i;return this}for(var r,u="",o=0,l=this.length;l>o;o++)r=this[o],u+=O(r,n,t,e);return u}};return C(["append","prepend"],function(n){r.prototype[n]=function(t){for(var e,i,o=r(t),l=0,u=this.length;u>l;l++){i=this[l],e=o.toArray();for(var s=0,a=e.length;a>s;s++)e[s].parent=i;i.nodes=null!=i.nodes?"append"===n?i.nodes.concat(e):e.concat(i.nodes):e}return this}}),C(["appendTo"],function(n){r.prototype[n]=function(n,t,e,i){return null==i&&(i=this),null!=n.nodeType&&"function"==typeof n.appendChild?(n.appendChild(this.render(t,e,null,i)),y(i,"domInsert"),this):(r(n).append(this),this)}}),function(){function n(n,t,e){n[t]=e}function e(n){var t={};return n.split(";").forEach(function(n){if(""!==n){var e=n.indexOf(":"),r=n.substring(0,e).trim(),i=n.substring(e+1).trim();t[r]=i}}),t}function r(n){var t,e="";for(t in n)e+=t+":"+n[t]+";";return e}function i(n,t){return n+":"+t+";"}S.removeAttr=S.removeProp=function(n){return o(this,function(t){t.attr[n]=null})},S.attr=S.prop=function(n,e){function r(n,e,r){n.attr[e]=t(r)}function i(n,t){for(var e in t)r(n,e,t[e])}if(1===arguments.length)return this.length>0?this[0].attr[n]:null;var l=p(n)?r:i;return o(this,function(t){l(t,n,e)})},S.tag=function(n){return 0===arguments.length?this[0]&&this[0].tagName:o(this,function(t){t.tagName=n})},S.css=function(t,l){if(arguments.length<=1&&"string"==typeof t){if(null==this.length)return null;var u=this[0].attr.style;if(null==u)return null;var s=e(u);return null==t?s:s[t]}if(null==t)return this;var a="object"==typeof t?r:i,c="object"==typeof t?x:n;return o(this,function(n){var i=n.attr.style;if(null==i)return void(n.attr.style=a(t,l));var o=e(i);c(o,t,l),n.attr.style=r(o)})}}(),function(){function n(n){var t=n.attr["class"];return"string"==typeof t?t:""}function t(t,e){return-1!==(" "+n(t)+" ").indexOf(" "+e+" ")}function e(t,e){t.attr["class"]=(n(t)+" "+e).trim()}function r(t,e){t.attr["class"]=(" "+n(t)+" ").replace(" "+e+" ","").trim()}S.hasClass=function(n){return a(this,function(e){return t(e,n)})};var i={add:function(n,r){t(n,r)===!1&&e(n,r)},remove:function(n,e){t(n,e)===!0&&r(n,e)},toggle:function(n,i){var o=t(n,i)===!0?r:e;o(n,i)}};C(["add","remove","toggle"],function(n){var t=i[n];S[n+"Class"]=function(n){return o(this,function(e){t(e,n)})}})}(),x(r.prototype,{clone:function(){return r(u(this,A))},wrap:function(n){var t=r(n);if(0===t.length)return q("Not valid wrapper",n),this;var e=u(this,function(n){var e=t.clone()[0];if(_(e).nodes=[n],null!=n.parent){var r=s(n.parent.nodes,n);-1!==r&&n.parent.nodes.splice(r,1,e)}return e});return r(e)},wrapAll:function(n){var t=r(n);return 0===t.length?(Q("Not valid wrapper",n),this):(this.parent().mask(t),_(t[0]).nodes=this.toArray(),this.pushStack(t))}}),C(["empty","remove"],function(n){r.prototype[n]=function(){return o(this,t[n])};var t={remove:function(n){null!=n.parent&&l(n.parent.nodes,n)},empty:function(n){n.nodes=null}}}),x(r.prototype,{each:function(n,t){for(var e=0;e<this.length;e++)n.call(t||this,this[e],e);return this},eq:function(n){return-1===n?this.slice(n):this.slice(n,n+1)},get:function(n){return 0>n?this[this.length-n]:this[n]},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments))}}),C(["filter","children","closest","parent","find","first","last"],function(n){r.prototype[n]=function(t){var e,i,o=[],l=null==t?null:b(t,this.type,"closest"===n?"up":"down");switch(n){case"filter":return r(N(this,l));case"children":for(e=0;e<this.length;e++)i=this[e],null!=i.nodes&&(o=o.concat(null==l?i.nodes:N(i.nodes,l)));break;case"parent":for(e=0;e<this.length;e++)i=this[e].parent,!i||i.type===h.FRAGMENT||l&&w(i,l)||o.push(i);
c(o);break;case"closest":case"find":if(null==l)break;for(e=0;e<this.length;e++)E(this[e][l.nextKey],l,o);break;case"first":case"last":var u;for(e=0;e<this.length;e++)if(u="first"===n?e:this.length-e-1,i=this[u],null==l||w(i,l)){o[0]=i;break}}return this.pushStack(o)}}),r}(Pt);return function(t,r){function i(n){return n.parentNode.removeChild(n)}function o(n){if(null!=n)for(var t=n.length,e=-1;++e<t;)i(n[e])}function l(n,t){return t.parentNode.insertBefore(n,t.nextSibling)}function u(n,t){return t.parentNode.insertBefore(n,t)}function s(){}function a(){}function f(){}function d(n,t){if(null==t&&(t=[]),null==n.components)return t;for(var e,r=n.components,i=0,o=r.length;o>i;i++)e=r[i],"validate"!==e.compoName?d(e):t.push(e);return t}var p,v,g,m,w,k,E,O,S=!1,j="undefined"!=typeof r?r:t.Compo||n.Compo,T=j.Dom.addEventListener,M=t.registerHandler,D=t.registerAttrHandler,$=t.registerUtil,R=j.config.getDOMLibrary();!function(){function n(n,t){for(var e,r=-1,i=t.length-1;++r<i;)e=t[r],null==n[e]&&(n[e]={}),n=n[e];return n}function t(n){return null==n||"object"!=typeof n?null:"number"==typeof n.length&&"function"==typeof n.slice?_.Array:"function"==typeof n.toUTCString?_.Date:null}function e(e,i,l,u){var s=u.length,c=s>1?n(e,u):e,f=u[s-1],d=c[f];if(s>1&&r(e,u),"length"===f){var p=t(c);if(null!=p)return a(c,p,function(){for(var n=l.length,t=-1;++t<n;)l[t].apply(null,arguments)}),d}return C(c,f,{get:function(){return d},set:function(n){if(n!==d){var r=d;d=n;var u=0,s=l.length,c=t(n);if(null!=c)for(;s>u;u++)a(n,c,l[u]);if(null!=e[h][x])return void(e[h][x][i]=1);for(u=0;s>u;u++)l[u](n);o(e,i,r)}},configurable:!0,enumerable:!0}),d}function r(n,t){for(var e,r=l(n),o="",u=t.length-1,s=0;u>s;s++)e=t[s],o+=e+".",i(o,n,e,r),n=n[e]}function i(n,t,e,r){var i,o=t[e];C(t,e,{get:function(){return o},set:function(t){t!==o&&(i=o,o=t,r(n,i))},configurable:!0,enumerable:!0})}function o(n,t,e){var r=n[h];if(null!=r)for(var i in r)if(0===i.indexOf(t+".")){var o,l,u=r[i].slice(0),s=u.length,a=0;if(0!==s){var c=y(n,i);for(a=0;s>a;a++)l=u[a],g(n,i,l),null!=e&&"object"==typeof e&&(o=i.substring(t.length+1),g(e,o,l));for(a=0;s>a;a++)u[a](c);for(a=0;s>a;a++)p(n,i,u[a])}}}function l(n){return function(t,e){u(n,t,e)}}function u(n,t,e){var r=n[h];if(null!=r)for(var i in r)if(0===i.indexOf(t)){var o=r[i].slice(0),l=o.length,u=0;if(0!==l){var s,a,c=y(n,i);for(u=0;l>u;u++)s=o[u],g(n,i,s),null!=e&&"object"==typeof e&&(a=i.substring(t.length),g(e,a,s));for(u=0;l>u;u++)o[u](c);for(u=0;l>u;u++)p(n,i,o[u])}}}function s(n,t,e){var r=k(n,t);return A(r,e)===!1&&r.push(e),r}p=function(n,r,i){for(var o=r.split("."),l=o.length,u=-1,c=n;++u<l&&(c=c[o[u]],null!=c);)if(null!=c[h]){var f=o.slice(u+1).join(".");if(null!=c[h][f]){s(c,f,i);var d=s(n,r,i);if(1===d.length){var p=o.splice(0,u);0!==p.length&&e(n,r,d,p,!0)}return}}var d=s(n,r,i);1===d.length&&e(n,r,d,o,!0);var v=y(n,r),g=t(v);null!=g&&a(v,g,i)},v=function(n,t,e){for(var r=t.split("."),i=r.length,o=-1,l=n;++o<i&&(l=l[r[o]],null!=l);)if(null!=l[h]){if(v(l,r.slice(o).join("."),e))return!0;break}var u=n[h];return null==u||null==u[t]?!1:A(u[t],e)},g=function(n,e,r){for(var i=e.split("."),o=i.length,l=-1,u=n;++l<o&&(u=u[i[l]],null!=u);)if(null!=u[h]){g(u,i.slice(l).join("."),r);break}var s=k(n,e),a=y(n,e);void 0===r?s.length=0:N(s,r);var c=t(a);null!=c&&f(a,c,r)},m=function(n){var t=n[h];null!=t&&(t[x]={})},w=function(n){var t=n[h],e=null==t?null:t[x];if(null!=e){t[x]=null;var r,i,o,l,u;for(r in e)if(i=n[h][r],l=null==i?0:i.length,0!==l)for(u=-1,o=r===d?n:y(n,r);++u<l;)i[u](o)}},k=function(n,t){var e=n[h];if(null==e&&(e={__dirty:null,__dfrTimeout:null,__mutators:null},C(n,"__observers",{value:e,enumerable:!1})),null==t)return e;var r=e[t];return null==r?e[t]=[]:r},E=function(n,e){var r=t(n);null!=r&&a(n,r,e)},O=function(n,t){f(n,null,t)};var a,f,h="__observers",d="__mutators",b="__dfrTimeout",x="__dirty",C=Object.defineProperty,_={Array:{throttle:!1,methods:["push","unshift","splice","pop","shift","reverse","sort","remove"]},Date:{throttle:!0,methods:["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds"]}};!function(){function n(n,r,i,o){var l=o===!0?e:t;return function(){return l(n,r,i,c.call(arguments))}}function t(n,t,e,i){var o=k(n,d),l=t.apply(n,i);return r(n,o,e,i,l),l}function e(n,t,e,i){var o=k(n,d),l=t.apply(n,i),u=n[h];return null!=u[b]?l:(u[b]=setTimeout(function(){u[b]=null,r(n,o,e,i,l)}),l)}function r(n,t,e,r,i){if(0!==t.length){var o=n[h];if(null!=o[x])return void(o[x][d]=1);for(var l,u=t.length,s=-1;++s<u;)l=t[s],"function"==typeof l&&l(n,e,r,i)}}a=function(t,e,r){var i=e.methods,o=e.throttle,l=k(t,d);if(0===l.length)for(var u,s,a=i.length,c=-1;++c<a;)u=i[c],s=t[u],null!=s&&(t[u]=n(t,s,u,o));l[l.length++]=r},f=function(n,t,e){var r=k(n,d);return void 0===e?void(r.length=0):void N(r,e)}}()}();var I;!function(){I=function(n){return null==n||""===n?null:("string"==typeof n&&(n=new Date(n)),isNaN(n)===!1&&"function"==typeof n.getFullYear?n:null)}}();var L,F,U,H,P;!function(){L=function(n,t,e,r){if(null==n.components)return l(e,r||n.placeholder);var i,o=n.components,s=null,a=!0,c=o.length,f=t-1;if(null==s)for(;++f<c;)if(i=o[f].elements,i&&i.length){s=i[0];break}if(null==s)for(a=!1,f=c>t?t:c;--f>-1;)if(i=o[f].elements,i&&i.length){s=i[i.length-1];break}return null==s&&(s=r||n.placeholder),a?u(e,s):l(e,s)},F=function(n,e,r,i,o){return t.render(e,r,i,o,n)},U=function(n,t){if(null==n)return!1;null!=n.elements&&(o(n.elements),n.elements=null),j.dispose(n);var e=t&&t.components||n.parent&&n.parent.components;return null==e?(Q("Parent Components Collection is undefined"),!1):N(e,n)},H=function(n){j.signal.emitIn(n,"domInsert")},P=function(n,t){if("function"==typeof n.dispose){var e=n.dispose;return void(n.dispose=function(){t.call(this),e.call(this)})}n.dispose=t}}();var B,W,V,z,G,K,X,Y;!function(){function n(n,t,o,l,u){if(null!=l){if("object"==typeof l){var s=W(l.accessor,t,null,o);return null==s||"object"!=typeof s?void console.error("Binding failed to an object over accessor",l.ref):void n(s,l.ref,u)}var a=l,c=a.split("."),f=c.length;if(f>1){var h=c[0];if("$c"===h)return o=r(o,c.slice(1),f-1),void n(o,a.substring(3),u);if("$a"===h||"$ctx"===h)return}var s=null;i(t,c,f)&&(s=t),null==s&&(s=e(o,c,f)),null==s&&(s=t),n(s,a,u)}}function e(n,t,e){for(var r;null!=n;){if(r=n.scope,null!=r&&i(r,t,e))return r;n=n.parent}return null}function r(n,t,e){for(;null!=n;){if(i(n,t,e))return n;n=n.parent}return n}function i(n,t,e){if(null==n)return!1;for(var r=0;e>r;r++)if(n=n[t[r]],null==n)return!1;return!0}var o=t.Utils.Expression;W=o.eval,X=o.parse,Y=o.varRefs,B=function(n,t,e,r){if("."===n)return t;var i=W(n,t,e,r);return null==i?"":i},V=function(t,e,r,i,o){if("."===t)return void E(e,o);var l=X(t),u=Y(l,e,r,i);if(null!=u){if("string"==typeof u)return void n(p,e,i,u,o);for(var s,a=null!=u.length&&"function"==typeof u.splice,c=a===!0?u.length:1,f=0;c>f;f++)s=a===!0?u[f]:u,n(p,e,i,s,o)}},z=function(t,e,r,i){if("function"==typeof r&&q("[mask.binding] - expression unbind(expr, model, controller, callback)"),"."===t)return void O(e,i);var o,l=Y(t,e,null,r);if(null!=l){if("string"==typeof l)return void n(g,e,r,l,i);for(var o,u=null!=l.length&&"function"==typeof l.splice,s=u===!0?l.length:1,a=0;s>a;a++)o=u===!0?l[a]:l,n(g,e,r,o,i)}},G=function(n,t,e,r,i){var o=0;return function(){if(++o>1)return o=0,void q("<mask:bind:expression> Concurent binder detected",n);var l=B(n,t,e,r);if(arguments.length>1){var u=c.call(arguments);u[0]=l,i.apply(this,u)}else i(l);o--}},K=function(n){var t=0;return function(){return++t>1?(t=0,void q("<listener:expression> concurent binder")):(n(),void t--)}}}();var J,Z;!function(){J=function(n,t,e){for(var r,i,o,l,u=n.split(";"),s=[],a=0,c=u.length;c>a;a++)r=u[a].split(":"),1===r.length||2===r.length?(o=2===r.length?r[0]:e,i=r[2===r.length?1:0],l=Z(i.trim(),o,t),null!=l&&s.push(l)):Q('Too much ":" in a signal def.',u[a]);return s},Z=function(n,t,e){if(e!==!0)return{signal:n,type:t};var r=n.indexOf(".");return-1===r?(Q("No pipe name in a signal",n),null):{signal:n.substring(r+1),pipe:n.substring(0,r),type:t}}}();var nt;!function(){function n(n,t,e){return null==n||"function"!=typeof n[t]?(Q("BindingProvider.",e,"should be a function. Property:",t),!1):!0}function t(n,t){var e=n.ctr.parent;if(null!=e[t])return e;var r=n.model;return null!=r[t]?r:(Q("BindingProvider. Accessor `",t,"`should be a function"),null)}function e(n){var t=n.getFullYear(),e=n.getMonth()+1,r=n.getDate();return t+"-"+(10>e?"0":"")+e+"-"+(10>r?"0":"")+r}function r(n){var t=n.getHours(),e=n.getMinutes();return t+":"+(10>e?"0":"")+e}var i={get:function(n,e){var r=n.objGetter;if(null==r)return B(e,n.model,n.ctx,n.ctr);var i=t(n,r);return null==i?null:i[r](e,n.model,n.ctr.parent)},set:function(n,e,r,i){var o=i.objSetter;if(null==o)return void b(n,e,r);var l=t(i,o);null!=l&&l[o](e,r,i.model,i.ctr.parent)}},o={get:function(t){var e=t.domGetter;if(null==e)return y(t,t.property);var r=t.ctr.parent;return n(r,e,"Getter")===!1?null:r[e](t.element)},set:function(t,e){var r=t.domSetter;if(null==r)return void b(t,t.property,e);var i=t.ctr.parent;n(i,r,"Setter")!==!1&&i[r](e,t.element)}},l={domSet:function(n){return function(t,e){var r=I(e);t.element.value=null==r?"":n(r)}},objSet:function(n){return function(t,e,r){var i=I(r);if(null!=i){var o=I(y(t,e));return null==o?void b(t,e,i):void n(o,i)}}}};nt={objectWay:i,domWay:o,SELECT:{get:function(n){var t=n.element,e=t.selectedIndex;if(-1===e)return"";var r=t.options[e],i=r.getAttribute("value");return null==i?r.getAttribute("name"):i},set:function(n,t){var e,r,i,o=n.element,l=o.options,u=l.length;for(i=0;u>i;i++)if(e=l[i],r=e.getAttribute("value"),null==r&&(r=e.getAttribute("name")),r==t)return void(o.selectedIndex=i);q("Value is not an option",t)}},DATE:{domWay:{get:o.get,set:function(n,t){var r=I(t);n.element.value=null==r?"":e(r)}},objectWay:{get:i.get,set:l.objSet(function(n,t){n.setFullYear(t.getFullYear()),n.setMonth(t.getMonth()),n.setDate(t.getDate())})}},TIME:{domWay:{get:o.get,set:l.domSet(r)},objectWay:{get:i.get,set:l.objSet(function(n,t){n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds())})}}}}();var tt={};t.registerBinding=function(n,t){tt[n]=t};var et;!function(){function n(n){var t=n.expression,e=n.model,r=n.objectChanged=n.objectChanged.bind(n);if(n.binder=G(t,e,n.ctx,n.ctr,r),V(t,e,n.ctx,n.ctr,n.binder),"dual"===n.bindingType){var i=n.ctr.attr;if(!i["change-slot"]&&!i["change-pipe-event"]){var o=n.element,l=i["change-event"]||i.changeEvent||"change",u=n.domChanged.bind(n);T(o,l,u)}if(!n.objectWay.get(n,n.expression))return setTimeout(function(){n.domWay.get(n)&&n.domChanged()}),n}return n.objectChanged(),n}function e(n,t,r){if(null!=n){var i=n.slots;(null==i||"function"!=typeof i[t]||i[t].apply(n,r)!==!1)&&e(n.parent,t,r)}}t.BindingProvider=et=function(n,t,e,r){null==r&&(r=":bind"===e.compoName?"single":"dual");var i,o=e.attr;if(this.node=e,this.ctr=e,this.ctx=null,this.model=n,this.element=t,this.value=o.value,this.property=o.property,this.domSetter=o.setter||o["dom-setter"],this.domGetter=o.getter||o["dom-getter"],this.objSetter=o["obj-setter"],this.objGetter=o["obj-getter"],this["typeof"]=o["typeof"]||null,this.dismiss=0,this.bindingType=r,this.log=!1,this.signal_domChanged=null,this.signal_objectChanged=null,this.locked=!1,null==this.property&&null==this.domGetter)switch(t.tagName){case"INPUT":if(i=t.getAttribute("type"),"checkbox"===i){this.property="element.checked";break}if("date"===i){var l=nt.DATE;this.domWay=l.domWay,this.objectWay=l.objectWay}"number"===i&&(this["typeof"]="Number"),this.property="element.value";break;case"TEXTAREA":this.property="element.value";break;case"SELECT":this.domWay=nt.SELECT;break;default:this.property="element.innerHTML"}if(o.log&&(this.log=!0,"log"!==o.log&&(this.logExpression=o.log)),o["x-signal"]){var u=J(o["x-signal"],null,"dom")[0],s=u&&u.type;switch(s){case"dom":case"object":this["signal_"+s+"Changed"]=u.signal;break;default:Q("Signal typs is not supported",u)}}if(o["x-pipe-signal"]){var u=J(o["x-pipe-signal"],!0,"dom")[0],s=u&&u.type;switch(s){case"dom":case"object":this["pipe_"+s+"Changed"]=u;break;default:Q("Pipe type is not supported")}}if(o["dom-slot"]){this.slots={};var a=e.parent,c=a.parent;a.parent=this,this.parent=c,this.slots[o["dom-slot"]]=function(n,t){this.domChanged(n,t)}}var f=o["object-pipe-slot"]||o["x-pipe-slot"];if(f){var h=f,d=h.indexOf("."),p=h.substring(0,d),u=h.substring(d+1);this.pipes={},this.pipes[p]={},this.pipes[p][u]=function(){this.objectChanged()},j.pipe.addController(this)}if(o.expression){if(this.expression=o.expression,null==this.value&&"single"!==r){var v=Y(this.expression);"string"==typeof v?this.value=v:q("Please set value attribute in DualBind Control.")}}else this.expression=this.value},et.create=function(n,t,e,r){var i,o=e.attr.bindingProvider,l=null==o?null:tt[o];return"function"==typeof l?new l(n,t,e,r):(i=new et(n,t,e,r),null!=l&&x(i,l),i)},et.bind=function(t){return n(t)},et.prototype={constructor:et,dispose:function(){z(this.expression,this.model,this.ctr,this.binder)},objectChanged:function(n){if(!(this.dismiss-->0)){if(this.locked===!0)return void q("Concurance change detected",this);if(this.locked=!0,null==n&&(n=this.objectWay.get(this,this.expression)),this.domWay.set(this,n),this.log&&console.log("[BindingProvider] objectChanged -",n),this.signal_objectChanged&&e(this.ctr,this.signal_objectChanged,[n]),this.pipe_objectChanged){var t=this.pipe_objectChanged;j.pipe(t.pipe).emit(t.signal)}this.locked=!1}},domChanged:function(n,t){if(this.locked===!0)return void q("Concurance change detected",this);this.locked=!0,null==t&&(t=this.domWay.get(this));var r=this["typeof"];if(null!=r){var i=window[r];t=i(t)}var o=!0,l=this.ctr.validations;if(l)for(var u,s=l.length,a=-1;++a<s;)if(u=l[a],u.validate(t,this.element,this.objectChanged.bind(this))===!1){o=!1;break}if(o&&(this.dismiss=1,this.objectWay.set(this.model,this.value,t,this),this.dismiss=0,this.log&&console.log("[BindingProvider] domChanged -",t),this.signal_domChanged&&e(this.ctr,this.signal_domChanged,[t]),this.pipe_domChanged)){var c=this.pipe_domChanged;j.pipe(c.pipe).emit(c.signal)}this.locked=!1},objectWay:nt.objectWay,domWay:nt.domWay},x(et,{addObserver:p,removeObserver:g})}(),M(":visible",s),s.prototype={constructor:s,refresh:function(n,t){t.style.display=B(this.attr.check,n)?"":"none"},renderStart:function(n,t,e){this.refresh(n,e),this.attr.bind&&p(n,this.attr.bind,this.refresh.bind(this,n,e))}},function(){function n(){}M(":bind",n),n.prototype={constructor:n,renderEnd:function(n,t,e,r){this.provider=et.create(t,r,this,"single"),et.bind(this.provider)},dispose:function(){this.provider&&"function"==typeof this.provider.dispose&&this.provider.dispose()}}}(),M(":dualbind",a),a.prototype={constructor:a,renderEnd:function(n,e,r,i){if(this.provider=et.create(e,i,this),this.components)for(var o,l=0,u=this.components.length;u>l;l++)o=this.components[l],":validate"===o.compoName&&(this.validations||(this.validations=[])).push(o);if(!this.attr["no-validation"]&&!this.validations){var s=e.Validate,a=this.provider.value;if(null==s&&-1!==a.indexOf(".")){for(var c=a.split("."),l=0,f=c.length,h=e[c[0]];null==s&&++l<f&&h;)s=h.Validate,h=h[c[l]];a=c.slice(l).join(".")}var d=s&&s[a];"function"==typeof d&&(d=t.getHandler(":validate").createCustom(i,d),(this.validations||(this.validations=[])).push(d))}et.bind(this.provider)},dispose:function(){this.provider&&"function"==typeof this.provider.dispose&&this.provider.dispose()},handlers:{attr:{"x-signal":function(){}}}},function(){function n(){}function e(n,t){this.fn=n,this.message=t}function i(n,t,e){q("Validate Notification:",n,t);var r=R(n).next("."+l);return 0===r.length&&(r=R("<div>").addClass(l).html("<span></span><button>cancel</button>").insertAfter(n)),r.children("button").off().on("click",function(){r.hide(),e&&e()}).end().children("span").text(t).end().show()}function o(n){return R(n).next("."+l).hide()}var l="-validate-invalid";t.registerValidator=function(n,t){u[n]=t},M(":validate",n),n.prototype={constructor:n,attr:{},renderStart:function(t,r,i){if(this.element=i,this.attr.value){var o=n.resolveFromModel(t,this.attr.value);o&&(this.validators=[new e(o)])}},validate:function(n,t,e){null==t&&(t=this.element),this.attr&&(null==n&&this.attr.getter&&(n=y({node:this,element:t},this.attr.getter)),null==n&&this.attr.value&&(n=y(this.model,this.attr.value))),null==this.validators&&this.initValidators();for(var r,i=0,o=this.validators.length;o>i;i++)if(r=this.validators[i].validate(n),r&&!this.attr.silent)return this.notifyInvalid(t,r,e),!1;return this.makeValid(t),!0},notifyInvalid:function(n,t,e){return i(n,t,e)},makeValid:function(n){return o(n)},initValidators:function(){this.validators=[];for(var n in this.attr){switch(n){case"message":case"value":case"getter":continue}if(n in u!=!1){var t=u[n];this.validators.push(new e(t(this.attr[n],this),this.attr.message))}else Q("Unknown Validator:",n,this)}}},n.resolveFromModel=function(n,t){return y(n.Validate,t)},n.createCustom=function(t,r){var i=new n;return i.element=t,i.validators=[new e(r)],i},e.prototype.validate=function(n){var t=this.fn(n);return t===!1?this.message||"Invalid - "+n:t},M(":validate:message",r({template:"div."+l+' { span > "~[bind:message]" button > "~[cancel]" }',onRenderStart:function(n){"string"==typeof n&&(n={message:n}),n.cancel||(n.cancel="cancel"),this.model=n},compos:{button:"$: button"},show:function(n,t){var e=this;this.model.message=n,this.compos.button.off().on(function(){e.hide(),t&&t()}),this.$.show()},hide:function(){this.$.hide()}}));var u={match:function(n){return function(t){return new RegExp(n).test(t)}},unmatch:function(n){return function(t){return!new RegExp(n).test(t)}},minLength:function(n){return function(t){return t.length>=parseInt(n,10)}},maxLength:function(n){return function(t){return t.length<=parseInt(n,10)}},check:function(n,t){return function(e){return B("x"+n,t.model,{x:e},t)}}}}(),M(":validate:group",f),f.prototype={constructor:f,validate:function(){for(var n,t=d(this),e=0,r=t.length;r>e;e++)if(n=t[e],!n.validate())return!1;return!0}},function(){function n(n,t,e){return n?null==t||""===t?n+" "+e:n.replace(t,e):e}function t(n){return function(t){n.textContent=t}}function r(t,e,r){return function(i){var o=t.getAttribute(e),l=n(o,r,i);t.setAttribute(e,l),r=i}}function i(t,e,r){return function(i){switch(typeof t[e]){case"boolean":return void(r=t[e]=!!i);case"number":return void(r=t[e]=Number(i));case"string":return void(r=t[e]=n(t[e],r,i));default:return void q("Unsupported elements property type",e)}}}function o(n,e,o,l,u){if("node"===n)return t(o);if("attr"===n){switch(u){case"value":case"disabled":case"checked":case"selected":case"selectedIndex":return i(o,u,l)}return r(o,u,l)}throw Error("Unexpected binder type: "+n)}function l(n,t,e,r,i,l,u,s){var a=o(s,t,i,n,u),c=G(t,e,r,l,a);V(t,e,r,l,c),P(l,function(){z(t,e,l,c)})}$("bind",{mode:"partial",current:null,element:null,nodeRenderStart:function(n,t,r,i,o){var l=B(n,t,r,o);return this.element=e.createTextNode(l),this.current=l},node:function(n,t,e,r,i){return l(this.current,n,t,e,this.element,i,null,"node"),this.element},attrRenderStart:function(n,t,e,r,i){return this.current=B(n,t,e,i)},attr:function(n,t,e,r,i,o){return l(this.current,n,t,e,r,i,o,"attr"),this.current}})}(),D("xx-visible",function(n,t,e,r,i,o){var l=G(t,e,r,o,function(n){i.style.display=n?"":"none"});V(t,e,r,o,l),P(o,function(){z(t,e,o,l)}),B(t,e,r,o)||(i.style.display="none")}),D("x-toggle","client",function(n,t,e,r,i,o){var l=t.substring(0,t.indexOf(":")),u=t.substring(l.length+1),s=Y(u);"string"!=typeof s&&(s=s[0]),T(i,l,function(){var n=B(u,e,r,o);b(e,s,n)})}),D("x-class-toggle","client",function(n,t,e,r,i){var o=t.substring(0,t.indexOf(":")),l=t.substring(o.length+1).trim();T(i,o,function(){R(i).toggleClass(l)})}),function(){var n,i,l,s,a,f=t.getStatement();!function(){n=function(n,t,e,r,i){return f[n].getNodes(t,e,r,i)},i=function(n,t,e,r,i){if(null==n)return null;var o=[];return Mt(n,t,e,r,i,o),o},l=function(n,t){n.placeholder=e.createComment(""),t.appendChild(n.placeholder)},s=function(n,t,e,r,i,o){n.parent=o,n.model=e,n.refresh=_(n.refresh,n),n.binder=G(n.expr||n.expression,e,r,o,n.refresh),V(n.expr||n.expression,e,r,o,n.binder)},a=function(n,t){if(null!=n)for(var e,r="function"==typeof n.splice,i=r?n.length:1,o=-1;++o<i;)e=r?n[o]:n,e.style.display=t?"":"none"}}(),function(){function r(){}function o(n,t,e,r,i,o,l,u){for(n.model=i,n.ctx=o,n.controller=u,n.refresh=_(n.refresh,n),n.binder=K(n.refresh),n.index=e,n.Switch=[{node:t,elements:null}],V(t.expression,i,o,u,n.binder);;){if(t=t.nextSibling,null==t||"else"!==t.tagName)break;n.Switch.push({node:t,elements:null}),t.expression&&V(t.expression,i,o,u,n.binder)}null!=e&&(n.Switch[e].elements=r)}t.registerHandler("+if",{meta:{serializeNodes:!0},render:function(t,e,r,o,l){for(var u=this,s=n("if",u,t,e,o),a=0,c=u;;){if(c.nodes===s)break;if(a++,c=u.nextSibling,null==c||"else"!==c.tagName){a=null;break}}return this.attr["switch-index"]=a,i(s,t,e,r,o,l)},renderEnd:function(n,t,i,l,u){var s=new r,a=this.attr["switch-index"];return s.placeholder=e.createComment(""),l.appendChild(s.placeholder),o(s,this,a,n,t,i,l,u),s},serializeNodes:function(n){for(var e=[n];;){if(n=n.nextSibling,null==n||"else"!==n.tagName)break;e.push(n)}return t.stringify(e)}}),r.prototype={compoName:"+if",ctx:null,model:null,controller:null,index:null,Switch:null,binder:null,refresh:function(){for(var n,e=this,r=e.Switch,i=r.length,o=-1,l=e.index,s=e.model,f=e.ctx,h=e.controller;++o<i&&(n=r[o].node.expression,null!=n)&&!B(n,s,f,h););if(l!==o){if(null!=l&&a(r[l].elements,!1),o===i)return void(e.index=null);this.index=o;var d=r[o];if(null!=d.elements)return void a(d.elements,!0);var p=t.render(d.node.nodes,s,f,null,h),v=p.nodeType===Node.DOCUMENT_FRAGMENT_NODE?c.call(p.childNodes):p;u(p,e.placeholder),d.elements=v}},dispose:function(){for(var n,t,e=this.Switch,r=e.length,i=-1;++i<r;)n=e[i],t=n.node.expression,t&&z(t,this.model,this.controller,this.binder),n.node=null,n.elements=null;this.controller=null,this.model=null,this.ctx=null}}}(),function(){function n(){}function e(n,t,e,r,i){if(o=h.getNodes(n,t,e,r,i),s=null,null!=o){for(var l=t.length,u=-1;++u<l&&t[u].nodes!==o;);s=u===l?null:u}}function r(n,t,e,r,i,o,l,u){n.ctx=o,n.expr=t.expression,n.model=i,n.controller=u,n.index=e,n.nodes=t.nodes,n.refresh=_(n.refresh,n),n.binder=G(n.expr,i,o,u,n.refresh),n.Switch=new Array(t.nodes.length),null!=e&&(n.Switch[e]=r),V(t.expression,i,o,u,n.binder)}var o,s,h=f["switch"],d="switch-index";t.registerHandler("+switch",{meta:{serializeNodes:!0},serializeNodes:function(n){return t.stringify(n)},render:function(n,t,r,l,u){var a=B(this.expression,n,t,l);return e(a,this.nodes,n,t,l),null==o?null:(this.attr[d]=s,i(o,n,t,r,l,u))},renderEnd:function(t,e,i,o,u){var s=new n,a=this.attr[d];return l(s,o),r(s,this,a,t,e,i,o,u),s}}),n.prototype={compoName:"+switch",ctx:null,model:null,controller:null,index:null,nodes:null,Switch:null,binder:null,refresh:function(n){var r=this,i=r.Switch,l=(i.length,r.index),f=r.model,h=r.ctx,d=r.controller;if(e(n,r.nodes,f,h,d),s!==l){if(null!=l&&a(i[l],!1),null==s)return void(r.index=null);this.index=s;var p=i[s];if(null!=p)return void a(p,!0);var v=t.render(o,f,h,null,d),g=v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?c.call(v.childNodes):v;u(v,r.placeholder),i[s]=g}},dispose:function(){z(this.expr,this.model,this.controller,this.binder),this.controller=null,this.model=null,this.ctx=null;var n,t,e,r,i=this.Switch;for(n in i)if(t=i[n],null!=t)for(r=t.length,e=-1;++e<r;)null!=t[e].parentNode&&t[e].parentNode.removeChild(t[e])}}}(),function(){function n(n){this.expr=n.expression,this.nodes=n.nodes}function i(n,t,e,r,i){var o=[];return Mt(n,t,e,r,i,o),o}f["with"];t.registerHandler("+with",{meta:{serializeNodes:!0},rootModel:null,render:function(n,t,e,r){var o=this.expression,l=this.nodes,u=W(o,n,t,r);return this.rootModel=n,i(l,u,t,e,r)},onRenderStartClient:function(n,t){this.rootModel=n,this.model=W(this.expression,n,t,this)},renderEnd:function(t,e,r,i,o){e=this.rootModel||e;var u=new n(this);return u.elements=t,u.model=e,u.parent=o,u.refresh=_(u.refresh,u),u.binder=G(u.expr,e,r,o,u.refresh),V(u.expr,e,r,o,u.binder),l(u,i),u}}),n.prototype={compoName:"+with",elements:null,binder:null,model:null,parent:null,refresh:function(n){if(o(this.elements),this.components){for(var t=this.components.length,l=-1;++l<t;)r.dispose(this.components[l]);this.components.length=0}var s=e.createDocumentFragment();this.elements=i(this.nodes,n,null,s,this),u(s,this.placeholder),H(this)},dispose:function(){z(this.expr,this.model,this.parent,this.binder),this.parent=null,this.model=null,this.ctx=null}}}(),function(){function n(n){this.expr=n.expression,this.nodes=n.nodes}function e(n,t,e,r,i){var o=[];return Mt(n,t,e,r,i,o),o}var r=f.visible;t.registerHandler("+visible",{meta:{serializeNodes:!0},render:function(n,t,r,i){return e(this.nodes,n,t,r,i)},renderEnd:function(t,e,r,i,o){var l=new n(this);return l.elements=t,l.model=e,l.parent=o,l.refresh=_(l.refresh,l),l.binder=G(l.expr,e,r,o,l.refresh),V(l.expr,e,r,o,l.binder),l.refresh(),l}}),n.prototype={compoName:"+visible",elements:null,binder:null,model:null,parent:null,refresh:function(){var n=B(this.expr,this.model,this.ctx,this);r.toggle(this.elements,n)},dispose:function(){z(this.expr,this.model,this.parent,this.binder),this.parent=null,this.model=null,this.ctx=null}}}(),function(){function n(n){for(var t,e=n.length,r=-1;++r<e;)switch(t=n[r],typeof t){case"string":case"number":case"boolean":n[r]=Object(t)}}function r(n,t){for(var r=n.node.components,i=0,o=r.length,l=0,s=null,a=null,c=null,f=e.createDocumentFragment(),h=[];o>i;i++)if(c=r[i],null!=c.elements&&0!==c.elements.length)for(l=0,s=c.elements.length;s>l;l++)a=c.elements[l],a.parentNode.removeChild(a);n:for(l=0,s=t.length;s>l;l++){for(i=0;o>i;i++)if(t[l]===n._getModel(r[i])){h[l]=r[i];continue n}console.warn("No Model Found for",t[l])}for(i=0,o=h.length;o>i;i++)if(c=h[i],null!=c.elements&&0!==c.elements.length)for(l=0,s=c.elements.length;s>l;l++)a=c.elements[l],f.appendChild(a);n.components=n.node.components=h,u(f,n.placeholder)}function i(n,t,e,r,i){var o=n.node,l=o.components;null==l&&(l=o.components=[]);var u=(n.prop1,n.prop2,n.type,n.ctx),s=n.node;if(null!=t&&null!=e){var a=t,c=t+e;for(c>l.length&&(c=l.length);c>a;a++)U(l[a],o)&&(a--,c--)}if(null!=r&&i&&i.length){var f,a=l.length,h=n._build(o,i,u,s),d=l.splice(a);for(L(o,r,h,n.placeholder),l.splice.apply(l,[r,0].concat(d)),a=0,f=d.length;f>a;a++)j.signal.emitIn(d[a],"domInsert")}}function o(n,t){for(var e,r=n.components,i=r.length;--i>-1;)e=r[i],-1!==t.indexOf(e.model)&&U(e,n.node)}var l={model:null,parent:null,refresh:function(t,e,l,s){var a,c=0,f=this.node,h=(this.model,this.ctx),d=this.node;if(null==e){var p=f.components;if(null!=p){for(var a=p.length,c=-1;++c<a;)U(p[c],f)&&(c--,a--);p.length=0}var v=this._build(f,t,h,d);return u(v,this.placeholder),void C(f.components,H)}var g=t;switch(n(t),e){case"push":i(this,null,null,g.length-1,g.slice(g.length-1));break;case"pop":i(this,g.length,1);break;case"unshift":i(this,null,null,0,g.slice(0,1));break;case"shift":i(this,0,1);break;case"splice":var m=l[0],y=1===l.length?this.components.length:l[1],b=l.length>2?g.slice(l[0],l.length-2+l[0]):null;i(this,m,y,m,b);break;case"sort":case"reverse":r(this,g);break;case"remove":null!=s&&s.length&&o(this,s)}},dispose:function(){z(this.expr||this.expression,this.model,this.parent,this.binder)}};!function(){function r(n,t){this.prop1=t[o],this.prop2=t[u],this.type=t[a],this.expr=t[c],null==n.components&&(n.components=[]),this.node=n,this.components=n.components}var i=f["for"],o="for-prop-1",u="for-prop-2",a="for-type",c="for-expr";t.registerHandler("+for",{meta:{serializeNodes:!0},serializeNodes:function(n){return t.stringify(n)},render:function(t,e,r,l,s){var f=i.parseFor(this.expression),d=this.attr;d[o]=f[0],d[u]=f[1],d[a]=f[2],d[c]=f[3];var p=W(f[3],t,e,l);null!=p&&(h(p)&&n(p),i.build(p,f,this.nodes,t,e,r,this,s))},renderEnd:function(n,t,i,o,l){var u=new r(this,this.attr);return u.placeholder=e.createComment(""),o.appendChild(u.placeholder),s(u,this,t,i,o,l),u},getHandler:function(n,t){return i.getHandler(n,t)}}),r.prototype={compoName:"+for",model:null,parent:null,refresh:l.refresh,dispose:l.dispose,_getModel:function(n){return n.scope[this.prop1]},_build:function(n,t,e,r){var o=i.getNodes(n.nodes,t,this.prop1,this.prop2,this.type);return Mt(o,this.model,e,null,r)}}}(),function(){function r(n,t,e,r,o,l){for(var u,s=t.length,a=(new Array(s),0);s>a;a++)u=i(n,a),Mt(u,t[a],e,r,o,l)}function i(n,t){var e=new o;return e.scope={index:t},{type:Nt.COMPONENT,tagName:"each::item",nodes:n,controller:function(){return e}}}function o(){}function u(n){this.expression=n.expression,this.nodes=n.nodes,null==n.components&&(n.components=[]),this.node=n,this.components=n.components}f.each;t.registerHandler("+each",{meta:{serializeNodes:!0},serializeNodes:function(n){return t.stringify(n)},render:function(t,e,i,o,l){var u=B(this.expression,t,e,o);null!=u&&(n(u),r(this.nodes,u,e,i,this,l))},renderEnd:function(n,t,r,i,o){var l=new u(this,this.attr);return l.placeholder=e.createComment(""),i.appendChild(l.placeholder),s(l,this,t,r,i,o),l}}),t.registerHandler("each::item",o),o.prototype={compoName:"each::item",scope:null,model:null,modelRef:null,parent:null,renderStart:S===!0?function(){var n=this.parent.expression;this.modelRef=""+("."===n?"":"("+n+")")+'."'+this.scope.index+'"'}:null,renderEnd:function(n){this.elements=n},dispose:function(){null!=this.elements&&(this.elements.length=0,this.elements=null)}},u.prototype={compoName:"+each",refresh:l.refresh,dispose:l.dispose,_getModel:function(n){return n.model},_build:function(n,t,i,o){var l=e.createDocumentFragment();return r(n.nodes,t,i,l,o),l}}}()}()}()}(Pt,Bt),function(){Pt.registerHandler(":html",{$meta:{mode:"server:all"},render:function(n,t,r){if(this.html=Wt(this.nodes).text(n,t,this),r.insertAdjacentHTML)return void r.insertAdjacentHTML("beforeend",this.html);if(r.ownerDocument){var i,o=e.createElement("div"),l=e.createDocumentFragment();for(o.innerHTML=this.html,i=o.firstChild;null!=i;)l.appendChild(i),i=i.nextSibling}},toHtml:function(){return this.html||""},html:null})}(),function(n){function t(n){this.name=n.name,this["extends"]=n["extends"]}function e(){for(var t,e=this.nodes,r={renderStart:function(){this.nodes=n.merge(e,this.nodes||[],this),null!=this.onRenderStart&&this.onRenderStart.apply(this,arguments)}},i=e.length,o=0;i>o;o++)t=e[o],"function"===t.tagName&&(r[t.name]=t.fn,t.render=null);n.registerHandler(this.name,Bt(r))}dt.define=t,t.prototype={name:null,"extends":null,$meta:{serializeNodes:!0},render:e,onRenderStartClient:e}}(Pt),function(){var n={},t={get:function(t){return n[t]},resolve:function(t,e){var r=n[e];if(null!=r)return r;for(var i=":template[id="+e+"]",o=t.parent,l=null;null!=o;){if(l=Wt(o.nodes).filter(i).get(0),null!=l)return l.nodes;o=o.parent}return q("Template was not found",e),null},register:function(t,e){return null==t?void q("`:template` must be define via id attr."):void(n[t]=e)}};Pt.templates=t,Pt.registerHandler(":template",{render:function(){t.register(this.attr.id,this.nodes)}}),Pt.registerHandler(":import",{renderStart:function(){var n=this.attr.id;return null==n?void Q("`:import` shoud reference the template via id attr"):void(this.nodes=t.resolve(this,n))}})}(),function(){ft.log={render:function(n,t,e,r,i){var o=Ct.evalStatements(n.expression,t,e,i);o.unshift("Mask::Log"),console.log.apply(console,o)}},wt("debugger",{render:function(){}}),wt(":utest",Bt({render:function(n,t,e){e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(e=e.childNodes),this.$=$(e)}}))}(),Pt.Compo=Bt,Pt.jmask=Wt,Pt.version="0.12.6",t.mask=Pt});
//# sourceMappingURL=mask.min.js.map