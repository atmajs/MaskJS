UTest({
	
	'minify' () {
		process('min');
	},
	
	'beautify' () {
		process('format', 2);
	}
	
})

function process(filename, indent) {
	var M = Mask
	
	io
		.File
		.read(`test/tmpl/stringify.${filename}.mask`)
		.split(/^===$/gm)
		.map(function(test){
			
			return test
				.split(/^---$/gm)
				.map(x => x.trim());
		})
		.forEach(function(parts){
			if (parts.length < 2) 
				return;
			
			var [ mask, expect ] = parts;
			var str = M.stringify(mask, indent);
			eq_(str.length, expect.length);
			eq_(str, expect);
		});
}