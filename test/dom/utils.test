UTest({
    
    'parsed-arguments' () {                
        mask.registerUtil('test', {
            arguments: 'parsed',
            process: function(foo, str, bar){
                return foo + str + bar;
            }
        });
        
        var tmpl = ` div > "~[test: foo, 'test', bar.bar]" `;
        var model = { foo: 2, bar: { bar: 3 } };
        var dom = mask.render(tmpl, model);        
        eq_($(dom).text(), '2test3');
        
        
        is_(mask._.test, 'Function');
        eq_(mask._.test(2, 'test', 8), '2test8');
        
        
        var tmpl = ` div > "~[: 'foo' + _.test(a,2,3) ]" `;
        var model = { a : 10 };
        var dom = mask.render(tmpl, model);        
        eq_($(dom).text(), 'foo15');
    }
    
})

// vim: set ft=js: