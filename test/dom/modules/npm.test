// use default module loader
mask.config('modules', 'default');

UTest({
	'should load default file in node_modules' () {
		return mask
				.renderAsync(`
					import Foo from '/test/tmpl/npm/foo.mask';
					
					Foo;
				`)
				.then(dom => {
					return UTest.domtest(dom, `
						find ('h4') > text ('EmptyPackage');
					`);
				});
	},
	'should fail loading' () {
		mask.on('error', assert.await((error) => {
			eq_(error.status, 404);
		}));
		return mask
				.renderAsync(`
					import Any from '/test/tmpl/npm/foo-none.mask';					
					Any;
				`)
				.always(() => mask.off('error'));
	}
});

// vim: set ft=js: