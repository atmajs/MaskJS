/*!
 * MaskJS v0.10.1
 * Part of the Atma.js Project
 * http://atmajs.com/
 *
 * MIT license
 * http://opensource.org/licenses/MIT
 *
 * (c) 2012, 2014 Atma.js and other contributors
 */
!function(n,e){"use strict";function t(){return e(o,r,i)}var r,i,o="undefined"==typeof window||null==window.navigator?global:window;return"undefined"==typeof exports||null!=n&&n!==exports&&n!==o||(n=exports),i=o.document,r=n||o,"function"==typeof define&&define.amd?define(t):t()}(this,function(n,e,t){"use strict";function r(n,e,t,r,i,o,l){for(var u,s,a,c,f,d=n.length,p=-1,h=null,v="",g=!0;++p<d;){if(g===!0)null==h?v+=n[p]:h.push(n[p]);else{if(c=n[p],s=null,a=c.indexOf(":"),-1===a)s=F(c,t,r,o);else{if(u=a>0?c.substring(0,a).trim():"",""===u&&(u="expression"),c=c.substring(a+1),f=Q[u],null==f){K("Undefined custom util `%s`",u);continue}s=f(c,t,r,i,o,l,e)}null!=s&&("object"==typeof s&&null==h&&(h=[v]),null==h?v+=s:h.push(s))}g=!g}return null==h?v:h}function i(n){this.template=n,this.index=0,this.length=n.length}function o(){}var l,u,s,a,c;if(function(){l=function(n,e,t){if(null==t&&(t=n),null==n)return n;for(var r=n.length,i=0;r>i;i++)e.call(t,n[i],i);return t},a=function(n,e){if(null==n)return-1;for(var t=n.length,r=0;t>r;r++)if(n[r]===e)return r;return-1},u=function(n,e){var t=a(n,e);return-1===t?!1:(n.splice(t,1),!0)},s=function(n,e,t){var r=new Array(n.length);return l(n,function(n,t){r[t]=e.call(this,n,t)},t),r},c=function(n,e,t){for(var r=n.length,i=0;r>i;i++)if(e.call(t||n,n[i],i))return!0;return!1}}(),void 0===Array.prototype.forEach&&(Array.prototype.forEach=function(n,e){l(this,n,e)}),void 0===Array.prototype.indexOf&&(Array.prototype.indexOf=function(n){return a(this,n)}),null==String.prototype.trim&&(String.prototype.trim=function(){var n,e=-1,t=this.length;if(0===t)return this;for(;++e<t&&(n=this.charCodeAt(e),!(n>32)););for(;0!==--t&&(n=this.charCodeAt(t),!(n>32)););return 0!==e&&t!==length-1?this.substring(e,t+1):this}),null==Function.prototype.bind){var f;Function.prototype.bind=function(){if(arguments.length<2&&"undefined"==typeof arguments[0])return this;var n=this,e=f.call(arguments),t=e.shift();return function(){return n.apply(t,e.concat(f.call(arguments)))}}}var d,p,h,v,g,m,y;!function(){d=function(n){return"function"==typeof n},g=function(n){return null!=n&&"object"==typeof n},p=h=function(n){return null!=n&&"object"==typeof n&&"number"==typeof n.length&&"function"==typeof n.slice},v=function(n){return"string"==typeof n},m=function(n){return"string"==typeof n&&""!==n},y=function(n){return null==n||"object"!=typeof n?!1:n.constructor===Object}}();var b,x,C,N;!function(){b=function(n,e){if("."===e)return n;for(var t=e.split("."),r=t.length,i=-1;null!=n&&++i<r;)n=n[t[i]];return n},x=function(n,e,t){for(var r,i=e.split("."),o=i.length-1,l=-1;++l<o;)r=i[l],null==n[r]&&(n[r]={}),n=n[r];n[i[l]]=t},C=function(n,e){if(null==e)return n||{};if(null==n)return N(e);for(var t in e)n[t]=e[t];return n},N=Object.create||function(n){var e=function(){};return e.prototype=n,new e}}();var w,k,A,E;!function(){w=function(n,e){var t=n.indexOf(e);return-1===t?!1:(n.splice(t,1),!0)},k=function(n,e,t){n.forEach(e,t)},A=function(n,e){return n.indexOf(e)},E=function(n,e){return-1!==n.indexOf(e)}}();var O,S,_;!function(){O=function(n,e){return function(){return S(n,e,arguments)}},S=function(n,e,t){var r=t.length;return 0===r?n.call(e):1===r?n.call(e,t[0]):2===r?n.call(e,t[0],t[1]):3===r?n.call(e,t[0],t[1],t[2]):4===r?n.call(e,t[0],t[1],t[2],t[3]):n.apply(e,t)},_=function(){return!1}}();var j,f=Array.prototype.slice,T=Array.prototype.splice,M=Array.prototype.indexOf,I=N,D=Object.hasOwnProperty,R={"'":/\\'/g,'"':/\\"/g,"{":/\\\{/g,">":/\\>/g,";":/\\>/g},$={allowCache:!0};!function(){j=function(n,e){if(null==n)return null==e?{}:N(e);if(null==e)return n;var t;for(t in e)"class"!==t||"string"!=typeof n[t]?n[t]=e[t]:n[t]+=" "+e[t];return n}}(),i.prototype={skipWhitespace:function(){for(var n=this.template,e=this.index,t=this.length;t>e&&!(n.charCodeAt(e)>32);e++);return this.index=e,this},skipToAttributeBreak:function(){var n,e=this.template,t=this.index,r=this.length;do if(n=e.charCodeAt(++t),35===n&&123===e.charCodeAt(t+1))return this.index=t,this.sliceToChar("}"),void this.index++;while(46!==n&&35!==n&&62!==n&&123!==n&&32!==n&&59!==n&&r>t);this.index=t},sliceToChar:function(n){for(var e,t,r=this.template,i=this.index,o=i,l=!1;(t=r.indexOf(n,i))>-1&&(i=t,92===r.charCodeAt(i-1));)l=!0,i++;return e=r.substring(o,i),this.index=i,l?e.replace(R[n],n):e}};var L;!function(){L=function(n,e){if(null!=e&&null!=n)for(var t=n.length,r=e.length,i=-1;++i<r;)n[t+i]=e[i]}}();var F,U;!function(){function n(n,e,t,r){for(var i=n;r>t&&null!=i;)i=i[e[t]],t++;return i}F=function(e,t,r,i){if("."===e)return t;var o,l=e.split("."),u=t,s=-1,a=l.length,c=l[0];for("$c"===c?(u=i,s++):"$a"===c?(u=i&&i.attr,s++):"$u"===c?(u=ne,s++):"$ctx"===c&&(u=r,s++),o=s;null!=u&&++s<a;)u=u[l[s]];if(null==u&&-1===o)for(var f;null!=i;){if(f=i.scope,null!=f&&(u=n(f,l,0,a),null!=u))return u;i=i.parent}return u},U=function(n){var e,t=[],r=0;for(e in n)t[r++]={key:e,value:n[e]};return t}}();var H,P,B;!function(){H=function(e,t){(n[e]||(n[e]=[])).push(t)},P=function(e,t){return null==t?void(n[e]=[]):void w(n[e],t)},B=function(e){var t=n[e];if(null!=t)for(var r=t.length,i=-1,o=f.call(arguments,1);++i<r;)t[i].apply(null,o)};var n={compoCreated:null,error:null}}();var W,z,V,G,K;!function(){function n(n){function r(t,r,i){this.type="Parser"+n,this.message=t,this.original=r,this.index=i,this.stack=e()}return t(r,Error),r}function e(){var n=(new Error).stack;return null==n?null:n.split("\n").slice(6,8).join("\n")}function t(n,e){Object.create&&(n.prototype=Object.create(e.prototype))}function r(n,e,t,r,s,f,d){e+=i(s)+o(t,r,d)+u(n,t,r)+l(f);var p="error"===n?a:c;return new p(e,t,r)}function i(n){return null==n?"":("number"==typeof n&&(n=String.fromCharCode(n))," Invalid token: `"+n+"`")}function o(n,e,t){if(null==e&&!t)return"";var r=n.substring(0,e).split("\n"),i=r.length,o=e+1-r.slice(0,i-2).join("\n").length;return" at "+(t||"")+"("+i+":"+o+")"}function l(n){var e={2:"tag",3:"tag",5:"attribute key",6:"attribute value",8:"literal","var":"VarStatement",expr:"Expression"};return null==n||null==e[n]?"":"\n    , when parsing "+e[n]}function u(n,e,t){if(null==t)return"";var r=e.substring(t);return r.length>30&&(r=r.substring(0,30)+"..."),"\n    Parser "+n+" at: "+r}if(W=function(n){K(n),B("error",n)},z=function(n,e,t,i,o,l){var u=r("error",n,e,t,i,o,l);K(u.message),G(u.stack),B("error",u)},V=function(n,e,t,i,o,l){var u=r("warn",n,e,t,i,o,l);G(u.message),G(u.stack),B("error",u)},"undefined"==typeof console)G=K=function(){};else{var s=Function.prototype.bind;G=s.call(console.warn,console,"MaskJS [Warn] :"),K=s.call(console.error,console,"MaskJS [Error] :")}var a=n("Error"),c=n("Warning")}();var Q,Y,q,X,J,Z,ne,ee,te;!function(){function n(){Q={expression:function(n,e,t,r,i){return ie.eval(n,e,t,i)}},Y={},q={"class":null,id:null,style:null,name:null,type:null},X={div:null,span:null,input:null,button:null,textarea:null,select:null,option:null,h1:null,h2:null,h3:null,h4:null,h5:null,h6:null,a:null,p:null,img:null,table:null,td:null,tr:null,pre:null,ul:null,li:null,ol:null,i:null,em:null,b:null,strong:null,form:null,audio:null,video:null,canvas:null,svg:null},J={}}n(),function(n){function e(n){function e(n,e){this.tagName=n.tagName,this.attr=n.attr,this.expression=n.expression,this.nodes=n.nodes,this.nextSibling=n.nextSibling,this.parent=e,this.components=null}return e.prototype=n,e}te=function(t,r){null!=r&&"object"==typeof r&&(r.__Ctor=e(r)),n[t]=r}}(X),function(n){function e(n){if("parsed"===n.arguments)return r(n.process);var e=O(n.process||t,n);return e.util=n,e}function t(n,e,t,r,i,o,l){return"node"===l?(this.nodeRenderStart(n,e,t,r,i),this.node(n,e,t,r,i)):(this.attrRenderStart(n,e,t,r,i,o),this.attr(n,e,t,r,i,o))}function r(n){return function(e,t,r,i,o){var l=ie.evalStatements(e,t,r,o);return n.apply(null,l)}}ne={},ee=function(t,r){return d(r)?void(n[t]=r):(n[t]=e(r),void("parsed"===r.arguments&&(ne[t]=r.process)))},Z=function(e){return null!=e?n[e]:n}}(Q)}();var re,ie=function(){function n(n,e){null==e&&(e=!1),t=n,i=0,o=n.length,r=new oe;var l,w,R=r,z=te;n:for(;;)if(o>i&&(l=t.charCodeAt(i))<33)i++;else{if(i>=o)break;if(w=Ae(l),null==w&&o>i)break;if(w===D){if(e===!0)return[r,i];break}if(e===!0){var G=R.parent;if(null!=G&&G.type===P&&null==G.parent&&w===$)return[r,i]}if(w===D)break;switch(w){case k:R=ye(R,new le(R)),R=ye(R,new oe(R)),i++;continue;case A:var K=P;z===re&&(z=te,K=V);do R=R.parent;while(null!=R&&R.type!==K);if(K===P&&(R=R.parent),null==R){xe("OutOfAst Exception",l);break n}i++;continue;case S:R=ye(R,new ae(R)),w=H,i++;break;case _:for(;null!=R&&R.type!==X;)R=R.parent;i++;continue;case j:if(z!==re){z=te;do R=R.parent;while(null!=R&&R.type!==P&&R.type!==X);if(i++,null==R){xe("Unexpected comma",l);break n}if(R.type===X){w=H;break}continue}do R=R.parent;while(null!=R&&R.type!==V);if(null==R){xe("OutOfAst Exception",l);break n}R=R.newArgument(),i++;continue;case M:r=new ve(r),R=r.case1,i++;continue;case I:R=r.case2,i++;continue;case T:l=t.charCodeAt(i+1),l>=48&&57>=l?w=U:(w=R.type===P?$:L,i++);break;case E:if(R.type===W||R.type===Y||R.type===Q){R=ye(R,new pe(R)),R=R.getBody(),i++;continue}R=ye(R,new se(R)),R=R.body,i++;continue;case O:do R=R.parent;while(null!=R&&R.type!==Y&&R.type!==J);i++;continue}if(R.type===P&&(R=ye(R,new le(R))),u!==w&&h!==w||null!=R.body)switch(w){case u:case s:case c:case a:case f:case p:case d:case v:case g:case m:case y:case b:case x:case C:case N:for(;R&&R.type!==B;)R=R.parent;if(null==R.body)return xe("Unexpected operator",l);R.join=w;do R=R.parent;while(null!=R&&R.type!==P);if(null==R)return xe("Unexpected operator",l);i++;continue;case F:case U:if(null!=R.body&&null==R.join)return xe("Directive expected",l);F===w&&(i++,ye(R,new ue(Ne(l))),i++),U===w&&ye(R,new ue(we(l)));continue;case $:case L:var q=ke();if(w===$&&("null"===q&&(q=null),"false"===q&&(q=!1),"true"===q&&(q=!0),"string"!=typeof q)){ye(R,new ue(q));continue}for(;o>i;){l=t.charCodeAt(i);{if(!(33>l))break;i++}}if(40===l){z=re,i++;var Z=ye(R,new ce(R,q));R=Z.newArgument();continue}var ne=w===$?fe:de;R=ye(R,new ne(R,q));break;case H:if(125===Ce())continue;var ee=ke();if(58!==Ce())return xe("Object parser. Semicolon expeted",l);i++,R=R.nextProp(ee),w=$;continue}else R=ye(R,new he(R,w)),i++}return null==R.body&&R.type===B?xe("Unexpected end of expression",l):(me(r),r)}function e(t,r,i,o){var w,k;if(null==t)return null;if("."===t)return r;if(k="string"==typeof t?l.hasOwnProperty(t)===!0?l[t]:l[t]=n(t):t,null==k)return null;var A,E,O,S=k.type;if(P===S){var _,j;n:for(A=0,O=k.body.length;O>A;A++)if(E=k.body[A],_=e(E,r,i,o),null!=j&&null!=j.join){if(j.join===p)if(w)w=_;else for(;O>A&&k.body[A].join!==d;A++);if(j.join===d){if(w)break n;if(_){w=_;break n}}switch(j.join){case u:w-=_;break;case s:w+=_;break;case a:w/=_;break;case c:w*=_;break;case f:w%=_;break;case m:w=w!=_;break;case y:w=w!==_;break;case v:w=w==_;break;case g:w=w===_;break;case b:w=w>_;break;case x:w=w>=_;break;case C:w=_>w;break;case N:w=_>=w}j=E}else j=E,w=_}if(B===S)return w=e(k.body,r,i,o),null==k.next?w:be(k.next,w);if(q===S)return k.body;if(J===S){var T=k.body.body,M=T.length,A=-1;for(w=new Array(M);++A<M;)w[A]=e(T[A],r,i,o);return w}if(X===S){w={};var I=k.props;for(var D in I)w[D]=e(I[D],r,i,o);return w}if(W===S||V===S||Y===S||Q===S)return be(k,r,i,o);if(Z===S)switch(w=e(k.body,r,i,o),k.prefix){case u:w=-w;break;case h:w=!w}return ee===S&&(w=e(k.body,r,i,o),w=e(w?k.case1:k.case2,r,i,o)),w}var t,r,i=0,o=0,l={},u="-",s="+",a="/",c="*",f="%",d="||",p="&&",h="!",v="==",g="===",m="!=",y="!==",b=">",x=">=",C="<",N="<=",w=".",k=20,A=21,E=22,O=23,S=24,_=25,j=26,T=27,M=28,I=29,D=30,$=31,L=32,F=33,U=34,H=35,P=1,B=2,W=3,V=4,Q=5,Y=6,q=7,X=10,J=11,Z=12,ee=13,te=1,re=2,ie={};ie[w]=1,ie[a]=2,ie[c]=2,ie[u]=3,ie[s]=3,ie[b]=4,ie[x]=4,ie[C]=4,ie[N]=4,ie[v]=5,ie[g]=5,ie[m]=5,ie[y]=5,ie[p]=6,ie[d]=6;var oe,le,ue,se,ae,ce,fe,de,pe,he,ve;!function(){oe=function(n){this.parent=n,this.type=P,this.body=[],this.join=null},le=function(n){this.parent=n},le.prototype={constructor:le,type:B,join:null,body:null},ue=function(n){this.type=q,this.body=n,this.join=null},se=function(n){this.type=J,this.parent=n,this.body=new oe(this)},ae=function(n){this.type=X,this.parent=n,this.props={}},ae.prototype={nextProp:function(n){var e=new le(this);return this.props[n]=e,e}},ce=function(n,e){this.parent=n,this.type=V,this.body=e,this.arguments=[],this.next=null},ce.prototype={constructor:ce,newArgument:function(){var n=new oe(this);return this.arguments.push(n),n}},fe=function(n,e){this.type=W,this.parent=n,this.body=e,this.next=null},de=function(n,e){this.type=Q,this.parent=n,this.body=e,this.next=null},pe=function(n){this.parent=n,this.body=new le(this),this.body.body=new oe(this.body),this.next=null},pe.prototype={type:Y,getBody:function(){return this.body.body}},he=function(n,e){this.parent=n,this.prefix=e},he.prototype={constructor:he,type:Z,body:null},ve=function(n){this.body=n,this.case1=new oe(this),this.case2=new oe(this)},ve.prototype={constructor:ve,type:ee,case1:null,case2:null}}();var me,ye;!function(){function n(n){if(0===n.length)return null;var e=new oe(n[0].parent);return e.join=n[n.length-1].join,e.body=n,e}ye=function(n,e){switch(n.type){case P:return n.body.push(e),e;case B:if(e.type===Q||e.type===Y)return n.next=e;case Z:return n.body=e;case W:case V:case Q:case Y:return n.next=e}return xe("Invalid expression")},me=function(e){if(e.type!==P)return void(null!=e.body&&"object"==typeof e.body&&me(e.body));for(var t,r,i,o=e.body,l=0,u=o.length;u>l;l++)me(o[l]);for(l=1;u>l&&(t=o[l],r=o[l-1],!(ie[r.join]>ie[t.join]));l++);if(l!==u){for(i=[o[0]],l=1;u>l;l++){t=o[l],r=o[l-1];var s=ie[r.join];if(s>ie[t.join]&&u-1>l){for(var a,c,f=l;++l<u&&(a=o[l].join,null!=a)&&!(s<=ie[a]););c=o.slice(f,l+1),t=n(c),me(t)}i.push(t)}e.body=i}}}();var be,xe;!function(){xe=function(n,e){return z(n,t,i,e,"expr")},be=function(n,t,r,i){var o,l,u,s,a,c=n,f=n.body;if("$c"===f){l=i;var d=c.next,p=null!=d&&d.body;if(null!=p&&null==l[p]){if(d.type===V&&"function"==typeof ge.prototype[p])o=i,l=ge.prototype[p],c=d;else for(;;){if(l=l.parent,null==l)break;if(null!=l[p]){o=l,l=l[p],c=d;break}}null==l&&(f="$c."+p,c=d)}}else if("$a"===f)l=i&&i.attr;else if("$u"===f)l=ne;else if("$ctx"===f)l=r;else if(null!=t&&(o=t,l=t[f]),null==l)for(;null!=i&&(o=i.scope,null!=o&&(l=o[f]),null==l);)i=i.parent;if(null==l)return(null==c||null!=c.next)&&G("<mask:expression> Accessor error:",f),null;for(;;){if(c.type===V){for(u=[],s=-1,a=c.arguments.length;++s<a;)u[s]=e(c.arguments[s],t,r,i);l=l.apply(o,u)}if(null==l||null==c.next)break;if(c=c.next,f=c.type===Y?e(c.body,t,r,i):c.body,o=l,l=l[f],null==l)break}return l}}();var Ce,Ne,we,ke,Ae;!function(){Ce=function(){for(var n;o>i;){if(n=t.charCodeAt(i),n>32)return n;i++}return null},Ne=function(n){for(var e,r,o=!1,l=39===n?"'":'"',u=i;(e=t.indexOf(l,i))>-1&&(i=e,92===t.charCodeAt(e-1));)o=!0,i++;return r=t.substring(u,i),o===!0&&(r=r.replace(R[l],l)),r},we=function(){for(var n,e,r=i;;){if(n=t.charCodeAt(i),46===n){if(e===!0)return xe("Invalid number",n),null;e=!0}if(!((n>=48&&57>=n||46===n)&&o>i))break;i++}return+t.substring(r,i)},ke=function(){var n,e=i,r=t.charCodeAt(i);if(34===r||39===r)return i++,n=Ne(r),i++,n;for(;;){if(i===o)break;if(r=t.charCodeAt(i),36!==r&&95!==r){if(!(r>=48&&57>=r||r>=65&&90>=r||r>=97&&122>=r))break;i++}else i++}return t.substring(e,i)},Ae=function(n){if(null==n&&i===o)return null;switch(n){case 40:return k;case 41:return A;case 123:return S;case 125:return _;case 91:return E;case 93:return O;case 44:return j;case 46:return T;case 59:return D;case 43:return s;case 45:return u;case 42:return c;case 47:return a;case 37:return f;case 61:return t.charCodeAt(++i)!==n?(xe("Assignment violation: View can only access model/controllers","="),null):t.charCodeAt(i+1)===n?(i++,g):v;case 33:return 61===t.charCodeAt(i+1)?(i++,61===t.charCodeAt(i+1)?(i++,y):m):h;case 62:return 61===t.charCodeAt(i+1)?(i++,x):b;case 60:return 61===t.charCodeAt(i+1)?(i++,N):C;case 38:return t.charCodeAt(++i)!==n?(xe("Not supported: Bitwise AND",n),null):p;case 124:return t.charCodeAt(++i)!==n?(xe("Not supported: Bitwise OR",n),null):d;case 63:return M;case 58:return I}return n>=65&&90>=n||n>=97&&122>=n||95===n||36===n?$:n>=48&&57>=n?U:34===n||39===n?F:(xe("Unexpected or unsupported directive",n),null)}}();var Ee;return function(){function t(n,l,u,s){if(null==n)return null;var a,c,f=n.type;if(P===f)for(var d=n.body,p=d.length,h=-1;++h<p;)c=t(d[h],l,u,s),a=i(a,c);if(W===f||Q===f||Y===f){for(var v,g=n.body,m=n.next;null!=m;){if(v=m.type,V===v)return t(m,l,u,s);if(W!==v&&Q!==v&&Y!==v)return K("Ast Exception: next should be a symbol/function ref"),null;var y=v===Y?e(m.body,l,u,s):m.body;if("string"!=typeof y)return G("Can`t extract accessor name",g),null;g+="."+y,m=m.next}return g}switch(f){case B:case Z:case ee:c=t(n.body,l,u,s),a=i(a,c)}if(ee===f&&(c=t(r.case1,l,u,s),a=i(a,c),c=t(r.case2,l,u,s),a=i(a,c)),V===f){for(var b=n.arguments,p=b.length,h=-1;++h<p;)c=t(b[h],l,u,s),a=i(a,c);c=null;var x=n;n:for(;x=x.parent;)switch(x.type){case W:case Q:case Y:c=x.body+(null==c?"":"."+c);break;case P:case B:break n;default:c=null;break n}null!=c&&(a=i(a,c)),n.next&&(c=t(n.next,l,u,s),a=i(a,{accessor:o(n),ref:c}))}return a}function i(n,e){if(null==n)return e;if(null==e)return n;if(("object"!=typeof n||null==n.length)&&(n=[n]),"object"!=typeof e||null==e.length)return-1===n.indexOf(e)&&n.push(e),n;for(var t=0,r=e.length;r>t;t++)-1===n.indexOf(e[t])&&n.push(e[t]);return n}function o(n){var e=n;n:for(;e.parent;){switch(e.parent.type){case P:case B:break n}e=e.parent}return l(e,n.next)}function l(n,e){if(n===e||null==n)return null;if("object"!=typeof n)return n;if(null!=n.length&&"function"==typeof n.splice){for(var t=[],r=0,i=n.length;i>r;r++)t[r]=l(n[r],e);return t}var o={};for(var u in n)null!=n[u]&&"parent"!==u&&(o[u]=l(n[u],e));return o}Ee=function(e,r,i,o){return"string"==typeof e&&(e=n(e)),t(e,r,i,o)}}(),{parse:n,eval:e,varRefs:Ee,evalStatements:function(t,r,i,o){for(var l=n(t).body,u=[],s=l.length,a=-1,c=new oe;++a<s;)c.body.push(l[a]),null==l[a].join&&(u.push(e(c,r,i,o)),c.body.length=0);return u}}}();!function(){function n(n){var e=this.nodes;if(null==e)return void(this.nodes=[n]);e.push(n);var t=e[e.length-2];t.nextSibling=n}function e(n,e){this.type=re.NODE,this.tagName=n,this.parent=e,this.attr={}}function t(n,e){this.content=n,this.parent=e}function r(n,e,t){this.tagName=n,this.parent=e,this.controller=t,this.attr={}}function i(){}var o=1,l=2,u=3,s=4,a=9,c=10,f=15;e.prototype={constructor:e,type:o,tagName:null,parent:null,attr:null,nodes:null,expression:null,appendChild:n,stringify:null,__single:null},t.prototype={type:l,content:null,parent:null},r.prototype={constructor:r,type:s,parent:null,attr:null,controller:null,nodes:null,components:null,model:null,modelRef:null},i.prototype={constructor:i,type:u,nodes:null,appendChild:n},re={NODE:o,TEXTNODE:l,FRAGMENT:u,COMPONENT:s,CONTROLLER:a,SET:c,STATEMENT:f,Node:e,TextNode:t,Fragment:i,Component:r}}(),function(){function n(n,e,t,r){function i(n){return ie.eval(n,e,t,r)}if(i(n.expression))return n.nodes;for(;;){if(n=n.nextSibling,null==n||"else"!==n.tagName)break;var o=n.expression;if(null==o||""===o||i(o))return n.nodes}return null}Y["if"]={getNodes:n,render:function(e,t,r,i,o,l){var u=n(e,t,r,o);null!=u&&ce(u,t,r,i,o,l)}}}(),function(){function n(n,t,r,i,o,l,u,s){ce(e(r,n,t[0],t[1],t[2],t[3]),i,o,l,u,s)}function e(n,e,i,o,l,u){return"of"===l?p(e)===!1?(K("<ForStatement> Value is not enumerable",e),null):t(n,e,i,o,u):"in"===l?"object"!=typeof e?(G("<ForStatement> Value is not an object",e),null):(p(e)&&G("<ForStatement> Consider to use `for..of` for Arrays"),r(n,e,i,o,u)):void 0}function t(n,e,t,r,o){for(var l,u=-1,s=e.length,a=new Array(s);++u<s;)l={},l[t]=e[u],r&&(l[r]=u),a[u]=i(h,n,l,u,t,o);return a}function r(n,e,t,r,o){var l,u,s,a=[],c=0;for(u in e)s=e[u],l={},l[t]=u,r&&(l[r]=s),a[c++]=i(v,n,l,u,r,o);return a}function i(n,e,t,r,i,l){return{type:re.COMPONENT,tagName:n,nodes:e,controller:o(n,t,r,i,l)}}function o(n,e,t,r,i){return{meta:{serializeScope:!0},compoName:n,scope:e,elements:null,propVal:r,key:t,expression:i,renderEnd:l,dispose:u,serializeScope:s}}function l(n){this.elements=n}function u(){this.elements&&(this.elements.length=0)}function s(n){var e=this,t=e.expression,r=e.key,i=e.propVal,o=n[i];return null!=o&&"object"==typeof o&&(n[i]="$ref:("+t+')."'+r+'"'),n}function a(n){g=n,y=n.length,m=0;var e,t,r,i,o;if(o=c(),40===o&&(i=!0,m++,c()),e=f(),o=c(),44===o){if(i!==!0)return d("Parenthese must be used in multiple var declarion");m++,c(),t=f()}if(i){if(o=c(),41!==o)return d("Closing parenthese expected");m++}o=c();var r;return 105===o&&110===g.charCodeAt(++m)&&(r="in"),111===o&&102===g.charCodeAt(++m)&&(r="of"),null==r?d("Invalid FOR statement. (in|of) expected"):(b[0]=e,b[1]=t,b[2]=r,b[3]=g.substring(++m),b)}function c(){for(var n;y>m;m++)if(n=g.charCodeAt(m),!(33>n))return n;return-1}function f(){for(var n,e=m;y>m;m++)if(n=g.charCodeAt(m),n>48&&57>n){if(e===m)return d("Variable name begins with a digit")}else if(!(36===n||95===n||n>=97&&122>=n||n>=65&&90>=n))break;return e===m?d("Variable declaration expected"):g.substring(e,m)}function d(n){throw new Error("<ForStatement parser> "+n+" `"+g.substring(m,20)+"`")}var h="for..of::item",v="for..in::item";Y["for"]={render:function(e,t,r,i,o,l){a(e.expression);var u=ie.eval(b[3],t,r,o);null!=u&&n(u,b,e.nodes,t,r,i,o,l)},build:n,parseFor:a,createForNode:i,getNodes:e,getHandler:function(n,e){return o(n,e)}},function(){function n(n){function e(){}return e.prototype={meta:{serializeScope:!0},serializeScope:s,type:re.COMPONENT,compoName:n,renderEnd:l,dispose:u},e}X[h]=n(h),X[v]=n(v)}();var g,m,y,b=["prop1","prop2","in|of","expression"]}(),function(){function n(n,t){for(var r=t.length,i=new Array(r),o=n.nodes,l=n.expression,u="."===l?'."':"("+n.expression+')."',s=0;r>s;s++)i[s]=e(o,t[s],u,s);return i}function e(n,e,r,i){return{type:re.COMPONENT,tagName:"each::item",nodes:n,controller:t(e,i,r)}}function t(n,e,t){return{compoName:"each::item",model:n,scope:{index:e},modelRef:t+e+'"',attr:null,meta:null}}Y.each={render:function(e,t,r,i,o,l){var u=ie.eval(e.expression,t,r,o);null!=u&&ce(n(e,u),u,r,i,o,l)}}}(),Y["with"]={render:function(n,e,t,r,i,o){var l=ie.eval(n.expression,e,t,i);ce(n.nodes,l,t,r,i,o)}},function(){function n(n,t,r,i,o){if(null==t)return null;for(var l,u,s,a,c=t.length,f=-1;++f<c;)if(l=t[f],"default"!==l.tagName)if("case"===l.tagName)if(u=l.expression){if(e(u,r,i,o)==n){s=l;break}}else G("<mask:switch:case> Expression expected");else G("<mask:switch> Case expected",l.tagName);else a=l;return null==s&&(s=a),null!=s?s.nodes:null}var e=ie.eval;Y["switch"]={render:function(t,r,i,o,l,u){var s=e(t.expression,r,i,l),a=n(s,t.nodes,r,i,l);null!=a&&ce(a,r,i,o,l,u)},getNodes:n}}(),function(){function n(n){this.parent=n,this.compoName="include",this.components=[],this.templates=null}Y.include={render:function(e,t,r,i,o,l){for(var u,s=ie.evalStatements(e.expression);null!=o&&(u=o.resource,null==u);)o=o.parent;var a=new n(o),c=ge.pause(a,r);include.instance(u&&u.url).load.apply(u,s).done(function(n){a.templates=n.load,ce(e.nodes,t,r,i,a,l),c()})}}}(),Y["import"]={render:function(n,e,t,r,i,o){var l=n.expression,u=ie.evalStatements(l,e,t,i),s=u[0];if("string"!=typeof s)return void K("<mask:import> Invalid argument",l);for(;;){if("include"===i.compoName)break;if(i=i.parent,null==i)break}if(null!=i){var a=i.templates[s];null!=a&&ce(ae.parse(a),e,t,r,i,o)}}},X["var"]=o,o.prototype={renderStart:function(n,e){var t,r,i=this.parent,o=i.scope;null==o&&(o=i.scope={}),this.model={};for(t in this.attr)r=ie.eval(this.attr[t],n,e,i),this.model[t]=o[t]=r;this.attr={}},onRenderStartClient:function(){var n=this.parent,e=n.scope;null==e&&(e=n.scope={});for(var t in this.model)e[t]=this.model[t]}},function(){function n(n,e){for(var t=0;t<n.length;t++)n[t].style.display=e?"":"none"}Y.visible={toggle:n,render:function(e,t,r,i,o,l){var u=[];ce(e.nodes,t,r,i,o,u),L(l,u);var s=ie.eval(e.expression,t,r,o);n(u,s)}}}();var oe,le,ue,se,ae;!function(n,e,t){function i(n){for(var e=-1;-1!==(e=n.indexOf(s,e))&&n.charCodeAt(e+1)!==d;)e++;if(-1===e)return n;for(var t,i=n.length,l=[],u=0,f=0;;){if(t=o(n,e+2,i,d,p),-1===t)break;for(l[f++]=u===e?"":n.substring(u,e),l[f++]=n.substring(e+2,t),u=e=t+1;-1!==(e=n.indexOf(s,e))&&n.charCodeAt(e+1)!==d;)e++;if(-1===e)break}return i>u&&(l[f]=n.substring(u)),n=null,function(n,e,t,i,o,u){if(null==n){for(var f,d="",p=l.length,h=-1;++h<p;)f=l[h],d+=h%2===1?s+a+f+c:f;return d}return r(l,n,e,t,i,o,u)}}var o,l,u,s="~",a="[",c="]",f=126,d=91,p=93;!function(){o=function(n,e,t,r,i){for(var o,u=0,s=e;t>e;e++)if(o=n.charCodeAt(e),34!==o&&39!==o)if(o!==r){if(o===i&&-1===--u)return e}else u++;else e=l(n,e+1,t,34===o?'"':"'");return V("Group was not closed",n,s),t},u=function(n,e,t){for(var r;t>e;)if(r=n.charCodeAt(e),36!==r&&95!==r){if(!(r>=48&&57>=r||r>=65&&90>=r||r>=97&&122>=r))break;e++}else e++;return e},l=function(n,e,t,r){for(var i=e;-1!==(e=n.indexOf(r,e));){if(92!==n.charCodeAt(e-1))return e;e++}return V("Quote was not closed",n,i),t}}();var h;!function(){function e(){var n=this.attr,e="var ";for(var t in n)"var "!==e&&(e+=","),e+=t+"="+n[t];return e+";"}h=function(t,r,i,s){var a,c,f=new n("var",s);f.stringify=e;for(var d,p=1,h=2,v=3,g=4,m=p;;)if(i>r&&(c=t.charCodeAt(r))<33)r++;else if(m!==p)if(m!==h)if(m!==v){if(m===g){if(44===c){m=p,r++;continue}break}}else{switch(a=r,r++,c){case 123:case 91:r=o(t,r,i,c,c+2);break;case 39:case 34:r=l(t,r,i,39===c?"'":'"');break;default:for(;i>r&&(c=t.charCodeAt(r),44!==c&&59!==c);)r++;r--}r++,f.attr[d]=t.substring(a,r),m=g}else{if(61!==c)return z("Assignment expected",t,r,c,"var"),[f,r];m=v,r++}else a=r,r=u(t,r,i),d=t.substring(a,r),m=h;return[f,r]}}();var v=2,g=3,m=5,y=6,b=7,x=8,C=9;ae={parse:function(r){for(var l,u,s,a,c,N,w,k,A=new t,E=A,O=v,S=g,_=0,j=r.length;;)if(j>_&&(N=r.charCodeAt(_))<33)_++;else{if(47===N){if(k=r.charCodeAt(_+1),47===k){for(_++;10!==N&&13!==N&&j>_;)N=r.charCodeAt(++_);continue}if(42===k){_=r.indexOf("*/",_+2)+2,1===_&&(_=j);continue}}if(S===m&&(null!=l&&(A.attr["class"]=i(l),l=null),null!=s&&(A.attr[s]=s,s=null,u=null)),null!=u){if(O===m)null==s?s=u:a=u,null!=s&&null!=a&&("class"!==s?A.attr[s]=a:l=null==l?a:l+" "+a,s=null,a=null);else if(S===g){if("var"===u){var T=h(r,_,j,A);A.appendChild(T[0]),_=T[1],O=v,u=null;continue}c=new n(u,A),A.appendChild(c),A=c,O=m}else if(S===x){if(c=new e(u,A),A.appendChild(c),A.__single===!0)do A=A.parent;while(null!=A&&null!=A.__single);O=v}u=null}if(_>=j){O===m&&(null!=l&&(A.attr["class"]=i(l)),null!=s&&(A.attr[s]=s)),N=null;break}if(O===C){for(A=A.parent;null!=A&&null!=A.__single;)A=A.parent;O=v}switch(N){case 123:S=O,O=v,_++;continue;case 62:S=O,O=v,_++,A.__single=!0;continue;case 59:if(null!=A.nodes){_++;continue}case 125:_++,S=O,O=C;continue;case 39:case 34:O===y?O=m:S=O=x,_++;var M=!1,I=!1,D=39===N?"'":'"';for(w=_;(_=r.indexOf(D,_))>-1&&92===r.charCodeAt(_-1);)M=!0,_++;-1===_&&(V("Literal has no ending",r,w),_=j),_===w&&(k=r.charCodeAt(_+1),(124===k||k===N)&&(I=!0,w=_+2,_=r.indexOf((124===k?"|":D)+D+D,w),-1===_&&(_=j))),u=r.substring(w,_),M===!0&&(u=u.replace(R[D],D)),(O!==m||"class"!==s)&&(u=i(u)),_+=I?3:1;continue}if(O===v){if(S=g,O=g,46===N||35===N){u="div";continue}}else if(O===m)if(46===N)_++,s="class",O=b;else if(35===N)_++,s="id",O=b;else{if(61===N){_++,O=y,S===g&&null==s&&V("Unexpected tag assignment",r,_,N,O);continue}if(40===N){w=1+_,_=1+o(r,w,j,N,41),A.expression=r.substring(w,_-1),A.type=re.STATEMENT;continue}if(null!=s){u=s;continue}}(O===y||O===b)&&(S=O,O=m);var $=null;for(w=_;j>_;){if(N=r.charCodeAt(_),N===f&&r.charCodeAt(_+1)===d){$=!0,++_;do N=r.charCodeAt(++_);while(N!==p&&j>_)}if(S!==y&&(46===N||35===N))break;if(33>N||61===N||62===N||59===N||40===N||123===N||125===N)break;_++}if(u=r.substring(w,_),""===u){V("String expected",r,_,N,O);break}if($===!0){if(O===g){V("Invalid interpolation (in tag name)",r,_,u,O);break}if(O===m)if("id"===s||S===y)u=i(u);else if("class"!==s){V("Invalid interpolation (in attr name)",r,_,u,O);break}}}N!==N&&V("IndexOverflow",r,_,N,O);var L=E.nodes;return null!=L&&1===L.length?L[0]:E},cleanObject:function(n){if(n instanceof Array){for(var e=0;e<n.length;e++)this.cleanObject(n[e]);return n}return delete n.parent,delete n.__single,null!=n.nodes&&this.cleanObject(n.nodes),n},setInterpolationQuotes:function(n,e){return n&&2===n.length?e&&1===e.length?(f=n.charCodeAt(0),d=n.charCodeAt(1),p=e.charCodeAt(0),s=n[0],a=n[1],void(c=e)):void K("Interpolation End must be of 1 Character"):void K("Interpolation Start must contain 2 Characters")},ensureTemplateFunction:i},oe=ae.parse,le=ae.ensureTemplateFunction,se=ae.cleanObject,ue=ae.setInterpolationQuotes}(re.Node,re.TextNode,re.Fragment,re.Component);var ce,fe=0;!function(n,e,r){function i(n,e,r,i,l){var u=i.appendChild(t.createComment(""));return function(){return o(n,e,r,u,l)}}function o(e,r,i,o,l){null!=e.tagName&&e.tagName!==e.compoName&&(e.nodes={tagName:e.tagName,attr:e.attr,nodes:e.nodes,type:1}),null!=e.model&&(r=e.model);var u=e.nodes,s=[];if(null!=u){for(var a=u instanceof Array,c=a===!0?u.length:1,f=0,p=null,h=t.createDocumentFragment();c>f;f++)p=a===!0?u[f]:u,ce(p,r,i,h,e,s);o.parentNode.insertBefore(h,o)}if(null==e.tagName){var v,g,m=e.handlers&&e.handlers.attr;for(g in e.attr)v=null,m&&d(m[g])&&(v=m[g]),null==v&&d(n[g])&&(v=n[g]),null!=v&&v(o,e.attr[g],r,i,s[0],e)}if(d(e.renderEnd)&&e.renderEnd(s,r,i,o.parentNode),null!=l&&l!==s)for(var y=l.length,b=s.length,x=-1;++x<b;)l[y+x]=s[x]}function l(n,e){var t=n.components;return null==t?void(n.components=[e]):void t.push(e)}var u,s=function(){var n=function(n){return function(e,t){e.appendChild(n.createTextNode(t))}}(t);return function(e,t,r,i,o){var l=e.content;if(d(l)){var u=l("node",t,r,i,o);if("string"==typeof u)return void n(i,u);for(var s,a="",c=u.length,f=0;c>f;f++)if(s=u[f],"object"!=typeof s)a+=s;else{if(""!==a&&(n(i,a),a=""),null==s.nodeType){a+=s.toString();continue}i.appendChild(s)}return void(""!==a&&n(i,a))}n(i,l)}}(),a=function(){var e=function(n){return function(e){return n.createElement(e)}}(t);return function(t,r,i,o,l,u){var s=t.tagName,a=t.attr,c=e(s);if(null!=c){null!=u&&(u.push(c),a["x-compo-id"]=l.ID),null!=o&&o.appendChild(c);var f,p;for(f in a)D.call(a,f)!==!1&&(d(a[f])?(p=a[f]("attr",r,i,c,l,f),p instanceof Array&&(p=p.join(""))):p=a[f],p&&(d(n[f])?n[f](t,p,r,i,c,l,o):c.setAttribute(f,p)));return c}}}();!function(){function n(n,e,t,r,o,u,s){var a,c;n.compoName=e.tagName,n.attr=a=j(n.attr,e.attr),n.parent=u,n.ID=++fe,n.expression=e.expression,null==n.model&&(n.model=t),null==n.nodes&&(n.nodes=e.nodes);for(c in a)"function"==typeof a[c]&&(a[c]=a[c]("attr",t,r,o,u,c));return B("compoCreated",n,t,r,o),d(n.renderStart)&&n.renderStart(t,r,o),l(u,n),n.async===!0?(n.await(i(n,t,r,o,s)),null):(null!=n.tagName&&(n.nodes={tagName:n.tagName,attr:n.attr,nodes:n.nodes,type:1}),"function"==typeof n.render?(n.render(n.model,r,o),null):n)}function t(n,e,t,r,i,o,u){var s,a,c,f=n.__Ctor,p=!1;if(f)c=new f(e,o);else{c=n;for(var h in e)c[h]=e[h];c.parent=o}var v=c.attr;if(null!=v)for(var h in v)"function"==typeof v[h]&&(v[h]=v[h]("attr",t,r,i,o,h));d(c.renderStart)&&c.renderStart(t,r,i,o,u),l(o,c);var g=o.components.length-1;return d(c.render)&&(p=!0,s=c.render(t,r,i,o,u),L(u,s),d(c.renderEnd)&&(a=c.renderEnd(s,t,r,i,o),null!=a&&(o.components[g]=a))),p?null:c}function r(n,e,t,r,i,o){n.ID=++fe,l(i,n),null==n.model&&(n.model=e);var u=n.elements=[];return ce(n.nodes,n.model,t,r,n,u),null!=o&&0!==u.length&&L(o,u),null}u=function(i,o,l,u,s,a){var c,f=i.tagName;if(null!=i.controller&&(c=i.controller),null==c&&(c=e[f]),null==c)return r(i,o,l,u,s,a);var d,p=!1;"function"==typeof c?d=new c(o):(d=c,p=!0);var h=p?t:n;return h(d,i,o,l,u,s,a)}}(),ce=function(i,o,l,c,f,p){if(null==i)return c;var h,v,g,m,y=i.type;if(null==f&&(f=new r),null==y&&(i instanceof Array?y=10:null!=i.tagName?y=1:null!=i.content&&(y=2)),1===y&&null!=e[i.tagName]&&(y=4),null==c&&1!==y&&(c=t.createDocumentFragment()),2===y)return s(i,o,l,c,f),c;if(10===y){for(g=0,m=i.length;m>g;g++)ce(i[g],o,l,c,f,p);
return c}var b=i.tagName;if("else"===b)return c;if(15===y){var x=Y[b];if(null==x){if(null==e[b])return K("<mask: statement is undefined>",b),c;y=4}if(15===y)return x.render(i,o,l,c,f,p),c}if(1===y&&(c=a(i,o,l,c,f,p),p=null),4===y){if(f=u(i,o,l,c,f,p),null==f)return c;h=[],i=f,f.model!==o&&null!=f.model&&(o=f.model)}var C=i.nodes;if(null!=C){null!=p&&null==h&&(h=p);for(var N=C instanceof Array,w=N===!0?C.length:1,k=0,A=null;w>k;k++)A=N===!0?C[k]:C,ce(A,o,l,c,f,h)}if(4===y){if(null==i.tagName&&"%"!==i.compoName){var E,O,v,S=i.handlers&&i.handlers.attr;for(v in i.attr)O=i.attr[v],null!=O&&(E=null,null!=S&&d(S[v])&&(E=S[v]),null==E&&null!=n[v]&&(E=n[v]),null!=E&&E(i,O,o,l,h[0],f))}d(i.renderEnd)&&i.renderEnd(h,o,l,c)}return null!=p&&null!=h&&p!==h&&L(p,h),c}}(q,X,re.Component);var de;!function(){de=function(){var n,e,r,i,o,l,u=f.call(arguments);for(i=u.length,o=-1;++o<i;)l=u[o],l instanceof Node?n=l:d(l)?r=l:g(l)&&(e=l);null==n&&(n=t.body);var s=d(r)?new r:new ge;s.ID=++fe;var a,c=f.call(t.getElementsByTagName("script")),p=!1;for(i=c.length,o=-1;++o<i;)if(a=c[o],"text/mask"===a.getAttribute("type")&&"true"===a.getAttribute("data-run")){var h=ce(oe(a.textContent),e,{},null,s);a.parentNode.insertBefore(h,a),p=!0}return p===!1&&G("No blocks found: <script type='text/mask' data-run='true'>...</script>"),d(s.renderEnd)&&s.renderEnd(n,e),ge.signal.emitIn(s,"domInsert"),s}}();var pe;!function(){function n(n,i,o,u){if(null==n)return null;if(p(n))return e(n,i,o,u);switch(n.type){case w:return l(n,i,o);case N:case A:return r(n,i,o,u);case k:return t(n,i,o,u)}return G("Uknown type",n.type),null}function e(e,t,r,i){for(var o,l,u=[],s=e.length,a=-1;++a<s;){if(l=e[a],l.tagName===m){if(null!=o)continue;if(l.expression&&!v(l.expression,t,r))continue;o=n(e[a].nodes,t,r,i)}else o=n(l,t,r,i);c(u,o)}return u}function t(n,t,r,i){var o=new re.Fragment;return o.parent=i,o.nodes=e(n.nodes,t,r,o),o}function r(e,t,r,l){var u=e.tagName;if(64!==u.charCodeAt(0))return o(e,t,r,l);var s=e.attr.id;if(u===C&&null==s)return r.nodes;if(x===u){var a,d=t[e.expression];if(null==d)return K("No template node: @"+e.expression),null;if(p(d)===!1)return a=d,n(e.nodes,f(a.nodes,a.nodes,new g(t)),a,l);for(var m=new re.Fragment,b=d.length,w=-1;++w<b;)a=d[w],c(m,n(e.nodes,f(a.nodes,a.nodes,new g(t)),a,l));return m}if(y===u){var k=v(e.expression,t,r);return k?n(e.nodes,t,r,l):null}null==s&&(s=u.substring(1));var A=t.$getNode(s);if(null==A)return null;A.parent&&h(l,A.parent);var E,O=A.nodes;if(void 0!==e.attr.as){var S=e.attr.as;E={type:N,tagName:S,attr:i(e.attr,A.attr,t,r),parent:l,nodes:O},E.attr.as=null}if(null==e.nodes)return E||O;var _=n(e.nodes,f(O,O,new g(t)),A,E||l);return null!=E?(E.nodes=_,E):_}function i(n,e,t,r){if(null==n||null==e)return n||e;var i=u(n,t,r);for(var o in e)i[o]=s(e[o],t,r);return i}function o(e,t,r,i){var o=e.tagName||e.compoName;if(":template"===o){var l=s(e.attr.id,t,r);return ve.templates.register(l,e.nodes),null}if(":import"===o){var l=s(e.attr.id,t,r),a=ve.templates.resolve(e,l);return n(a,t,r,i)}var c={type:e.type,tagName:o,attr:u(e.attr,t,r),expression:s(e.expression,t,r),controller:e.controller,parent:i};return e.nodes&&(c.nodes=n(e.nodes,t,r,c)),c}function l(n,e,t,r){return{type:n.type,content:s(n.content,e,t),parent:r}}function u(n,e,t){var r,i=I(n);for(var o in i)r=i[o],null!=r&&(i[o]=s(r,e,t));return i}function s(n,e,t){var r=-1,i=!1,o=n;if("function"==typeof n&&(i=!0,o=n()),"string"!=typeof o||-1===(r=o.indexOf("@")))return n;for(var l,u=o.substring(0,r),s=o.length,c=91===o.charCodeAt(r+1),f=-1;s>r;){if(f=r,c===!0)r=o.indexOf("]",f),-1===r&&(r=s),f+=2;else for(;s>r&&(l=o.charCodeAt(++r),36===l||95===l||46===l||l>=48&&57>=l||l>=65&&90>=l||l>=97&&122>=l););var d=o.substring(f,r),p=c?v:a,h=p(d,e,t);null!=h&&(u+=h),f=c?r+1:r,r=o.indexOf("@",r),-1===r&&(r=s),u+=o.substring(f,r)}return i?le(u):u}function a(n,e,t){var r=n.indexOf(".");if(-1===r)return G("Merge templates. Accessing node",n),"";var i=n.substring(0,r),o=i.substring(1),l=n.substring(r+1),u=null;return null!=t&&("@attr"===i?u=t.attr:i===t.tagName&&(u=t)),null==u&&(u=e.$getNode(o)),null==u?(K("Merge templates. Node not found",i),""):b(u,l)}function c(n,e){if(null!=e)if("function"!=typeof e.concat){if(e.type===k)return void c(n,e.nodes);if("function"==typeof n.appendChild)return void n.appendChild(e);var t=n.length;if(t>0){var r=n[t-1];r.nextSibling=e}n.push(e)}else for(var i=e.length,o=0;i>o;o++)c(n,e[o])}function f(n,e,t){if(null==e)return t;if(p(e)){for(var r=e.length,i=-1;++i<r;)f(e===n?e[i]:n,e[i],t);return t}var o=e.type;if(o===w)return t;if(o===N){var l=e.tagName;if(null!=l&&64===l.charCodeAt(0)){var u=l.substring(1),s={tagName:e.tagName,parent:d(n,e),nodes:e.nodes,attr:e.attr,expression:e.expression};if(null==t[u])t[u]=s;else{var a=t[u];p(a)?a.push(s):t[u]=[a,s]}return t}}return f(n,e.nodes,t)}function d(n,e){if(e===n)return null;for(var t,r,i=e.parent;;){if(null==i)break;if(i===n&&n.type!==N)break;var o={type:i.type,tagName:i.tagName,attr:i.attr,controller:i.controller,expression:i.expression,nodes:null,parent:null};null==r?t=r=o:(t.parent=o,t=o),i=i.parent}return r}function h(n,e){for(var t=n,r=e;null!=t&&null!=r;){r.tagName&&(t.tagName=r.tagName),r.expression&&(t.expression=r.expression);for(var i in r.attr)t.attr[i]=r.attr[i];t=t.parent,r=r.parent}}function v(n,e,t){return t&&(e.attr=t.attr),ie.eval(n,e,null,e)}function g(n){this.scope=this,this.parent=n}pe=function(e,t,r){"string"==typeof e&&(e=oe(e)),"string"==typeof t&&(t=oe(t));var i=f(t,t,new g);return n(e,i,r)};var m="@else",y="@if",x="@each",C="@placeholder",N=re.NODE,w=re.TEXTNODE,k=re.FRAGMENT,A=re.STATEMENT;g.prototype={parent:null,attr:null,scope:null,$getNode:function(n){for(var e,t=this;null!=t;){if(e=t[n],null!=e)return e;t=t.parent}}}}();var he={},ve={render:function(n,e,t,r,i){return"string"==typeof n&&(n=D.call(he,n)?he[n]:he[n]=oe(n)),null==t&&(t={}),ce(n,e,t,r,i)},compile:oe,parse:oe,build:ce,run:de,merge:pe,registerHandler:te,getHandler:function(n){return null!=n?X[n]:X},registerStatement:function(n,e){Y[n]=d(e)?{render:e}:e},getStatement:function(n){return null!=n?Y[n]:Y},registerAttrHandler:function(n,e,t){d(e)&&(t=e),q[n]=t},getAttrHandler:function(n){return null!=n?q[n]:q},registerUtil:ee,getUtil:Z,$utils:ne,registerUtility:function(n,e){this.registerUtility=this.registerUtil,this.registerUtility(n,e)},getUtility:function(){return this.getUtility=this.getUtil,this.getUtility()},clearCache:function(n){"string"==typeof n?delete he[n]:he={}},Utils:{Expression:ie,getProperty:function(n,e){return G("mask.getProperty is deprecated. Use `mask.obj.get`"),b(n,e)},ensureTmplFn:ae.ensureTemplateFunction},Dom:re,plugin:function(e){n.eval(e)},obj:{get:b,set:x,extend:C},is:{Function:d,String:v,ArrayLike:h},on:H,off:P,delegateReload:function(){},setInterpolationQuotes:ae.setInterpolationQuotes,setCompoIndex:function(n){fe=n},cfg:function(){var n=arguments;if(0===n.length)return $;var e;if(2===n.length)return e=n[0],void($[e]=n[1]);var t=n[0];if("object"==typeof t)for(e in t)$[e]=t[e]}};ve.renderDom=ve.render,function(n){var e;!function(){function t(n){for(var e="";n--;)e+=" ";return e}function r(n,e,r){var o,l;null==e&&(e=0),null==r&&(o=!0,r=[]);var u=r.length;if(n.type===d.FRAGMENT&&(n=n.nodes),n instanceof Array)for(l=0;l<n.length;l++)i(n[l],e,r);else i(n,e,r);var s=t(e);for(l=u;l<r.length;l++)r[l]=s+r[l];return o?r.join(0===f?"":"\n"):void 0}function i(n,e,t){if("function"==typeof n.stringify)return void t.push(n.stringify(c));if("string"==typeof n.content)return void t.push(a(n.content));if("function"==typeof n.content)return void t.push(a(n.content()));if(l(n))return void t.push(o(n)+";");if(u(n)){var i=c?">":" > ";return t.push(o(n)+i),void r(s(n),f,t)}t.push(o(n)+"{"),r(n.nodes,f,t),t.push("}")}function o(n){var e,t,r=n.tagName;null!=n.attr&&(e=n.attr.id||"",t=n.attr["class"]||""),"function"==typeof e&&(e=e()),"function"==typeof t&&(t=t()),e&&(e=-1!==e.indexOf(" ")?"":"#"+e),t&&(t="."+t.split(" ").join("."));var i="";for(var o in n.attr)if("id"!==o&&"class"!==o){var l=n.attr[o];"function"==typeof l&&(l=l()),(c===!1||/[^\w_$\-\.]/.test(l))&&(l=a(l)),i+=" "+o,o!==l&&(i+="="+l)}"div"===r&&(e||t)&&(r="");var u="";return n.expression&&(u="("+n.expression+")"),r+e+t+i+u}function l(n){return null==n.nodes||n.nodes instanceof Array&&0===n.nodes.length}function u(n){return n.nodes&&(n.nodes instanceof Array==!1||1===n.nodes.length)}function s(n){return n.nodes instanceof Array?n.nodes[0]:n.nodes}function a(n){return-1===n.indexOf("'")?"'"+n.trim()+"'":-1===n.indexOf('"')?'"'+n.trim()+'"':'"'+n.replace(/"/g,'\\"').trim()+'"'}e=function(e,t){return null==e?"":("string"==typeof e&&(e=n.parse(e)),null==t?(f=0,c=!0):"number"==typeof t?(f=t,c=0===f):(f=t&&t.indent||4,c=0===f||t&&t.minimizeAttributes),r(e))};var c,f,d=n.Dom}(),n.stringify=e}(ve),function(){ve.registerHandler(":html",{$meta:{mode:"server:all"},render:function(n,e,r){if(this.html=me(this.nodes).text(n,e,this),r.insertAdjacentHTML)return void r.insertAdjacentHTML("beforeend",this.html);if(r.ownerDocument){var i,o=t.createElement("div"),l=t.createDocumentFragment();for(o.innerHTML=this.html,i=o.firstChild;null!=i;)l.appendChild(i),i=i.nextSibling}},toHtml:function(){return this.html||""},html:null})}(),function(n){function e(){}function t(){var e;for(e in this.attr)break;var t=this.nodes;n.registerHandler(e,ge({renderStart:function(){this.nodes=n.merge(t,this.nodes||[],this)}}))}X.define=e,e.prototype={$meta:{serializeNodes:!0},render:t,onRenderStartClient:t}}(ve),function(){var n={},e={get:function(e){return n[e]},resolve:function(e,t){var r=n[t];if(null!=r)return r;for(var i=":template[id="+t+"]",o=e.parent,l=null;null!=o;){if(l=me(o.nodes).filter(i).get(0),null!=l)return l.nodes;o=o.parent}return G("Template was not found",t),null},register:function(e,t){return null==e?void G("`:template` must be define via id attr."):void(n[e]=t)}};ve.templates=e,ve.registerHandler(":template",{render:function(){e.register(this.attr.id,this.nodes)}}),ve.registerHandler(":import",{renderStart:function(){var n=this.attr.id;return null==n?void K("`:import` shoud reference the template via id attr"):void(this.nodes=e.resolve(this,n))}})}(),function(){Y.log={render:function(n,e,t,r,i){var o=ie.evalStatements(n.expression,e,t,i);o.unshift("Mask::Log"),console.log.apply(console,o)}},te("debugger",{render:function(){}})}();var ge=e.Compo=function(r){function i(){null!=s&&null!=s.fn&&(s.fn.compo=function(n){if(0===this.length)return null;var e=ne.resolveCompo(this[0]);return null==n?e:b(e,g(n,c.CONTROLLER,"up"))},s.fn.model=function(n){var e=this.compo(n);if(null==e)return null;for(var t=e.model;null==t&&e.parent;)e=e.parent,t=e.model;return t},function(){var n=["append","prepend","before","after"];["appendMask","prependMask","beforeMask","afterMask"].forEach(function(e,t){s.fn[e]=function(e,i,o,l){if(0===this.length)return this;this.length>1,null==o&&(o=2>t?this.compo():this.parent().compo());var u=!1;null==o&&(o={},u=!0),null==o.components&&(o.components=[]);for(var s=o.components,a=s.length,c=r.render(e,i,l,null,o),f=this[n[t]](c),d=s.length;d>a;a++)V.signal.emitIn(s[a],"domInsert");return f}})}(),function(){function n(n,e){w(e)}function e(n,e){k(e)}var t=s.fn.remove,r=s.fn.empty;s.fn.removeAndDispose=function(){return this.each(n),t.call(this)},s.fn.emptyAndDispose=function(){return this.each(e),r.call(this)}}())}function o(){}var l,u,s,a,c=r.Dom,h=r.Utils.ensureTmplFn;!function(){function t(){for(var n,e=arguments.length;--e>-1;)if(n=u(arguments[e]),null!=n)return n;return null}l=function(n){return"string"!=typeof n?n:h(n)},u=function(n){return r[n]||o[n]||i[n]};var r=n,i=n.atma||{},o=e||{};s=t("jQuery","Zepto","$"),a=t("Class")}();var g,m;!function(){function n(n){return function(t){return e(t,n)}}function e(n,t,r){if("string"!=typeof n)return!1;if(null==r&&(r=0),r=n.indexOf(t,r),-1===r)return!1;if(r>0&&n.charCodeAt(r-1)>32)return e(n,t,r+1);var i=n.length,o=t.length;return i-o>r&&n.charCodeAt(r+o)>32?e(n,t,r+1):!0}g=function(e,t,r){if(null==e&&K("<compo>selector is undefined",t),"object"==typeof e)return e;var i,o,l;if(null==i)switch(e[0]){case"#":i="id",e=e.substring(1),o="attr";break;case".":i="class",e=n(e.substring(1)),o="attr";break;default:i=t===c.SET?"tagName":"compoName"}return l="up"===r?"parent":t===c.SET?"nodes":"components",{key:i,prop:o,selector:e,nextKey:l}},m=function(n,e,t){v(e)&&(null==t&&(t=c[n.compoName?"CONTROLLER":"SET"]),e=g(e,t));var r=e.prop?n[e.prop]:n;return null==r?!1:d(e.selector)?e.selector(r[e.key]):null!=e.selector.test?e.selector.test(r[e.key]):r[e.key]==e.selector}}();var b;!function(){b=function(n,e){if(p(n)){for(var t,r=n.length,i=-1;++i<r;)if(t=b(n[i],e),null!=t)return t;return null}return m(n,e)?n:(n=n[e.nextKey],null==n?null:b(n,e))}}();var x,w,k;!function(){x=function(n,e,t){return null!=X&&(e=X(e)),null!=s?s(n).on(e,t):null!=n.addEventListener?n.addEventListener(e,t,!1):void(n.attachEvent&&n.attachEvent("on"+e,t))},w=function(n){if(n.hasAttribute("x-compo-id")){var e=n.getAttribute("x-compo-id"),t=ne.getByID(e);if(t){if(null==t.$||1===t.$.length)return j(t),void I(t);var r=M.call(t.$,n);-1!==r&&T.call(t.$,r,1)}}k(n)},k=function(n){for(var e=n.firstChild;null!=e;)1===e.nodeType&&w(e),e=e.nextSibling}}();var A,E;!function(){A=function(n,e){return n.filter(e).add(n.find(e))},E=function(n,e,t,r){return null==t?n.on(e,r):(n.on(e,t,r).filter(t).on(e,r),n)}}();var j,I,D,R,$,L,F,U,H;!function(){function n(n){var e=n.template;if(null==e){if(e=n.attr.template,null==e)return null;delete n.attr.template}if("object"==typeof e)return e;if(v(e)){if(35===e.charCodeAt(0)&&/^#[\w\d_-]+$/.test(e)){var i=t.getElementById(e.substring(1));if(null==i)return G("Template not found by id:",e),null;e=i.innerHTML}return r.parse(e)}return G("Invalid template",typeof e),null}j=function(n){null!=n.dispose&&n.dispose(),ne.removeCompo(n);for(var e=n.components,t=null==e?0:e.length;--t>-1;)j(e[t])},I=function(n){var e=n.parent;if(null!=e){var t,r=n.$,i=e.$||e.elements;if(i&&r){var o,l,u=r.length;for(t=i.length;--t>-1;)for(o=i[t],l=u;--l>-1;)if(o===r[l]){i.splice(t,1);break}}var s=e.components;if(null!=s){for(t=s.length;--t>-1;)if(s[t]===n){s.splice(t,1);break}-1===t&&G("<compo:remove> - i`m not in parents collection",n)}}},D=function(e){if(null==e.nodes)return void(e.nodes=n(e));var t=e.meta.template;if(null!=t&&"replace"!==t){var r=n(e);return"merge"===t?void(e.nodes=pe(r,e.nodes,e)):"join"===t?void(e.nodes=[r,e.nodes]):void K("Invalid meta.nodes behaviour",t)}},R=function(n,e){if(null==n.dispose)return void(n.dispose=e);var t=n.dispose;n.dispose=function(){e.call(this),t.call(this)}},$=function(n){if(n.$)return void n.$.remove();var e=n.elements;if(e)for(var t=-1,r=e.length;++t<r;)e[t].parentNode&&e[t].parentNode.removeChild(e[t]);else{var i=n.components;if(i)for(var t=-1,r=i.length;++t<r;)$(i[t])}},L=function(n,e,t){var r=V.pause(e,t);n.then(r,function(n){F(e,n),r()})},F=function(n,e){n.nodes=r.parse('.-mask-compo-errored > "~[.]"'),n.model=e.message||String(e),n.renderEnd=_},function(){function n(n){return function(e,t){var i,o,l,u,s=e.attr;for(i in n)if(o=n[i],l=s[i],u=o(e,l,t),null!=u)return r(e,u,i,l),!1;return!0}}function e(n,e,r,l){var u=63===e.charCodeAt(0),s=u?e.substring(1):e,a=s.replace(/-(\w)/g,t),c=r;return"string"==typeof r?c=i[r]:r instanceof RegExp?c=o.regexp(r):"function"==typeof r?c=r:null==r&&(c=o.any()),null==c?void K("Function expected for the attr. handler",e):(n[a]=null,n=null,void(l[s]=function(n,e,t){if(null==e)return u?null:Error("Expected");var r=c.call(n,e,n,t,s);return r instanceof Error?r:(n[a]=r,null)}))}function t(n,e){return e.toUpperCase()}function r(n,e,t,r){e.message=n.compoName+" - attribute `"+t+"`: "+e.message,F(n,e),K(e.message,". Current: ",r)}U=function(t){null==t.meta&&(t.meta={attributes:null,cache:null,mode:null});var r=t.meta.attributes,i=null;if(r){var o={};for(var l in r)e(t,l,r[l],o);i=n(o)}t.meta.handleAttributes=i},H=function(n,e){var t=n.meta&&n.meta.handleAttributes;return null==t?!0:t(n,e)};var i={string:function(n){return"string"==typeof n?n:Error("String")},number:function(n){var e=Number(n);return e===e?e:Error("Number")},"boolean":function(n,e,t,r){return"boolean"==typeof n?n:n===r?!0:"true"===n||"1"===n?!0:"false"===n||"0"===n?!1:Error("Boolean")}},o={regexp:function(n){return function(e){return n.test(e)?e:Error("RegExp")}},any:function(){return function(n){return n}}}}()}();var P,B;!function(){P=function(n){var e,t,r=n.length,i=n[r-1];r>1&&W(i,f.call(n,0,r-1)),null==i&&(i={});var o=u("include");null!=o&&(i.__resource=o.url);i.attr;for(t in i.attr)i.attr[t]=l(i.attr[t]);var s=i.slots;for(t in s)"string"==typeof s[t]&&(s[t]=i[s[t]]);U(i),e=i.hasOwnProperty("constructor")?i.constructor:function(){},e=B(e,i);for(t in Q)null==i[t]&&(i[t]=Q[t]);return e.prototype=i,i=null,e},B=function(n,e){var t=e.compos,r=e.pipes,i=e.scope,o=e.attr;return null==t&&null==r&&null==o&&null==i?n:function(){null!=t&&(this.compos=N(this.compos)),null!=r&&Z.addController(this),null!=o&&(this.attr=N(this.attr)),null!=i&&(this.scope=N(this.scope)),null!=n&&n.call(this)}}}();var W;!function(){function n(o,l,u){if(null!=o&&null!=l){if("node"===u){var s=o.template||o.nodes,a=l.template||l.nodes;null==s||null==a?o.template=s||a:o.nodes=r.merge(a,s,o)}var c,f,d,p=!1;for(var h in l)if(c=l[h],null!=c&&"constructor"!==h&&("node"!==u||"template"!==h&&"nodes"!==h))if(f=typeof c,null!=o[h]){if("node"===u){var v="renderStart"===h||"renderEnd"===h||"emitIn"===h||"emitOut"===h||"components"===h||"nodes"===h||"template"===h||"find"===h||"closest"===h||"on"===h||"remove"===h||"slotState"===h||"signalState"===h||"append"===h||"appendTo"===h;if(v===!0)continue}if("pipes"!==u)if("function"!==f){if("object"===f){switch(h){case"slots":case"pipes":case"events":case"attr":n(o[h],c,h);continue}t(o[h],c)}}else d=!1,"slots"===u||"events"===u||"pipe"===u?d=!0:"node"!==u||"onRenderStart"!==h&&"onRenderEnd"!==h||(d=!0),o[h]=i(o[h],c,d),p=!0;else n(o[h],c,"pipe")}else o[h]="object"===f?e(c):c;p===!0&&(null!=o.super&&K("`super` property is reserved. Dismissed. Current prototype",o),o.super=null)}}/*! Circular references are not handled */
function e(n){if(null==n)return null;if("object"!=typeof n)return n;if(p(n)){for(var t=n.length,r=-1,i=new Array(t);++r<t;)i[r]=e(n[r]);return i}var o,l,u=N(n);for(o in u)l=u[o],null!=l&&"object"==typeof l&&(u[o]=e(l));return u}function t(n,e){var r,i,o;for(var o in e)r=n[o],i=e[o],null!=r?y(r)&&y(i)&&t(r,i):n[o]=i}function i(n,e,t){function r(){var n=u._fn||(u._fn=i(u._fn_chain));return n.apply(this,arguments)}if("compoInheritanceWrapper"===n.name)return n._fn_chain.push(e),n;var i=t===!0?l:o,u=r;return u._fn_chain=[n,e],u._fn=null,u}function o(n){for(var e=n.length,t=n[--e];--e>-1;)t=u(n[e],t);return t}function l(n){var e=n.length;return function(){for(var t,r,i,o=e;--o>-1;)r=n[o],null!=r&&(i=S(r,this,arguments),void 0!==i&&(t=i));return t}}function u(n,e){return function(){this.super=e;var t=S(n,this,arguments);return this.super=null,t}}function s(n){var e=n.length;return function(){for(var t=e;--t>-1;)n[t].apply(this,arguments)}}W=function(e,t){for(var r,i=t.length,o=i,l=[];--o>-1;)r=t[o],"string"==typeof r&&(r=ve.getHandler(r)),null!=r?("function"==typeof r&&(l.push(r),r=r.prototype),n(e,r,"node")):K("Base component not defined",t[o]);o=-1,i=l.length,i>0&&(e.hasOwnProperty("constructor")&&l.unshift(e.constructor),e.constructor=s(l))}}(r.merge);var z;!function(){z=function(n){return null==n||"function"!=typeof n.then?!1:d(n.isBusy)?n.isBusy():d(n.state)?"pending"===n.state():(G("Class or jQuery deferred interface expected"),!1)}}();var V,Q,Y={select:function(n,e){for(var t in e){var r=e[t],i=null,o=null;if(r instanceof Array&&(o=r[0],i=r.splice(1)),"string"==typeof r&&(o=r),null==r||null==o)return K("Unknown component child",t,e[t]),void G("Is this object shared within multiple compo classes? Define it in constructor!");var l=o.indexOf(":"),u=o.substring(0,l);u=V.config.selectors[u],null==u?n.compos[t]=n.$[0].querySelector(o):(o=o.substring(++l).trim(),n.compos[t]=u(n,o));var s=n.compos[t];null!=i&&(null!=s.$&&(s=s.$),q.on(n,i,s))}}},q={on:function(n,e,t){null==t&&(t=n.$);for(var r,i=e instanceof Array,o=i?e.length:1,l=0;i?o>l:1>l;l++)if(r=i?e[l]:e,r instanceof Array)null!=X&&(r[0]=X(r[0])),t.on.apply(t,r);else for(var u in r){var s,a,c="string"==typeof r[u]?n[r[u]]:r[u],f=u.indexOf(":");-1!==f?(s=u.substring(0,f),a=u.substring(f+1).trim()):s=u,null!=X&&(s=X(s)),E(t,s,a,O(c,n))}}},X=null,J=function(){var n=function(){if(null==t)return!1;if("createTouch"in t)return!0;try{return!!t.createEvent("TouchEvent").initTouchEvent}catch(n){return!1}}();return{touch:function(e){return n===!1?e:"click"===e?"touchend":"mousedown"===e?"touchstart":"mouseup"===e?"touchend":"mousemove"===e?"touchmove":e}}}(),Z=function(){function n(n,e){return function(t){new l(n).emit(e,t)}}function e(n,e){return null==e.pipes[n]?void K("Controller has no pipes to be added to collection",n,e):(null==u[n]&&(u[n]=[]),void u[n].push(e))}function t(n,e){for(var t=u[n],r=t.length;--r>-1;)t[r]===e&&t.splice(r,1)}function i(){var n=this,e=n.pipes;for(var r in e)t(r,n)}function o(n){var t=n.pipes;for(var r in t)e(r,n);V.attachDisposer(n,i.bind(n))}function l(n){return this instanceof l==!1?new l(n):(this.pipeName=n,this)}var u={};return r.registerAttrHandler("x-pipe-signal","client",function(e,t,r,i,o){for(var l,u=t.split(";"),s=u.length,a=-1;++a<s;)if(l=u[a].trim(),""!==l){var c,f,d=l.indexOf(":"),p=l.substring(0,d),h=l.substring(d+1).trim(),v=h.indexOf(".");if(-1===v)return void K('define pipeName "click: pipeName.pipeSignal"');c=h.substring(0,v),f=h.substring(++v);var g=n(c,f);x(o,p,g)}}),l.prototype={constructor:l,emit:function(n){var e,t=u[this.pipeName],r=this.pipeName;if(null!=t){2===arguments.length&&p(arguments[1])?e=arguments[1]:arguments.length>1&&(e=f.call(arguments,1));for(var i,o,l,s,a=t.length;-1!==--a;)i=t[a],o=i.pipes[r],null!=o&&(l=o[n],d(l)&&(l.apply(i,e),s=!0))}}},l.addController=o,l.removeController=i,{addController:o,removeController:i,pipe:l}}(),ne=function(){var n={};return{create:function(e){return null==e.ID?void G("Component should have an ID"):void(n[e.ID]=e)},resolveCompo:function(e){if(null==e)return null;var t,r,i;do{if(r=e.getAttribute("x-compo-id"),r&&(null==t&&(t=r),i=n[r],null!=i&&(i=V.find(i,{key:"ID",selector:t,nextKey:"components"}),null!=i)))return i;e=e.parentNode}while(e&&1===e.nodeType);return null},removeCompo:function(e){null!=e.ID&&delete n[e.ID]},getByID:function(e){return n[e]}}}();!function(){V=function(){return this instanceof V?void 0:P(arguments)},C(V,{create:function(){return P(arguments)},createClass:function(){var n=P(arguments),e=n.prototype;return e.Construct=n,a(e)},render:function(n,e,t,i){D(n);var o=[];return r.render(null==n.tagName?n.nodes:n,e,t,i,n,o),n.$=s(o),null!=n.events&&q.on(n,n.events),null!=n.compos&&Y.select(n,n.compos),n},initialize:function(n,e,t,i,o){var l;null==i&&(t&&null!=t.nodeType?(i=t,t=null):e&&null!=e.nodeType&&(i=e,e=null)),"string"==typeof n&&(l=n,n=r.getHandler(l),n||K("Compo not found:",n));var u={controller:n,type:c.COMPONENT,tagName:l};null==o&&null!=i&&(o=ne.resolveCompo(i)),null==o&&(o=new c.Component);var s=r.render(u,e,t,null,o),a=o.components[o.components.length-1];return null!=i&&(i.appendChild(s),V.signal.emitIn(a,"domInsert")),a},find:function(n,e){return b(n,g(e,c.CONTROLLER,"down"))},closest:function(n,e){return b(n,g(e,c.CONTROLLER,"up"))},dispose:j,ensureTemplate:D,attachDisposer:R,config:{selectors:{$:function(n,e){var t=A(n.$,e);return t},compo:function(n,e){var t=V.find(n,e);return t}},setDOMLibrary:function(n){s!==n&&(s=n,i())},getDOMLibrary:function(){return s},eventDecorator:function(n){return"function"==typeof n?void(X=n):"string"==typeof n?void(X=J[n]):"boolean"==typeof n&&n===!1?void(X=null):void 0}},pipe:Z.pipe,resource:function(n){for(var e=n;null!=e;){if(e.resource)return e.resource;e=e.parent}return include.instance()},Dom:{addEventListener:x}}),function(){function n(n,e,t){return null==n[e]&&(n[e]=[]),n[e].push(t),n}function e(n,e,t){var r=n[e];if(null!=r)for(var i,o=0,l=r.length;l>o;o++)i=r[o],null!=i&&(r[o]=null,null!=t?i.apply(this,t):i())}var t={done:function(e){return n(this,"_cbs_done",e)},fail:function(e){return n(this,"_cbs_fail",e)},always:function(e){return n(this,"_cbs_always",e)},resolve:function(){this.async=!1,e(this,"_cbs_done",arguments),e(this,"_cbs_always",arguments)},reject:function(){this.async=!1,e(this,"_cbs_fail",arguments),e(this,"_cbs_always")},_cbs_done:null,_cbs_fail:null,_cbs_always:null},r={async:!0,await:function(n){this.resume=n}};V.pause=function(n,e){return null==e.async&&(e.defers=[],C(e,t)),e.async=!0,e.defers.push(n),C(n,r),function(){V.resume(n,e)}},V.resume=function(n,e){n.resume&&n.resume(),n.async=!1;for(var t,r=!1,i=e.defers,o=i.length,l=-1;++l<o;)t=i[l],t!==n?r=r||null!=t:i[l]=null;r===!1&&e.resolve()}}(),Q={type:c.CONTROLLER,__resource:null,tagName:null,compoName:null,nodes:null,components:null,expression:null,attr:null,model:null,slots:null,pipes:null,compos:null,events:null,async:!1,await:null,meta:{mode:null,modelMode:null,attributes:null,serializeNodes:null,handleAttributes:null},onRenderStart:null,onRenderEnd:null,render:null,renderStart:function(n,e,t){if(1===arguments.length&&null!=n&&n instanceof Array==!1&&null!=n[0]){var r=arguments[0];n=r[0],e=r[1],t=r[2]}if(H(this,n)!==!1&&(D(this),d(this.onRenderStart))){var i=this.onRenderStart(n,e,t);void 0!==i&&z(i)&&L(i,this,e)}},renderEnd:function(n,e,t,r){if(1===arguments.length&&n instanceof Array==!1){var i=arguments[0];n=i[0],e=i[1],t=i[2],r=i[3]}ne.create(this,n),this.$=s(n),null!=this.events&&q.on(this,this.events),null!=this.compos&&Y.select(this,this.compos),d(this.onRenderEnd)&&this.onRenderEnd(n,e,t,r)},appendTo:function(n){var e="string"==typeof n?t.querySelector(n):n;if(null==e)return G("Compo.appendTo: parent is undefined. Args:",arguments),this;for(var r=this.$,i=0,o=r.length;o>i;i++)e.appendChild(r[i]);return this.emitIn("domInsert"),this},append:function(n,e,t){var i;if(null==this.$){var o="string"==typeof n?r.compile(n):n;return i=t?b(this,g(t,c.CONTROLLER,"down")):this,null==i.nodes?(this.nodes=o,this):(i.nodes=[this.nodes,o],this)}var l=r.render(n,e,null,null,this);return i=t?this.$.find(t):this.$,i.append(l),this.emitIn("domInsert"),this},find:function(n){return b(this,g(n,c.CONTROLLER,"down"))},closest:function(n){return b(this,g(n,c.CONTROLLER,"up"))},on:function(){var n=f.call(arguments);return arguments.length<3?(K("Invalid Arguments Exception @use .on(type,selector,fn)"),this):(null!=this.$&&q.on(this,[n]),null==this.events?this.events=[n]:p(this.events)?this.events.push(n):this.events=[n,this.events],this)},remove:function(){return $(this),I(this),j(this),this.$=null,this},slotState:function(n,e){return V.slot.toggle(this,n,e),this},signalState:function(n,e){return V.signal.toggle(this,n,e),this},emitOut:function(n){return V.signal.emitOut(this,n,this,arguments.length>1?f.call(arguments,1):null),this},emitIn:function(n){return V.signal.emitIn(this,n,this,arguments.length>1?f.call(arguments,1):null),this}},V.prototype=Q}(),function(){function n(e,t,r,i,o){if(null==e)return!1;var l=!1,u=null!=e.slots&&e.slots[t];if("string"==typeof u&&(u=e[u]),"function"==typeof u){l=!0;var s=null!=e.slots.__disabled&&e.slots.__disabled[t];if(s!==!0){var a=null==i?u.call(e,r):u.apply(e,[r].concat(i));if(a===!1)return!0;null!=a&&"object"==typeof a&&null!=a.length&&(i=a)}}if(-1===o&&null!=e.parent)return n(e.parent,t,r,i,o)||l;if(1===o&&null!=e.components)for(var c,f=e.components,d=f.length,p=0;d>p;p++)c=n(f[p],t,r,i,o),!l&&(l=c);return l}function e(n,t,r,i){if(null==n)return!1;var o=n.slots;if(null!=o&&null!=o[t]&&("string"==typeof o[t]&&(o[t]=n[o[t]]),"function"==typeof o[t])){if(i!==!0)return!0;if(null==o.__disabled||o.__disabled[t]!==!0)return!0}if(-1===r&&null!=n.parent)return e(n.parent,t,r);if(1===r&&null!=n.components)for(var l=0,u=n.components.length;u>l;l++)if(e(n.components[l],t,r))return!0;return!1}function t(t,r){return e(t,r,-1)===!1?null:function(e){var i=arguments.length>1?f.call(arguments,1):null;n(t,r,e,i,-1)}}function i(n,e,t){var r=n.slots;null!=r&&r.hasOwnProperty(e)!==!1&&(null==r.__disabled&&(r.__disabled={}),r.__disabled[e]=t===!1)}function o(n,e,t){if(i(n,e,t),null!=n.components)for(var r=0,l=n.components.length;l>r;r++)o(n.components[r],e,t)}function l(n,e,t){return null==n.$?void G("Controller has no elements to toggle state"):void s().add(n.$.filter("[data-signals]")).add(n.$.find("[data-signals]")).each(function(n,r){var i=r.getAttribute("data-signals");null!=i&&-1!==i.indexOf(e)&&r[t===!0?"removeAttribute":"setAttribute"]("disabled","disabled")})}function u(n,e,t){for(var r=n,u=n;null!=(r=r.parent);)i(r,e,t),null!=r.$&&0!==r.$.length&&(u=r);o(n,e,t),l(u,e,t)}function a(n,t,r){i(n,t,r),(r||!e(n,t,-1,!0)&&!e(n,t,1,!0))&&l(n,t,r)}r.registerAttrHandler("x-signal","client",function(n,e,r,i,o,l){for(var u,s=e.split(";"),a="",c=s.length,f=-1;++f<c;)if(u=s[f].trim(),""!==u){var d=u.indexOf(":"),p=u.substring(0,d),h=u.substring(d+1).trim(),v=t(l,h);v&&(a+=","+h+",",x(o,p,v))}""!==a&&o.setAttribute("data-signals",a)}),C(V,{signal:{toggle:u,emitOut:function(e,t,r,i){n(e,t,r,i,-1)},emitIn:function(e,t,r,i){n(e,t,r,i,1)},enable:function(n,e){u(n,e,!0)},disable:function(n,e){u(n,e,!1)}},slot:{toggle:a,enable:function(n,e){a(n,e,!0)},disable:function(n,e){a(n,e,!1)},invoke:function(n,e,t,r){var i=n.slots;return null==i||"function"!=typeof i[e]?(K("Slot not found",e,n),null):null==r?i[e].call(n,t):i[e].apply(n,[t].concat(r))}}})}();var ee;return function(n){function e(n,e,t){if(null==n)return t||n;for(var r=n.length,i=-1;++i<r;)e.call(t||n,n[i],i);return t||n}function t(n,e,t){if(null==n)return-1;for(var r=n.length,i=-1;++i<r;)if(e.call(t||n,n[i],i)===!0)return i;return-1}if(null!=n){V.DomLite=ee=function(n){return this instanceof ee==!1?new ee(n):this.add(n)},null==s&&(s=ee);var r=ee.fn={constructor:ee,length:0,add:function(n){if(null==n)return this;if(p(n)===!0)return e(n,this.add,this);var t=n.nodeType;return 11===t?e(n.childNodes,this.add,this):null==t?"number"==typeof n.length?e(n,this.add,this):(G("Uknown domlite object"),this):(this[this.length++]=n,this)},on:function(){return o.call(this,l,a,arguments)},off:function(){return o.call(this,u,c,arguments)},find:function(n){return e(this,function(e){this.add(d.call(e,n))},new ee)},filter:function(n){return e(this,function(e){h(e,n)===!0&&this.add(e)},new ee)},parent:function(){var n=this[0];return new ee(n&&n.parentNode)},children:function(n){var t=e(this,function(n){this.add(n.childNodes)},new ee);return null==n?t:t.filter(n)},closest:function(n){for(var e=this[0],t=new ee;null!=e&&null!=e.parentNode;)if(e=e.parentNode,h(e,n))return t.add(e);return t},remove:function(){return e(this,function(n){n.parentNode.removeChild(n)})}};!function(){function n(n,e,t){null!=n&&null!=t&&n.insertBefore(t,e)}function t(e,t,r){var i=null!=t?t.nextSibling:null;n(e,i,r)}var i={append:function(n,e){t(n,n.lastChild,e)},prepend:function(e,t){n(e,e.firstChild,t)},after:function(n,e){t(n.parentNode,n,e)},before:function(e,t){n(e.parentNode,e,t)}};e(["append","prepend","before","after"],function(n){var t=i[n];r[n]=function(n){var r=p(n);return e(this,function(i){return r?void e(n,function(n){t(i,n)}):void t(i,n)})}})}();var o,l,u,a,c,f=n.documentElement,d=f.querySelectorAll,h=function(){var n=f.webkitMatchesSelector||f.mozMatchesSelector||f.msMatchesSelector||f.oMatchesSelector||f.matchesSelector;return function(e,t){return null==e||1!==e.nodeType?!1:n.call(e,t)}}();!function(){function n(n,t,r,i){return e(n,function(n){t.call(n,r,i,!1)})}o=function(n,t,r){var i,o=r.length;return 2===o&&(i=n),3===o&&(i=t),null!=i?e(this,function(n){i.apply(ee(n),r)}):(K("`DomLite.on|off` - invalid arguments count"),this)},l=function(e,r){return n(this,t,e,r)},u=function(e,t){return n(this,r,e,t)},a=function(n,e,t){function r(n){var r=n.target,i=n.currentTarget;if(i!==r)for(;null!=r&&r!==i;){if(h(r,e))return void t(n);r=r.parentNode}}return(t._guards||(t._guards=[])).push(r),l.call(this,n,r)},c=function(n,t,r){return e(r._quards,function(e){u.call(this,n,e)},this)};var t=f.addEventListener,r=f.removeEventListener}(),function(){var n=null!=f.classList,i=n===!0?function(n,e){return n.classList.contains(e)}:function(n,e){return-1!==(" "+n.className+" ").indexOf(" "+e+" ")};r.hasClass=function(n){return-1!==t(this,function(e){return i(e,n)})};var o;!function(){function n(n,e){n.className+=" "+e}function e(n,e){n.className=(" "+n.className+" ").replace(" "+e+" "," ")}o={add:function(e,t){i(e,t)===!1&&n(e,t)},remove:function(n,t){i(n,t)===!0&&e(n,t)},toggle:function(t,r){var o=i(t,r)===!0?e:n;o(t,r)}}}(),e(["add","remove","toggle"],function(t){var i=n===!1?o[t]:function(n,e){var r=n.classList;r[t].call(r,e)};r[t+"Class"]=function(n){return e(this,function(e){i(e,n)})}})}(),function(){var t=function(e){var t=n.createEvent("Event");return t.initEvent(e,!0,!0),t},i=function(e,r){if(null==r)return t(e);var i=n.createEvent("CustomEvent");return i.initCustomEvent(e,!0,!0,r),i},o=function(n,e){n.dispatchEvent(e)};r.trigger=function(n,t){var r=i(n,t);return e(this,function(n){o(n,r)})}}(),function(){r.attr=function(n,t){return void 0===t?this[0]&&this[0].getAttribute(n):e(this,function(e){e.setAttribute(n,t)})},r.removeAttr=function(n){return e(this,function(e){e.removeAttribute(n)})}}(),Object.setPrototypeOf?Object.setPrototypeOf(r,Array.prototype):r.__proto__&&(r.__proto__=Array.prototype),ee.prototype=r,i()}}(n.document),i(),r.registerHandler(":slot",o),o.prototype={constructor:o,renderEnd:function(){this.slots={},this.expression=this.attr.on,this.slots[this.attr.signal]=this.handle},handle:function(){var e=this.expression;r.Utils.Expression.eval(e,this.model,n,this)}},V}(ve),me=e.jmask=ve.jmask=function(n){function e(n){return"string"!=typeof n?n:m(n)}function r(n){return this instanceof r==!1?new r(n):null==n?this:n.type===f.SET?n:this.add(n)}var i,o,f=n.Dom,p=n.render,g=n.parse,m=n.Utils.ensureTmplFn,y=(n.Compo||ge).signal.emitIn;!function(){i=function(n,e){if(h(n)===!1)return void e(n);for(var t=n.length,r=-1;++r<t;)e(n[r],r)},function(){function n(n,t){return n===t?(e=!0,0):1}o=function(t){if(e=!1,t.sort(n),e===!1)return t;for(var r=[],i=0,o=0,l=t.length-1;l>i;)t[i++]===t[i]&&(r[o++]=i);for(;o--;)t.splice(r[o],1);return t};var e=!1}()}();var b,x;!function(){function n(n){return function(t){return e(t,n)}}function e(n,t,r){if("string"!=typeof n)return!1;if(null==r&&(r=0),r=n.indexOf(t,r),-1===r)return!1;if(r>0&&n.charCodeAt(r-1)>32)return e(n,t,r+1);var i=n.length,o=t.length;return i-o>r&&n.charCodeAt(r+o)>32?e(n,t,r+1):!0}function t(n,e,t){for(var r,i=!1,o=!1;t>e&&(r=n.charCodeAt(e),(34===r||39===r)&&(i=!i),92===r&&(o=!o),!(46===r||35===r||91===r||93===r||62===r||33>r)||i===!0||o===!0);)e++;return e}b=function(e,u,s){if(null==e&&K("selector is null for the type",u),"object"==typeof e)return e;var a,c,d,p,h,v,g,m,y,b,x,C=0,N=e.length;for(a="up"===s?r:u===f.SET?i:o;N>C;)h=e.charCodeAt(C),33>h?C++:62!==h?(v=t(e,C+1,N),46===h?(c="class",d=l,p=n(e.substring(C+1,v))):35===h?(c="id",d=l,p=e.substring(C+1,v)):91===h?(b=e.indexOf("=",C),d=l,c=e.substring(C+1,b),h=e.charCodeAt(b+1),x=34===h||39===h?2:1,p=e.substring(b+x,v-x+1),v++):(null!=g&&(g.next={type:"any",matcher:null},y=g,g=null),d=null,c=u===f.SET?"tagName":"compoName",p=e.substring(C,v)),C=v,null!=g?(null==g.filters&&(g.filters=[]),g.filters.push({key:c,selector:p,prop:d})):(g={key:c,prop:d,selector:p,nextKey:a,filters:null},null==m&&(m=g),null!=y&&(y.next.matcher=g))):(null==g?m=g={selector:"__scope__",nextKey:a,filters:null,next:{type:"children",matcher:null}}:g.next={type:"children",matcher:null},y=g,g=null,C++);return y&&y.next&&(y.next.matcher=g),m},x=function(n,e,t){if("string"==typeof e&&(null==t&&(t=f[n.compoName?"CONTROLLER":"SET"]),e=b(e,t)),"*"===e.selector)return!0;var r=e.prop?n[e.prop]:n,i=!1;if(null==r)return!1;if("function"==typeof e.selector?i=e.selector(r[e.key]):null!=e.selector.test?e.selector.test(r[e.key])&&(i=!0):r[e.key]===e.selector&&(i=!0),i===!0&&null!=e.filters)for(var o,l=0,u=e.filters.length;u>l;l++)if(o=e.filters[l],x(n,o,t)===!1)return!1;return i};var r="parent",i="nodes",o="components",l="attr"}();var w,A,E,O,S;!function(){w=function(n,e){if(null==e)return n;var t=[];return i(n,function(n){x(n,e)&&t.push(n)}),t},A=function(n,e,t,r){return null==n?t:(null==t&&(t=[]),null==r&&("__scope__"===e.selector?(r=!1,e=e.next.matcher):r=!0),i(n,function(n){if(x(n,e)===!1)return void(null==e.next&&r!==!1&&A(n[e.nextKey],e,t,r));if(null==e.next)return t.push(n),void(r===!0&&A(n[e.nextKey],e,t,r));var i=e.next;r="children"!==i.type,A(n[e.nextKey],i.matcher,t,r)}),t)},E=function(n,e){var t={type:1,tagName:1,compoName:1,controller:1},r={parent:e};for(var i in n)1===t[i]&&(r[i]=n[i]);null!=n.attr&&(r.attr=N(n.attr));var o=n.nodes;if(null!=o&&o.length>0)if(h(o)===!1)r.nodes=[E(o,r)];else{r.nodes=[];for(var l=o.length,u=0;l>u;u++)r.nodes[u]=E(o[u],r)}return r},O=function(n){for(var e,t=n;null!=t;)e=t,t=t.nodes&&t.nodes[0];return e},S=function(n,e,t,r){if(f.TEXTNODE===n.type)return d(n.content)?n.content("node",e,t,null,r):n.content;var i="";if(null!=n.nodes)for(var o,l=0,u=n.nodes.length;u>l;l++)o=n.nodes[l],i+=S(o,e,t,r);return i}}();var _=r.prototype={constructor:r,type:f.SET,length:0,components:null,add:function(n){var e,t;if("string"==typeof n&&(n=g(n)),h(n)){for(e=0,t=n.length;t>e;e++)this.add(n[e]);return this}"function"==typeof n&&null!=n.prototype.type&&(n={controller:n,type:f.COMPONENT});var r=n.type;if(!r)return console.error("Only Mask Node/Component/NodeText/Fragment can be added to jmask set",n),this;if(r===f.FRAGMENT){var i=n.nodes;for(e=0,t=i.length;t>e;)this[this.length++]=i[e++];return this}if(r===f.CONTROLLER){if(null!=n.nodes&&n.nodes.length)for(e=n.nodes.length;0!==e;)n.nodes[--e].parent=n;null!=n.$&&(this.type=f.CONTROLLER)}return this[this.length++]=n,this},toArray:function(){return Array.prototype.slice.call(this)},render:function(n,e,r,i){if(this.components=[],1===this.length)return p(this[0],n,e,r,i||this);null==r&&(r=t.createDocumentFragment());for(var o=0,l=this.length;l>o;o++)p(this[o],n,e,r,i||this);return r},prevObject:null,end:function(){return this.prevObject||this},pushStack:function(n){var e;return e=r(n),e.prevObject=this,e},controllers:function(){return null==this.components&&console.warn("Set was not rendered"),this.pushStack(this.components||[])},mask:function(e){var t;if(null!=e)return this.empty().append(e);if(arguments.length)return this;if(0===this.length)t=new f.Node;else if(1===this.length)t=this[0];else{t=new f.Fragment,t.nodes=[];for(var r=-1;++r<this.length;)t.nodes[r]=this[r]}return n.stringify(t)},text:function(n,e,t){if("string"==typeof n&&1===arguments.length){for(var r,i=[new f.TextNode(n)],o=0,l=this.length;l>o;o++)r=this[o],r.nodes=i;return this}for(var r,u="",o=0,l=this.length;l>o;o++)r=this[o],u+=S(r,n,e,t);return u}};return k(["append","prepend"],function(n){r.prototype[n]=function(e){for(var t,i,o=r(e),l=0,u=this.length;u>l;l++){i=this[l],t=o.toArray();for(var s=0,a=t.length;a>s;s++)t[s].parent=i;i.nodes=null!=i.nodes?"append"===n?i.nodes.concat(t):t.concat(i.nodes):t}return this}}),k(["appendTo"],function(n){r.prototype[n]=function(n,e,t,i){return null==i&&(i=this),null!=n.nodeType&&"function"==typeof n.appendChild?(n.appendChild(this.render(e,t,null,i)),y(i,"domInsert"),this):(r(n).append(this),this)}}),function(){function n(n,e,t){n[e]=t}function t(n){var e={};return n.split(";").forEach(function(n){if(""!==n){var t=n.indexOf(":"),r=n.substring(0,t).trim(),i=n.substring(t+1).trim();e[r]=i}}),e}function r(n){var e,t="";for(e in n)t+=e+":"+n[e]+";";return t}function i(n,e){return n+":"+e+";"}_.removeAttr=_.removeProp=function(n){return l(this,function(e){e.attr[n]=null})},_.attr=_.prop=function(n,t){function r(n,t,r){n.attr[t]=e(r)}function i(n,e){for(var t in e)r(n,t,e[t])}if(1===arguments.length)return this.length>0?this[0].attr[n]:null;var o=v(n)?r:i;return l(this,function(e){o(e,n,t)})},_.tag=function(n){return 0===arguments.length?this[0]&&this[0].tagName:l(this,function(e){e.tagName=n})},_.css=function(e,o){if(arguments.length<=1&&"string"==typeof e){if(null==this.length)return null;var u=this[0].attr.style;if(null==u)return null;var s=t(u);return null==e?s:s[e]}if(null==e)return this;var a="object"==typeof e?r:i,c="object"==typeof e?C:n;return l(this,function(n){var i=n.attr.style;if(null==i)return void(n.attr.style=a(e,o));var l=t(i);c(l,e,o),n.attr.style=r(l)})}}(),function(){function n(n){var e=n.attr["class"];return"string"==typeof e?e:""}function e(e,t){return-1!==(" "+n(e)+" ").indexOf(" "+t+" ")}function t(e,t){e.attr["class"]=(n(e)+" "+t).trim()}function r(e,t){e.attr["class"]=(" "+n(e)+" ").replace(" "+t+" ","").trim()}_.hasClass=function(n){return c(this,function(t){return e(t,n)})};var i={add:function(n,r){e(n,r)===!1&&t(n,r)},remove:function(n,t){e(n,t)===!0&&r(n,t)},toggle:function(n,i){var o=e(n,i)===!0?r:t;o(n,i)}};k(["add","remove","toggle"],function(n){var e=i[n];_[n+"Class"]=function(n){return l(this,function(t){e(t,n)})}})}(),C(r.prototype,{clone:function(){return r(s(this,E))},wrap:function(n){var e=r(n);if(0===e.length)return G("Not valid wrapper",n),this;var t=s(this,function(n){var t=e.clone()[0];if(O(t).nodes=[n],null!=n.parent){var r=a(n.parent.nodes,n);-1!==r&&n.parent.nodes.splice(r,1,t)}return t});return r(t)},wrapAll:function(n){var e=r(n);return 0===e.length?(K("Not valid wrapper",n),this):(this.parent().mask(e),O(e[0]).nodes=this.toArray(),this.pushStack(e))}}),k(["empty","remove"],function(n){r.prototype[n]=function(){return l(this,e[n])};var e={remove:function(n){null!=n.parent&&u(n.parent.nodes,n)},empty:function(n){n.nodes=null}}}),C(r.prototype,{each:function(n,e){for(var t=0;t<this.length;t++)n.call(e||this,this[t],t);return this},eq:function(n){return-1===n?this.slice(n):this.slice(n,n+1)},get:function(n){return 0>n?this[this.length-n]:this[n]},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments))}}),k(["filter","children","closest","parent","find","first","last"],function(n){r.prototype[n]=function(e){var t,i,l=[],u=null==e?null:b(e,this.type,"closest"===n?"up":"down");switch(n){case"filter":return r(w(this,u));case"children":for(t=0;t<this.length;t++)i=this[t],null!=i.nodes&&(l=l.concat(null==u?i.nodes:w(i.nodes,u)));break;case"parent":for(t=0;t<this.length;t++)i=this[t].parent,!i||i.type===f.FRAGMENT||u&&x(i,u)||l.push(i);o(l);break;case"closest":case"find":if(null==u)break;for(t=0;t<this.length;t++)A(this[t][u.nextKey],u,l);break;case"first":case"last":var s;for(t=0;t<this.length;t++)if(s="first"===n?t:this.length-t-1,i=this[s],null==u||x(i,u)){l[0]=i;break}}return this.pushStack(l)}}),r}(ve);return function(e,r){function i(n){return n.parentNode.removeChild(n)}function o(n){if(null!=n)for(var e=n.length,t=-1;++t<e;)i(n[t])}function l(n,e){return e.parentNode.insertBefore(n,e.nextSibling)}function u(n,e){return e.parentNode.insertBefore(n,e)}function s(){}function a(){}function c(){}function d(n,e){if(null==e&&(e=[]),null==n.components)return e;for(var t,r=n.components,i=0,o=r.length;o>i;i++)t=r[i],"validate"!==t.compoName?d(t):e.push(t);return e}var h,v,g,m,y,N,A,S,_="undefined"!=typeof r?r:e.Compo||n.Compo,j=_.Dom.addEventListener,T=e.registerHandler,M=e.registerAttrHandler,I=e.registerUtil,D=_.config.getDOMLibrary();!function(){function n(n,e){for(var t,r=-1,i=e.length-1;++r<i;)t=e[r],null==n[t]&&(n[t]={}),n=n[t];return n}function e(n){return null==n||"object"!=typeof n?null:"number"==typeof n.length&&"function"==typeof n.slice?C.Array:"function"==typeof n.toUTCString?C.Date:null}function t(t,i,o,l){var s=l.length,c=s>1?n(t,l):t,f=l[s-1],d=c[f];if(s>1&&r(t,l),"length"===f){var h=e(c);if(null!=h)return u(c,h,function(){for(var n=o.length,e=-1;++e<n;)o[e].apply(null,arguments)}),d}return x(c,f,{get:function(){return d},set:function(n){if(n!==d){d=n;var r=0,l=o.length,s=e(n);if(null!=s)for(;l>r;r++)u(n,s,o[r]);if(null!=t[a][p])return void(t[a][p][i]=1);for(r=0;l>r;r++)o[r](n)}},configurable:!0,enumerable:!0}),d}function r(n,e){for(var t,r=o(n),l="",u=e.length-1,s=0;u>s;s++)t=e[s],l+=t+".",i(l,n,t,r),n=n[t]}function i(n,e,t,r){var i,o=e[t];x(e,t,{get:function(){return o},set:function(e){e!==o&&(i=o,o=e,r(n,i))},configurable:!0,enumerable:!0})}function o(n){return function(e,t){var r=n[a];if(null!=r)for(var i in r)if(0===i.indexOf(e)){var o=r[i].slice(0),l=o.length,u=0;if(0!==l){var s,c,f=b(n,i);for(u=0;l>u;u++)s=o[u],g(n,i,s),c=i.substring(e.length),g(t,c,s);for(u=0;l>u;u++)o[u](f);for(u=0;l>u;u++)h(n,i,o[u])}}}}function l(n,e,t){var r=N(n,e);return E(r,t)===!1&&r.push(t),r}h=function(n,r,i){for(var o=r.split("."),s=o.length,c=-1,f=n;++c<s&&(f=f[o[c]],null!=f);)if(null!=f[a]){var d=o.slice(c+1).join(".");if(null!=f[a][d]){l(f,d,i);var p=l(n,r,i);if(1===p.length){var h=o.splice(0,c);0!==h.length&&t(n,r,p,h,!0)}return}}var p=l(n,r,i);1===p.length&&t(n,r,p,o,!0);var v=b(n,r),g=e(v);null!=g&&u(v,g,i)},v=function(n,e,t){for(var r=e.split("."),i=r.length,o=-1,l=n;++o<i&&(l=l[r[o]],null!=l);)if(null!=l[a]){if(v(l,r.slice(o).join("."),t))return!0;break}var u=n[a];return null==u||null==u[e]?!1:E(u[e],t)},g=function(n,t,r){for(var i=t.split("."),o=i.length,l=-1,u=n;++l<o&&(u=u[i[l]],null!=u);)if(null!=u[a]){g(u,i.slice(l).join("."),r);break}var c=N(n,t),f=b(n,t);void 0===r?c.length=0:w(c,r);var d=e(f);null!=d&&s(f,d,r)},m=function(n){var e=n[a];null!=e&&(e[p]={})},y=function(n){var e=n[a],t=null==e?null:e[p];if(null!=t){e[p]=null;var r,i,o,l,u;for(r in t)if(i=n[a][r],l=null==i?0:i.length,0!==l)for(u=-1,o=r===c?n:b(n,r);++u<l;)i[u](o)}},N=function(n,e){var t=n[a];if(null==t&&(t={__dirty:null,__dfrTimeout:null,__mutators:null},x(n,"__observers",{value:t,enumerable:!1})),null==e)return t;var r=t[e];return null==r?t[e]=[]:r},A=function(n,t){var r=e(n);null!=r&&u(n,r,t)},S=function(n,e){s(n,null,e)};var u,s,a="__observers",c="__mutators",d="__dfrTimeout",p="__dirty",x=Object.defineProperty,C={Array:{throttle:!1,methods:["push","unshift","splice","pop","shift","reverse","sort","remove"]},Date:{throttle:!0,methods:["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds"]}};!function(){function n(n,r,i,o){var l=o===!0?t:e;return function(){return l(n,r,i,f.call(arguments))}}function e(n,e,t,i){var o=N(n,c),l=e.apply(n,i);return r(n,o,t,i,l),l}function t(n,e,t,i){var o=N(n,c),l=e.apply(n,i),u=n[a];return null!=u[d]?l:(u[d]=setTimeout(function(){u[d]=null,r(n,o,t,i,l)}),l)}function r(n,e,t,r,i){if(0!==e.length){var o=n[a];if(null!=o[p])return void(o[p][c]=1);for(var l,u=e.length,s=-1;++s<u;)l=e[s],"function"==typeof l&&l(n,t,r,i)}}u=function(e,t,r){var i=t.methods,o=t.throttle,l=N(e,c);if(0===l.length)for(var u,s,a=i.length,f=-1;++f<a;)u=i[f],s=e[u],null!=s&&(e[u]=n(e,s,u,o));l[l.length++]=r},s=function(n,e,t){var r=N(n,c);return void 0===t?void(r.length=0):void w(r,t)}}()}();var R;!function(){R=function(n){return null==n||""===n?null:("string"==typeof n&&(n=new Date(n)),isNaN(n)===!1&&"function"==typeof n.getFullYear?n:null)}}();var $,L,F,U,H;!function(){$=function(n,e,t,r){if(null==n.components)return l(t,r||n.placeholder);var i,o=n.components,s=null,a=!0,c=o.length,f=e-1;if(null==s)for(;++f<c;)if(i=o[f].elements,i&&i.length){s=i[0];break}if(null==s)for(a=!1,f=c>e?e:c;--f>-1;)if(i=o[f].elements,i&&i.length){s=i[i.length-1];break}return null==s&&(s=r||n.placeholder),a?u(t,s):l(t,s)},L=function(n,t,r,i,o){return e.render(t,r,i,o,n)},F=function(n,e){if(null==n)return!1;null!=n.elements&&(o(n.elements),n.elements=null),_.dispose(n);var t=e&&e.components||n.parent&&n.parent.components;return null==t?(K("Parent Components Collection is undefined"),!1):w(t,n)},U=function(n){_.signal.emitIn(n,"domInsert")},H=function(n,e){if("function"==typeof n.dispose){var t=n.dispose;return void(n.dispose=function(){e.call(this),t.call(this)})}n.dispose=e}}();var P,B,W,z,V,Q,Y,q;!function(){function n(n,e,o,l,u){if(null!=l){if("object"==typeof l){var s=B(l.accessor,e,null,o);return null==s||"object"!=typeof s?void console.error("Binding failed to an object over accessor",l.ref):void n(s,l.ref,u)}var a=l,c=a.split("."),f=c.length;if(f>1){var d=c[0];if("$c"===d)return o=r(o,c.slice(1),f-1),void n(o,a.substring(3),u);if("$a"===d||"$ctx"===d)return}var s=null;i(e,c,f)&&(s=e),null==s&&(s=t(o,c,f)),null==s&&(s=e),n(s,a,u)}}function t(n,e,t){for(var r;null!=n;){if(r=n.scope,null!=r&&i(r,e,t))return r;n=n.parent}return null}function r(n,e,t){for(;null!=n;){if(i(n,e,t))return n;n=n.parent}return n}function i(n,e,t){if(null==n)return!1;for(var r=0;t>r;r++)if(n=n[e[r]],void 0===n)return!1;return!0}var o=e.Utils.Expression;B=o.eval,Y=o.parse,q=o.varRefs,P=function(n,e,t,r){if("."===n)return e;var i=B(n,e,t,r);return null==i?"":i},W=function(e,t,r,i,o){if("."===e)return void A(t,o);var l=Y(e),u=q(l,t,r,i);if(null!=u){if("string"==typeof u)return void n(h,t,i,u,o);for(var s,a=null!=u.length&&"function"==typeof u.splice,c=a===!0?u.length:1,f=0;c>f;f++)s=a===!0?u[f]:u,n(h,t,i,s,o)}},z=function(e,t,r,i){if("function"==typeof r&&G("[mask.binding] - expression unbind(expr, model, controller, callback)"),"."===e)return void S(t,i);var o,l=q(e,t,null,r);if(null!=l){if("string"==typeof l)return void n(g,t,r,l,i);for(var o,u=null!=l.length&&"function"==typeof l.splice,s=u===!0?l.length:1,a=0;s>a;a++)o=u===!0?l[a]:l,n(g,t,r,o,i)}},V=function(n,e,t,r,i){var o=0;return function(){if(++o>1)return o=0,void G("<mask:bind:expression> Concurent binder detected",n);var l=P(n,e,t,r);if(arguments.length>1){var u=f.call(arguments);u[0]=l,i.apply(this,u)}else i(l);o--}},Q=function(n){var e=0;return function(){return++e>1?(e=0,void G("<listener:expression> concurent binder")):(n(),void e--)}}}();var X,J;!function(){X=function(n,e,t){for(var r,i,o,l,u=n.split(";"),s=[],a=0,c=u.length;c>a;a++)r=u[a].split(":"),1===r.length||2===r.length?(o=2===r.length?r[0]:t,i=r[2===r.length?1:0],l=J(i.trim(),o,e),null!=l&&s.push(l)):K('Too much ":" in a signal def.',u[a]);
return s},J=function(n,e,t){if(t!==!0)return{signal:n,type:e};var r=n.indexOf(".");return-1===r?(K("No pipe name in a signal",n),null):{signal:n.substring(r+1),pipe:n.substring(0,r),type:e}}}();var Z;!function(){function n(n,e,t){return null==n||"function"!=typeof n[e]?(K("BindingProvider.",t,"should be a function. Property:",e),!1):!0}function e(n,e){var t=n.ctr.parent;if(null!=t[e])return t;var r=n.model;return null!=r[e]?r:(K("BindingProvider. Accessor `",e,"`should be a function"),null)}function t(n){var e=n.getFullYear(),t=n.getMonth()+1,r=n.getDate();return e+"-"+(10>t?"0":"")+t+"-"+(10>r?"0":"")+r}function r(n){var e=n.getHours(),t=n.getMinutes();return e+":"+(10>t?"0":"")+t}var i={get:function(n,t){var r=n.objGetter;if(null==r)return P(t,n.model,n.ctx,n.ctr);var i=e(n,r);return null==i?null:i[r](t,n.model,n.ctr.parent)},set:function(n,t,r,i){var o=i.objSetter;if(null==o)return void x(n,t,r);var l=e(i,o);null!=l&&l[o](t,r,i.model,i.ctr.parent)}},o={get:function(e){var t=e.domGetter;if(null==t)return b(e,e.property);var r=e.ctr.parent;return n(r,t,"Getter")===!1?null:r[t](e.element)},set:function(e,t){var r=e.domSetter;if(null==r)return void x(e,e.property,t);var i=e.ctr.parent;n(i,r,"Setter")!==!1&&i[r](t,e.element)}},l={domSet:function(n){return function(e,t){var r=R(t);e.element.value=null==r?"":n(r)}},objSet:function(n){return function(e,t,r){var i=R(r);if(null!=i){var o=R(b(e,t));return null==o?void x(e,t,i):void n(o,i)}}}};Z={objectWay:i,domWay:o,SELECT:{get:function(n){var e=n.element,t=e.selectedIndex;return-1===t?"":e.options[t].getAttribute("name")},set:function(n,e){for(var t=n.element,r=t.options,i=r.length,o=-1;++o<i;)if(r[o].getAttribute("name")==e)return void(t.selectedIndex=o);G("Value is not an option",e)}},DATE:{domWay:{get:o.get,set:function(n,e){var r=R(e);n.element.value=null==r?"":t(r)}},objectWay:{get:i.get,set:l.objSet(function(n,e){n.setFullYear(e.getFullYear()),n.setMonth(e.getMonth()),n.setDate(e.getDate())})}},TIME:{domWay:{get:o.get,set:l.domSet(r)},objectWay:{get:i.get,set:l.objSet(function(n,e){n.setHours(e.getHours()),n.setMinutes(e.getMinutes()),n.setSeconds(e.getSeconds())})}}}}();var ne={};e.registerBinding=function(n,e){ne[n]=e};var ee;!function(){function n(n){var e=n.expression,t=n.model,r=n.objectChanged=n.objectChanged.bind(n);if(n.binder=V(e,t,n.ctx,n.ctr,r),W(e,t,n.ctx,n.ctr,n.binder),"dual"===n.bindingType){var i=n.ctr.attr;if(!i["change-slot"]&&!i["change-pipe-event"]){var o=n.element,l=i["change-event"]||i.changeEvent||"change",u=n.domChanged.bind(n);j(o,l,u)}if(!n.objectWay.get(n,n.expression))return setTimeout(function(){n.domWay.get(n)&&n.domChanged()}),n}return n.objectChanged(),n}function t(n,e,r){if(null!=n){var i=n.slots;(null==i||"function"!=typeof i[e]||i[e].apply(n,r)!==!1)&&t(n.parent,e,r)}}e.BindingProvider=ee=function(n,e,t,r){null==r&&(r=":bind"===t.compoName?"single":"dual");var i,o=t.attr;if(this.node=t,this.ctr=t,this.ctx=null,this.model=n,this.element=e,this.value=o.value,this.property=o.property,this.domSetter=o.setter||o["dom-setter"],this.domGetter=o.getter||o["dom-getter"],this.objSetter=o["obj-setter"],this.objGetter=o["obj-getter"],this.dismiss=0,this.bindingType=r,this.log=!1,this.signal_domChanged=null,this.signal_objectChanged=null,this.locked=!1,null==this.property&&null==this.domGetter)switch(e.tagName){case"INPUT":if(i=e.getAttribute("type"),"checkbox"===i){this.property="element.checked";break}if("date"===i){var l=Z.DATE;this.domWay=l.domWay,this.objectWay=l.objectWay}this.property="element.value";break;case"TEXTAREA":this.property="element.value";break;case"SELECT":this.domWay=Z.SELECT;break;default:this.property="element.innerHTML"}if(o.log&&(this.log=!0,"log"!==o.log&&(this.logExpression=o.log)),o["x-signal"]){var u=X(o["x-signal"],null,"dom")[0],s=u&&u.type;switch(s){case"dom":case"object":this["signal_"+s+"Changed"]=u.signal;break;default:K("Signal typs is not supported",u)}}if(o["x-pipe-signal"]){var u=X(o["x-pipe-signal"],!0,"dom")[0],s=u&&u.type;switch(s){case"dom":case"object":this["pipe_"+s+"Changed"]=u;break;default:K("Pipe type is not supported")}}if(o["dom-slot"]){this.slots={};var a=t.parent,c=a.parent;a.parent=this,this.parent=c,this.slots[o["dom-slot"]]=function(n,e){this.domChanged(n,e)}}var f=o["object-pipe-slot"]||o["x-pipe-slot"];if(f){var d=f,p=d.indexOf("."),h=d.substring(0,p),u=d.substring(p+1);this.pipes={},this.pipes[h]={},this.pipes[h][u]=function(){this.objectChanged()},_.pipe.addController(this)}if(o.expression){if(this.expression=o.expression,null==this.value&&"single"!==r){var v=q(this.expression);"string"==typeof v?this.value=v:G("Please set value attribute in DualBind Control.")}}else this.expression=this.value},ee.create=function(n,e,t,r){var i,o=t.attr.bindingProvider,l=null==o?null:ne[o];return"function"==typeof l?new l(n,e,t,r):(i=new ee(n,e,t,r),null!=l&&C(i,l),i)},ee.bind=function(e){return n(e)},ee.prototype={constructor:ee,dispose:function(){z(this.expression,this.model,this.ctr,this.binder)},objectChanged:function(n){if(!(this.dismiss-->0)){if(this.locked===!0)return void G("Concurance change detected",this);if(this.locked=!0,null==n&&(n=this.objectWay.get(this,this.expression)),this.domWay.set(this,n),this.log&&console.log("[BindingProvider] objectChanged -",n),this.signal_objectChanged&&t(this.ctr,this.signal_objectChanged,[n]),this.pipe_objectChanged){var e=this.pipe_objectChanged;_.pipe(e.pipe).emit(e.signal)}this.locked=!1}},domChanged:function(n,e){if(this.locked===!0)return void G("Concurance change detected",this);this.locked=!0,null==e&&(e=this.domWay.get(this));var r=!0,i=this.ctr.validations;if(i)for(var o,l=i.length,u=-1;++u<l;)if(o=i[u],o.validate(e,this.element,this.objectChanged.bind(this))===!1){r=!1;break}if(r&&(this.dismiss=1,this.objectWay.set(this.model,this.value,e,this),this.dismiss=0,this.log&&console.log("[BindingProvider] domChanged -",e),this.signal_domChanged&&t(this.ctr,this.signal_domChanged,[e]),this.pipe_domChanged)){var s=this.pipe_domChanged;_.pipe(s.pipe).emit(s.signal)}this.locked=!1},objectWay:Z.objectWay,domWay:Z.domWay},C(ee,{addObserver:h,removeObserver:g})}(),T(":visible",s),s.prototype={constructor:s,refresh:function(n,e){e.style.display=P(this.attr.check,n)?"":"none"},renderStart:function(n,e,t){this.refresh(n,t),this.attr.bind&&h(n,this.attr.bind,this.refresh.bind(this,n,t))}},function(){function n(){}T(":bind",n),n.prototype={constructor:n,renderEnd:function(n,e,t,r){this.provider=ee.create(e,r,this,"single"),ee.bind(this.provider)},dispose:function(){this.provider&&"function"==typeof this.provider.dispose&&this.provider.dispose()}}}(),T(":dualbind",a),a.prototype={constructor:a,renderEnd:function(n,t,r,i){if(this.provider=ee.create(t,i,this),this.components)for(var o,l=0,u=this.components.length;u>l;l++)o=this.components[l],":validate"===o.compoName&&(this.validations||(this.validations=[])).push(o);if(!this.attr["no-validation"]&&!this.validations){var s=t.Validate,a=this.provider.value;if(null==s&&-1!==a.indexOf(".")){for(var c=a.split("."),l=0,f=c.length,d=t[c[0]];null==s&&++l<f&&d;)s=d.Validate,d=d[c[l]];a=c.slice(l).join(".")}var p=s&&s[a];"function"==typeof p&&(p=e.getHandler(":validate").createCustom(i,p),(this.validations||(this.validations=[])).push(p))}ee.bind(this.provider)},dispose:function(){this.provider&&"function"==typeof this.provider.dispose&&this.provider.dispose()},handlers:{attr:{"x-signal":function(){}}}},function(){function n(){}function t(n,e){this.fn=n,this.message=e}function i(n,e,t){G("Validate Notification:",n,e);var r=D(n).next("."+l);return 0===r.length&&(r=D("<div>").addClass(l).html("<span></span><button>cancel</button>").insertAfter(n)),r.children("button").off().on("click",function(){r.hide(),t&&t()}).end().children("span").text(e).end().show()}function o(n){return D(n).next("."+l).hide()}var l="-validate-invalid";e.registerValidator=function(n,e){u[n]=e},T(":validate",n),n.prototype={constructor:n,attr:{},renderStart:function(e,r,i){if(this.element=i,this.attr.value){var o=n.resolveFromModel(e,this.attr.value);o&&(this.validators=[new t(o)])}},validate:function(n,e,t){null==e&&(e=this.element),this.attr&&(null==n&&this.attr.getter&&(n=b({node:this,element:e},this.attr.getter)),null==n&&this.attr.value&&(n=b(this.model,this.attr.value))),null==this.validators&&this.initValidators();for(var r,i=0,o=this.validators.length;o>i;i++)if(r=this.validators[i].validate(n),r&&!this.attr.silent)return this.notifyInvalid(e,r,t),!1;return this.makeValid(e),!0},notifyInvalid:function(n,e,t){return i(n,e,t)},makeValid:function(n){return o(n)},initValidators:function(){this.validators=[];for(var n in this.attr){switch(n){case"message":case"value":case"getter":continue}if(n in u!=!1){var e=u[n];this.validators.push(new t(e(this.attr[n],this),this.attr.message))}else K("Unknown Validator:",n,this)}}},n.resolveFromModel=function(n,e){return b(n.Validate,e)},n.createCustom=function(e,r){var i=new n;return i.element=e,i.validators=[new t(r)],i},t.prototype.validate=function(n){var e=this.fn(n);return e===!1?this.message||"Invalid - "+n:e},T(":validate:message",r({template:"div."+l+' { span > "~[bind:message]" button > "~[cancel]" }',onRenderStart:function(n){"string"==typeof n&&(n={message:n}),n.cancel||(n.cancel="cancel"),this.model=n},compos:{button:"$: button"},show:function(n,e){var t=this;this.model.message=n,this.compos.button.off().on(function(){t.hide(),e&&e()}),this.$.show()},hide:function(){this.$.hide()}}));var u={match:function(n){return function(e){return new RegExp(n).test(e)}},unmatch:function(n){return function(e){return!new RegExp(n).test(e)}},minLength:function(n){return function(e){return e.length>=parseInt(n,10)}},maxLength:function(n){return function(e){return e.length<=parseInt(n,10)}},check:function(n,e){return function(t){return P("x"+n,e.model,{x:t},e)}}}}(),T(":validate:group",c),c.prototype={constructor:c,validate:function(){for(var n,e=d(this),t=0,r=e.length;r>t;t++)if(n=e[t],!n.validate())return!1;return!0}},function(){function n(n,e,t){return n?null==e||""===e?n+" "+t:n.replace(e,t):t}function e(n){return function(e){n.textContent=e}}function r(e,t,r){return function(i){var o=e.getAttribute(t),l=n(o,r,i);e.setAttribute(t,l),r=i}}function i(e,t,r){return function(i){switch(typeof e[t]){case"boolean":return void(r=e[t]=!!i);case"number":return void(r=e[t]=Number(i));case"string":return void(r=e[t]=n(e[t],r,i));default:return void G("Unsupported elements property type",t)}}}function o(n,t,o,l,u){if("node"===n)return e(o);if("attr"===n){switch(u){case"value":case"disabled":case"checked":case"selected":case"selectedIndex":return i(o,u,l)}return r(o,u,l)}throw Error("Unexpected binder type: "+n)}function l(n,e,t,r,i,l,u,s){var a=o(s,e,i,n,u),c=V(e,t,r,l,a);W(e,t,r,l,c),H(l,function(){z(e,t,l,c)})}I("bind",{mode:"partial",current:null,element:null,nodeRenderStart:function(n,e,r,i,o){var l=P(n,e,r,o);return this.element=t.createTextNode(l),this.current=l},node:function(n,e,t,r,i){return l(this.current,n,e,t,this.element,i,null,"node"),this.element},attrRenderStart:function(n,e,t,r,i){return this.current=P(n,e,t,i)},attr:function(n,e,t,r,i,o){return l(this.current,n,e,t,r,i,o,"attr"),this.current}})}(),M("xx-visible",function(n,e,t,r,i,o){var l=V(e,t,r,o,function(n){i.style.display=n?"":"none"});W(e,t,r,o,l),H(o,function(){z(e,t,o,l)}),P(e,t,r,o)||(i.style.display="none")}),M("x-toggle","client",function(n,e,t,r,i,o){var l=e.substring(0,e.indexOf(":")),u=e.substring(l.length+1),s=q(u);"string"!=typeof s&&(s=s[0]),j(i,l,function(){var n=P(u,t,r,o);x(t,s,n)})}),M("x-class-toggle","client",function(n,e,t,r,i){var o=e.substring(0,e.indexOf(":")),l=e.substring(o.length+1).trim();j(i,o,function(){D(i).toggleClass(l)})}),function(){var n,i,l,s,a,c=e.getStatement();!function(){n=function(n,e,t,r,i){return c[n].getNodes(e,t,r,i)},i=function(n,e,t,r,i){if(null==n)return null;var o=[];return ce(n,e,t,r,i,o),o},l=function(n,e){n.placeholder=t.createComment(""),e.appendChild(n.placeholder)},s=function(n,e,t,r,i,o){n.parent=o,n.model=t,n.refresh=O(n.refresh,n),n.binder=V(n.expr||n.expression,t,r,o,n.refresh),W(n.expr||n.expression,t,r,o,n.binder)},a=function(n,e){if(null!=n)for(var t,r="function"==typeof n.splice,i=r?n.length:1,o=-1;++o<i;)t=r?n[o]:n,t.style.display=e?"":"none"}}(),function(){function r(){}function o(n,e,t,r,i,o,l,u){for(n.model=i,n.ctx=o,n.controller=u,n.refresh=O(n.refresh,n),n.binder=Q(n.refresh),n.index=t,n.Switch=[{node:e,elements:null}],W(e.expression,i,o,u,n.binder);;){if(e=e.nextSibling,null==e||"else"!==e.tagName)break;n.Switch.push({node:e,elements:null}),e.expression&&W(e.expression,i,o,u,n.binder)}null!=t&&(n.Switch[t].elements=r)}e.registerHandler("+if",{meta:{serializeNodes:!0},render:function(e,t,r,o,l){for(var u=this,s=n("if",u,e,t,o),a=0,c=u;;){if(c.nodes===s)break;if(a++,c=u.nextSibling,null==c||"else"!==c.tagName){a=null;break}}return this.attr["switch-index"]=a,i(s,e,t,r,o,l)},renderEnd:function(n,e,i,l,u){var s=new r,a=this.attr["switch-index"];return s.placeholder=t.createComment(""),l.appendChild(s.placeholder),o(s,this,a,n,e,i,l,u),s},serializeNodes:function(n){for(var t=[n];;){if(n=n.nextSibling,null==n||"else"!==n.tagName)break;t.push(n)}return e.stringify(t)}}),r.prototype={compoName:"+if",ctx:null,model:null,controller:null,index:null,Switch:null,binder:null,refresh:function(){for(var n,t=this,r=t.Switch,i=r.length,o=-1,l=t.index,s=t.model,c=t.ctx,d=t.controller;++o<i&&(n=r[o].node.expression,null!=n)&&!P(n,s,c,d););if(l!==o){if(null!=l&&a(r[l].elements,!1),o===i)return void(t.index=null);this.index=o;var p=r[o];if(null!=p.elements)return void a(p.elements,!0);var h=e.render(p.node.nodes,s,c,null,d),v=h.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.call(h.childNodes):h;u(h,t.placeholder),p.elements=v}},dispose:function(){for(var n,e,t=this.Switch,r=t.length,i=-1;++i<r;)n=t[i],e=n.node.expression,e&&z(e,this.model,this.controller,this.binder),n.node=null,n.elements=null;this.controller=null,this.model=null,this.ctx=null}}}(),function(){function n(){}function t(n,e,t,r,i){if(o=d.getNodes(n,e,t,r,i),s=null,null!=o){for(var l=e.length,u=-1;++u<l&&e[u].nodes!==o;);s=u===l?null:u}}function r(n,e,t,r,i,o,l,u){n.ctx=o,n.expr=e.expression,n.model=i,n.controller=u,n.index=t,n.nodes=e.nodes,n.refresh=O(n.refresh,n),n.binder=V(n.expr,i,o,u,n.refresh),n.Switch=new Array(e.nodes.length),null!=t&&(n.Switch[t]=r),W(e.expression,i,o,u,n.binder)}var o,s,d=c["switch"],p="switch-index";e.registerHandler("+switch",{meta:{serializeNodes:!0},serializeNodes:function(n){return e.stringify(n)},render:function(n,e,r,l,u){var a=P(this.expression,n,e,l);return t(a,this.nodes,n,e,l),null==o?null:(this.attr[p]=s,i(o,n,e,r,l,u))},renderEnd:function(e,t,i,o,u){var s=new n,a=this.attr[p];return l(s,o),r(s,this,a,e,t,i,o,u),s}}),n.prototype={compoName:"+switch",ctx:null,model:null,controller:null,index:null,nodes:null,Switch:null,binder:null,refresh:function(n){var r=this,i=r.Switch,l=(i.length,r.index),c=r.model,d=r.ctx,p=r.controller;if(t(n,r.nodes,c,d,p),s!==l){if(null!=l&&a(i[l],!1),null==s)return void(r.index=null);this.index=s;var h=i[s];if(null!=h)return void a(h,!0);var v=e.render(o,c,d,null,p),g=v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.call(v.childNodes):v;u(v,r.placeholder),i[s]=g}},dispose:function(){z(this.expr,this.model,this.controller,this.binder),this.controller=null,this.model=null,this.ctx=null;var n,e,t,r,i=this.Switch;for(n in i)if(e=i[n],null!=e)for(r=e.length,t=-1;++t<r;)null!=e[t].parentNode&&e[t].parentNode.removeChild(e[t])}}}(),function(){function n(n){this.expr=n.expression,this.nodes=n.nodes}function i(n,e,t,r,i){var o=[];return ce(n,e,t,r,i,o),o}c["with"];e.registerHandler("+with",{meta:{serializeNodes:!0},rootModel:null,render:function(n,e,t,r){var o=this.expression,l=this.nodes,u=B(o,n,e,r);return this.rootModel=n,i(l,u,e,t,r)},onRenderStartClient:function(n,e){this.rootModel=n,this.model=B(this.expression,n,e,this)},renderEnd:function(e,t,r,i,o){t=this.rootModel||t;var u=new n(this);return u.elements=e,u.model=t,u.parent=o,u.refresh=O(u.refresh,u),u.binder=V(u.expr,t,r,o,u.refresh),W(u.expr,t,r,o,u.binder),l(u,i),u}}),n.prototype={compoName:"+with",elements:null,binder:null,model:null,parent:null,refresh:function(n){if(o(this.elements),this.components){for(var e=this.components.length,l=-1;++l<e;)r.dispose(this.components[l]);this.components.length=0}var s=t.createDocumentFragment();this.elements=i(this.nodes,n,null,s,this),u(s,this.placeholder),U(this)},dispose:function(){z(this.expr,this.model,this.parent,this.binder),this.parent=null,this.model=null,this.ctx=null}}}(),function(){function n(n){this.expr=n.expression,this.nodes=n.nodes}function t(n,e,t,r,i){var o=[];return ce(n,e,t,r,i,o),o}var r=c.visible;e.registerHandler("+visible",{meta:{serializeNodes:!0},render:function(n,e,r,i){return t(this.nodes,n,e,r,i)},renderEnd:function(e,t,r,i,o){var l=new n(this);return l.elements=e,l.model=t,l.parent=o,l.refresh=O(l.refresh,l),l.binder=V(l.expr,t,r,o,l.refresh),W(l.expr,t,r,o,l.binder),l.refresh(),l}}),n.prototype={compoName:"+visible",elements:null,binder:null,model:null,parent:null,refresh:function(){var n=P(this.expr,this.model,this.ctx,this);r.toggle(this.elements,n)},dispose:function(){z(this.expr,this.model,this.parent,this.binder),this.parent=null,this.model=null,this.ctx=null}}}(),function(){function n(n){for(var e,t=n.length,r=-1;++r<t;)switch(e=n[r],typeof e){case"string":case"number":case"boolean":n[r]=Object(e)}}function r(n,e){for(var r=n.node.components,i=0,o=r.length,l=0,s=null,a=null,c=null,f=t.createDocumentFragment(),d=[];o>i;i++)if(c=r[i],null!=c.elements&&0!==c.elements.length)for(l=0,s=c.elements.length;s>l;l++)a=c.elements[l],a.parentNode.removeChild(a);n:for(l=0,s=e.length;s>l;l++){for(i=0;o>i;i++)if(e[l]===n._getModel(r[i])){d[l]=r[i];continue n}G("No Model Found for",e[l])}for(i=0,o=d.length;o>i;i++)if(c=d[i],null!=c.elements&&0!==c.elements.length)for(l=0,s=c.elements.length;s>l;l++)a=c.elements[l],f.appendChild(a);n.components=n.node.components=d,u(f,n.placeholder)}function i(n,e,t,r,i){var o=n.node,l=o.components;null==l&&(l=o.components=[]);var u=(n.prop1,n.prop2,n.type,n.ctx),s=n.node;if(null!=e&&null!=t){var a=e,c=e+t;for(c>l.length&&(c=l.length);c>a;a++)F(l[a],o)&&(a--,c--)}if(null!=r&&i&&i.length){var f,a=l.length,d=n._build(o,i,u,s),p=l.splice(a);for($(o,r,d,n.placeholder),l.splice.apply(l,[r,0].concat(p)),a=0,f=p.length;f>a;a++)_.signal.emitIn(p[a],"domInsert")}}function o(n,e){for(var t,r=n.components,i=r.length;--i>-1;)t=r[i],-1!==e.indexOf(t.model)&&F(t,n.node)}var l={model:null,parent:null,refresh:function(e,t,l,s){var a,c=0,f=this.node,d=(this.model,this.ctx),p=this.node;if(null==t){var h=f.components;if(null!=h){for(var a=h.length,c=-1;++c<a;)F(h[c],f)&&(c--,a--);h.length=0}var v=this._build(f,e,d,p);return u(v,this.placeholder),void k(f.components,U)}var g=e;switch(n(e),t){case"push":i(this,null,null,g.length-1,g.slice(g.length-1));break;case"pop":i(this,g.length,1);break;case"unshift":i(this,null,null,0,g.slice(0,1));break;case"shift":i(this,0,1);break;case"splice":var m=l[0],y=1===l.length?this.components.length:l[1],b=l.length>2?g.slice(l[0],l.length-2+l[0]):null;i(this,m,y,m,b);break;case"sort":case"reverse":r(this,g);break;case"remove":null!=s&&s.length&&o(this,s)}},dispose:function(){z(this.expr||this.expression,this.model,this.parent,this.binder)}};!function(){function r(n,e){this.prop1=e[o],this.prop2=e[u],this.type=e[a],this.expr=e[f],null==n.components&&(n.components=[]),this.node=n,this.components=n.components}var i=c["for"],o="for-prop-1",u="for-prop-2",a="for-type",f="for-expr";e.registerHandler("+for",{meta:{serializeNodes:!0},serializeNodes:function(n){return e.stringify(n)},render:function(e,t,r,l,s){var c=i.parseFor(this.expression),d=this.attr;d[o]=c[0],d[u]=c[1],d[a]=c[2],d[f]=c[3];var h=B(c[3],e,t,l);null!=h&&(p(h)&&n(h),i.build(h,c,this.nodes,e,t,r,this,s))},renderEnd:function(n,e,i,o,l){var u=new r(this,this.attr);return u.placeholder=t.createComment(""),o.appendChild(u.placeholder),s(u,this,e,i,o,l),u},getHandler:function(n,e){return i.getHandler(n,e)}}),r.prototype={compoName:"+for",model:null,parent:null,refresh:l.refresh,dispose:l.dispose,_getModel:function(n){return n.scope[this.prop1]},_build:function(n,e,t,r){var o=i.getNodes(n.nodes,e,this.prop1,this.prop2,this.type);return ce(o,this.model,t,null,r)}}}(),function(){function r(n,e,t,r,o,l){for(var u=e.length,s=new Array(u),a="."===o.expression?'."':"("+o.expression+')."',c=0;u>c;c++)s[c]=i(n,e[c],c,a);ce(s,null,t,r,o,l)}function i(n,e,t,r){var i=new o;return i.scope={index:t},i.model=e,i.modelRef=r+t+'"',{type:re.COMPONENT,tagName:"each::item",nodes:n,controller:i}}function o(){}function u(n){this.expression=n.expression,this.nodes=n.nodes,null==n.components&&(n.components=[]),this.node=n,this.components=n.components}c.each;e.registerHandler("+each",{meta:{serializeNodes:!0},serializeNodes:function(n){return e.stringify(n)},render:function(e,t,i,o,l){var u=P(this.expression,e,t,o);null!=u&&(n(u),r(this.nodes,u,t,i,this,l))},renderEnd:function(n,e,r,i,o){var l=new u(this,this.attr);return l.placeholder=t.createComment(""),i.appendChild(l.placeholder),s(l,this,e,r,i,o),l}}),e.registerHandler("each::item",o),o.prototype={compoName:"each::item",scope:null,model:null,modelRef:null,parent:null,renderEnd:function(n){this.elements=n},dispose:function(){null!=this.elements&&(this.elements.length=0,this.elements=null)}},u.prototype={compoName:"+each",refresh:l.refresh,dispose:l.dispose,_getModel:function(n){return n.model},_build:function(n,e,i,o){var l=t.createDocumentFragment();return r(n.nodes,e,i,l,o),l}}}()}()}()}(ve,ge),ve.Compo=ge,ve.jmask=me,e.mask=ve});
//# sourceMappingURL=mask.min.js.map